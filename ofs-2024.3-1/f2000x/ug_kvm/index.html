
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../ug_docker/">
      
      
        <link rel="next" href="../../hw/common/user_guides/oneapi_asp/ug_oneapi_asp/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.9">
    
    
      
        <title>KVM User Guide - OFS</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.85bb2934.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#virtual-machine-user-guide-open-fpga-stack-kvm" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="OFS" class="md-header__button md-logo" aria-label="OFS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OFS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              KVM User Guide
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ofs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ofs
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Welcome
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../hw/common/user_guides/ug_fpga_developer/ug_fpga_developer/" class="md-tabs__link">
        Start Here
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../hw/doc_modules/contents_s10_pcie_attach/" class="md-tabs__link">
        Stratix® 10 PCIe Attach OFS
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../hw/doc_modules/contents_agx7_pcie_attach/" class="md-tabs__link">
        Agilex™ 7 PCIe Attach OFS
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../hw/doc_modules/contents_agx7_soc_attach/" class="md-tabs__link md-tabs__link--active">
        Agilex SoC Attach OFS
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../hw/common/user_guides/oneapi_asp/ug_oneapi_asp/" class="md-tabs__link">
        oneAPI
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../hw/common/sw_installation/pcie_attach/sw_install_pcie_attach/" class="md-tabs__link">
        OFS Software
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="OFS" class="md-nav__button md-logo" aria-label="OFS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    OFS
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ofs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ofs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Welcome
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Start Here
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Start Here
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/common/user_guides/ug_fpga_developer/ug_fpga_developer/" class="md-nav__link">
        FPGA Developer Journey Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/common/user_guides/ug_sw_developer/ug_sw_developer/" class="md-nav__link">
        Software Developer Journey Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/doc_modules/Glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Stratix® 10 PCIe Attach OFS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Stratix® 10 PCIe Attach OFS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/doc_modules/contents_s10_pcie_attach/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../d5005/adp_board_installation_guidelines/" class="md-nav__link">
        Board Installation Guide (Intel® FPGA PAC D5005)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/common/sw_installation/pcie_attach/sw_install_pcie_attach/" class="md-nav__link">
        Software Installation Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/d5005/user_guides/ug_qs_ofs_d5005/ug_qs_ofs_d5005/" class="md-nav__link">
        Getting Started Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/d5005/user_guides/ug_eval_ofs_d5005/ug_eval_script_ofs_d5005/" class="md-nav__link">
        Automated Evaluation Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/d5005/reference_manuals/ofs_fim/mnl_fim_ofs_d5005/" class="md-nav__link">
        Shell Technical Reference Manual
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/d5005/dev_guides/fim_dev/ug_dev_fim_ofs_d5005/" class="md-nav__link">
        Shell Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
          Workload Development
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_8">
          <span class="md-nav__icon md-icon"></span>
          Workload Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/d5005/dev_guides/afu_dev/ug_dev_afu_d5005/" class="md-nav__link">
        Workload Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../d5005/ug_dev_pim_based_afu/" class="md-nav__link">
        PIM Based AFU Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../d5005/ug_dev_afu_host_software/" class="md-nav__link">
        AFU Host Software Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../d5005/ug_dev_afu_sim_env/" class="md-nav__link">
        AFU Simulation Environment User Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/d5005/user_guides/ug_sim_ofs_d5005/ug_sim_ofs_d5005/" class="md-nav__link">
        Simulation User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_10" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
          Virtualization
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_10">
          <span class="md-nav__icon md-icon"></span>
          Virtualization
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../d5005/ug_docker/" class="md-nav__link">
        Docker User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../d5005/ug_kvm/" class="md-nav__link">
        KVM User Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Agilex™ 7 PCIe Attach OFS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Agilex™ 7 PCIe Attach OFS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/doc_modules/contents_agx7_pcie_attach/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
          Board Installation Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Board Installation Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../n6001/adp_board_installation_guidelines/" class="md-nav__link">
        Intel® FPGA SmartNIC N6000/1-PL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/common/board_installation/devkit_board_installation/devkit_board_installation_guidelines/" class="md-nav__link">
        Agilex™ 7 FPGA I-Series and F-Series Development Kits
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/common/sw_installation/pcie_attach/sw_install_pcie_attach/" class="md-nav__link">
        Software Installation Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
          Getting Started Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Getting Started Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/iseries_devkit/user_guides/ug_qs_ofs_iseries/ug_qs_ofs_iseries/" class="md-nav__link">
        OFS for Agilex™ 7 FPGA I-Series Development Kit (2xR-Tile,1xF-Tile)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/ftile_devkit/user_guides/ug_qs_ofs_ftile/ug_qs_ofs_ftile/" class="md-nav__link">
        OFS for Agilex™ 7 FPGA F-Series Development Kit (2xF-Tile)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/n6001/user_guides/ug_qs_ofs_n6001/ug_qs_ofs_n6001/" class="md-nav__link">
        OFS for Intel® FPGA SmartNIC N6001-PL
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/common/user_guides/ug_eval_script_ofs_agx7_pcie_attach/ug_eval_script_ofs_agx7_pcie_attach/" class="md-nav__link">
        Automated Evaluation Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/n6001/reference_manuals/ofs_fim/mnl_fim_ofs_n6001/" class="md-nav__link">
        Shell Technical Reference Manual
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_7" >
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_7" id="__nav_4_7_label" tabindex="0">
          Shell Developer Guides
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_7">
          <span class="md-nav__icon md-icon"></span>
          Shell Developer Guides
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/iseries_devkit/dev_guides/fim_dev/ug_ofs_iseries_dk_fim_dev/" class="md-nav__link">
        PCIe Attach I-Series (2xR-Tile, F-Tile)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/ftile_devkit/dev_guides/fim_dev/ug_ofs_ftile_dk_fim_dev/" class="md-nav__link">
        PCIe Attach F-Series (2xF-Tile)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/n6001/dev_guides/fim_dev/ug_dev_fim_ofs_n6001/" class="md-nav__link">
        PCIe Attach F-Series (P-Tile/E-Tile)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/n6001/dev_guides/hps_dev/hps_developer_ug/" class="md-nav__link">
        HPS Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/common/user_guides/ug_sim_ofs_agx7_pcie_attach/ug_sim_ofs_agx7_pcie_attach/" class="md-nav__link">
        Simulation User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_10" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_10" id="__nav_4_10_label" tabindex="0">
          Workload Development
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_10_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_10">
          <span class="md-nav__icon md-icon"></span>
          Workload Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/common/user_guides/afu_dev/ug_dev_afu_ofs_agx7_pcie_attach/ug_dev_afu_ofs_agx7_pcie_attach/" class="md-nav__link">
        Workload Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../n6001/ug_dev_pim_based_afu/" class="md-nav__link">
        PIM Based AFU Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../n6001/ug_dev_afu_host_software/" class="md-nav__link">
        AFU Host Software Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../n6001/ug_dev_afu_sim_env/" class="md-nav__link">
        AFU Simulation Environment User Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_11" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4_11" id="__nav_4_11_label" tabindex="0">
          Virtualization
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_11_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_11">
          <span class="md-nav__icon md-icon"></span>
          Virtualization
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../n6001/ug_docker/" class="md-nav__link">
        Docker User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../n6001/ug_kvm/" class="md-nav__link">
        KVM User Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/common/user_guides/ug_troubleshoot/ug_agx7_troubleshoot/" class="md-nav__link">
        Troubleshooting Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Agilex SoC Attach OFS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Agilex SoC Attach OFS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/doc_modules/contents_agx7_soc_attach/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/common/board_installation/f2000x_board_installation/f2000x_board_installation/" class="md-nav__link">
        Board Installation Guide (Intel® IPU Platform F2000X-PL)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/common/sw_installation/soc_attach/sw_install_soc_attach/" class="md-nav__link">
        Software Installation Guide for SoC Attach
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/f2000x/user_guides/ug_qs_ofs_f2000x/ug_qs_ofs_f2000x/" class="md-nav__link">
        Getting Started Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/f2000x/user_guides/ug_eval_ofs/ug_eval_script_ofs_f2000x/" class="md-nav__link">
        Automated Evaluation Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/f2000x/reference_manuals/ofs_fim/mnl_fim_ofs/" class="md-nav__link">
        Shell Technical Reference Manual
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/f2000x/dev_guides/fim_dev/ug_dev_fim_ofs/" class="md-nav__link">
        Shell Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_8" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5_8" id="__nav_5_8_label" tabindex="0">
          Workload Development
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5_8">
          <span class="md-nav__icon md-icon"></span>
          Workload Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/f2000x/dev_guides/afu_dev/ug_dev_afu_ofs_f2000x/" class="md-nav__link">
        Workload Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ug_dev_pim_based_afu/" class="md-nav__link">
        PIM Based AFU Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ug_dev_afu_host_software/" class="md-nav__link">
        AFU Host Software Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ug_dev_afu_sim_env/" class="md-nav__link">
        AFU Simulation Environment User Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/f2000x/user_guides/ug_sim_ofs/ug_sim_ofs/" class="md-nav__link">
        Simulation User Guide
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_10" checked>
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5_10" id="__nav_5_10_label" tabindex="0">
          Virtualization
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_10_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_5_10">
          <span class="md-nav__icon md-icon"></span>
          Virtualization
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ug_docker/" class="md-nav__link">
        Docker User Guide
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          KVM User Guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        KVM User Guide
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#document-scope" class="md-nav__link">
    Document scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-modes-of-operation" class="md-nav__link">
    1. Modes of Operation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-enable-virtualization" class="md-nav__link">
    2. Enable Virtualization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-verify-environment-setup" class="md-nav__link">
    3. Verify Environment Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-install-virtual-machine-manager" class="md-nav__link">
    4. Install Virtual Machine Manager
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-create-a-vm-using-virt-manager" class="md-nav__link">
    5. Create a VM Using Virt-Manager
  </a>
  
    <nav class="md-nav" aria-label="5. Create a VM Using Virt-Manager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-passing-devices-to-the-vm" class="md-nav__link">
    5.1 Passing Devices to the VM
  </a>
  
    <nav class="md-nav" aria-label="5.1 Passing Devices to the VM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#511-management-mode" class="md-nav__link">
    5.1.1 Management Mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#512-deployment-mode" class="md-nav__link">
    5.1.2 Deployment Mode
  </a>
  
    <nav class="md-nav" aria-label="5.1.2 Deployment Mode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-16-accelerator-pfvf-and-guid-mappings" class="md-nav__link">
    Table 16: Accelerator PF/VF and GUID Mappings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#513-2-pf-mode" class="md-nav__link">
    5.1.3 2 PF Mode
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-virt-manager-configuration-changes" class="md-nav__link">
    5.2 Virt-Manager Configuration Changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notices-disclaimers" class="md-nav__link">
    Notices &amp; Disclaimers
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          oneAPI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          oneAPI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/common/user_guides/oneapi_asp/ug_oneapi_asp/" class="md-nav__link">
        oneAPI ASP Getting Started User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/common/reference_manual/oneapi_asp/oneapi_asp_ref_mnl/" class="md-nav__link">
        oneAPI Accelerator Support Package(ASP) Reference Manual
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          OFS Software
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          OFS Software
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/common/sw_installation/pcie_attach/sw_install_pcie_attach/" class="md-nav__link">
        Software Installation Guide OFS for PCIe Attach
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/common/sw_installation/soc_attach/sw_install_soc_attach/" class="md-nav__link">
        Software Installation Guide OFS for SoC Attach
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/common/reference_manual/ofs_sw/mnl_sw_ofs/" class="md-nav__link">
        Software Reference Manual
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hw/common/reference_manual/driver_dev_qs/driver_dev_qs/" class="md-nav__link">
        Driver Development Quick Start Guidelines for Linux DFL
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_5" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7_5" id="__nav_7_5_label" tabindex="0">
          OPAE FPGA Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_5">
          <span class="md-nav__icon md-icon"></span>
          OPAE FPGA Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/fpga_tools/fpgainfo/fpgainfo/" class="md-nav__link">
        fpgainfo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/fpga_tools/fpgasupdate/fpgasupdate/" class="md-nav__link">
        fpgasupdate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/fpga_tools/mmlink/mmlink/" class="md-nav__link">
        mmlink
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/fpga_tools/packager/packager/" class="md-nav__link">
        packager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/fpga_tools/userclk/userclk/" class="md-nav__link">
        userclk
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/fpga_tools/hssi/hssi/" class="md-nav__link">
        hssi
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/fpga_tools/pci_device/pci_device/" class="md-nav__link">
        pci_device
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/fpga_tools/opae.io/opae.io/" class="md-nav__link">
        opae.io
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/fpga_tools/rsu/rsu/" class="md-nav__link">
        rsu
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/fpga_tools/host_exerciser/host_exerciser/" class="md-nav__link">
        host_exerciser
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/fpga_tools/hssi_ethernet/hssistats/" class="md-nav__link">
        HSSI ethernet statistics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/fpga_tools/hssi_ethernet/hssimac/" class="md-nav__link">
        HSSI ethernet mac
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/fpga_tools/mem_tg/mem_tg/" class="md-nav__link">
        mem_tg
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/fpga_tools/vabtool/vabtool/" class="md-nav__link">
        vabtool
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/fpga_tools/opaevfio/opaevfio/" class="md-nav__link">
        opaevfio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/fpga_tools/ofs.uio/ofs.uio/" class="md-nav__link">
        ofs.uio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/fpga_tools/opaeuio/opaeuio/" class="md-nav__link">
        opaeuio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../sw/fpga_tools/fpgad/fpgad/" class="md-nav__link">
        fpgad
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#document-scope" class="md-nav__link">
    Document scope
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-modes-of-operation" class="md-nav__link">
    1. Modes of Operation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-enable-virtualization" class="md-nav__link">
    2. Enable Virtualization
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-verify-environment-setup" class="md-nav__link">
    3. Verify Environment Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-install-virtual-machine-manager" class="md-nav__link">
    4. Install Virtual Machine Manager
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-create-a-vm-using-virt-manager" class="md-nav__link">
    5. Create a VM Using Virt-Manager
  </a>
  
    <nav class="md-nav" aria-label="5. Create a VM Using Virt-Manager">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-passing-devices-to-the-vm" class="md-nav__link">
    5.1 Passing Devices to the VM
  </a>
  
    <nav class="md-nav" aria-label="5.1 Passing Devices to the VM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#511-management-mode" class="md-nav__link">
    5.1.1 Management Mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#512-deployment-mode" class="md-nav__link">
    5.1.2 Deployment Mode
  </a>
  
    <nav class="md-nav" aria-label="5.1.2 Deployment Mode">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-16-accelerator-pfvf-and-guid-mappings" class="md-nav__link">
    Table 16: Accelerator PF/VF and GUID Mappings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#513-2-pf-mode" class="md-nav__link">
    5.1.3 2 PF Mode
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-virt-manager-configuration-changes" class="md-nav__link">
    5.2 Virt-Manager Configuration Changes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notices-disclaimers" class="md-nav__link">
    Notices &amp; Disclaimers
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="virtual-machine-user-guide-open-fpga-stack-kvm">Virtual machine User Guide: Open FPGA Stack + KVM<a class="headerlink" href="#virtual-machine-user-guide-open-fpga-stack-kvm" title="Permanent link">&para;</a></h1>
<p>Last updated: <strong>March 28, 2025</strong> </p>
<h2 id="document-scope">Document scope<a class="headerlink" href="#document-scope" title="Permanent link">&para;</a></h2>
<p>The document describes setting up and configuring a virtual machine to use PCIe devices. Here are the steps that the document may include:</p>
<ol>
<li>Install the necessary tools, such as virt-manager, on the host machine. This may involve downloading and installing the software from the internet.</li>
<li>Enable the virtualization feature on the host machine. This may involve going into the BIOS settings and enabling hardware-assisted virtualization or using a command-line tool to enable it in the operating system.</li>
<li>Use virt-manager to create a new virtual machine and configure its settings. This may involve choosing a name and operating system for the virtual machine and setting the amount of memory and storage it will use.</li>
<li>Install the OPAE (Open Programmable Acceleration Engine) tool on the virtual machine. This may involve downloading and installing the OPAE software.</li>
<li>Install the <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> (Data Field Level) drivers on the virtual machine. These drivers allow the virtual machine to access and use the PCIe devices on the host machine. This may involve downloading and installing the drivers from the internet.</li>
<li>Once all of the steps have been completed, you should be able to use the virtual machine to access and use the PCIe devices on the host machine. You may need to configure the virtual machine's settings to enable it to use the PCIe devices, such as by assigning a specific device to the virtual machine.</li>
</ol>
<h2 id="1-modes-of-operation">1. Modes of Operation<a class="headerlink" href="#1-modes-of-operation" title="Permanent link">&para;</a></h2>
<p>Our current operational framework stipulates two distinct modes of operation for PF/VF configurations. When using a 2 PF enabled <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> design, both the workload and management ports can be interchangeably passed through to a VM or run on bare-metal.</p>
<ol>
<li>
<p><strong>Management Mode</strong>: This mode necessitates the passthrough of only the <abbr title="FPGA Management Engine, Provides a way to manage the platform and enable acceleration functions on the platform.">FME</abbr> device (use fpgainfo fme to discover your port number, normally .0). The reason for this is that the Open FPGA Stack (<abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr>) depends on this address for management. Under this mode, the use of the exerciser and virtual functions is not feasible.</p>
</li>
<li>
<p><strong>Virtual Function Mode</strong>: This mode comes into effect when a user needs to utilize the Virtual Functions (VF). The user will convert (example) Physical Function 0 (PF0) to three Virtual Functions (VF). This means the PF will cease to function for management purposes. Once the VFs are set up, they essentially take over the role of the PF in communicating with the Virtual Machines (VMs).</p>
<p>However, this mode is subject to a limitation. If the user needs to execute 'fpgainfo fme' or 'fpgaupdate', they will need to transition from Virtual Function Mode to Management Mode. Conversely, if the user intends to utilize the Virtual Functions, they would need to switch from Management Mode to Virtual Function Mode. It is imperative to bear this limitation in mind when operating within these modes.</p>
</li>
</ol>
<h2 id="2-enable-virtualization">2. Enable Virtualization<a class="headerlink" href="#2-enable-virtualization" title="Permanent link">&para;</a></h2>
<p>To check if virtualization is enabled on a Red Hat system using <code>lscpu</code> and <code>grep</code>, you can use the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>lscpu<span class="w"> </span>-e<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>Virtualization
</code></pre></div>
<p>This command will run <code>lscpu</code> with the <code>-e</code> or <code>--extended</code> option, which displays information about the CPU and its available virtualization capabilities. Then, it pipes the output to <code>grep</code> with the search pattern "Virtualization". If the system has support for virtualization, the output will show the "Virtualization" field and its value, for example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>Virtualization:<span class="w"> </span>VT-x
</code></pre></div>
<p>In this example, the output shows that the system supports Intel VT-x virtualization technology. If the "Virtualization" field is empty, the system does not have support for virtualization. Keep in mind that even if the system has support for virtualization, it may not be enabled in the BIOS or the operating system itself.</p>
<p>Check the following for the bios configuration, <a href="https://ofs.github.io/ofs-2024.3-1/n6001/adp_board_installation_guidelines/#30-server-settings"><strong>Enabling <abbr title="Intel Virtualization Technology for Directed I/O, Extension of the VT-x and VT-I processor virtualization technologies which adds new support for I/O device virtualization.">Intel VT-d</abbr> Technology</strong></a></p>
<h2 id="3-verify-environment-setup">3. Verify Environment Setup<a class="headerlink" href="#3-verify-environment-setup" title="Permanent link">&para;</a></h2>
<ol>
<li>Open a terminal window and log in as a user with sudo privileges.</li>
<li>Check if the virtualization kernel modules are loaded by running the following command:</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>lsmod | grep kvm
</code></pre></div>
<ol>
<li>
<p>If the command outputs a list of modules, the virtualization kernel modules are loaded, and virtualization is enabled on your system.</p>
</li>
<li>
<p>The virtualization kernel modules are not loaded if the command does not output anything. You can try loading them manually by running the following command:</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>sudo modprobe kvm
</code></pre></div>
<ol>
<li>If the kernel modules are not loaded, and you cannot load them manually, it may be because virtualization is not supported or enabled in your system's BIOS or UEFI settings. You must reboot your system and enter the BIOS or UEFI settings menu to enable virtualization. The exact steps for doing this may vary depending on your system's hardware and BIOS/UEFI version, so consult your motherboard or system documentation for specific instructions.</li>
</ol>
<h2 id="4-install-virtual-machine-manager">4. Install Virtual Machine Manager<a class="headerlink" href="#4-install-virtual-machine-manager" title="Permanent link">&para;</a></h2>
<p>Virtual Machine Manager (also known as libvirt) can be installed by following the below steps:</p>
<ol>
<li>Open a terminal window and log in as a user with sudo privileges.</li>
<li>
<p>Update your system package index by running the following command:</p>
<ul>
<li>Redhat</li>
</ul>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>update
</code></pre></div>
 * Ubuntu
 <div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>update
</code></pre></div></p>
</li>
<li>
<p>Install the libvirt package and any required dependencies by running the following command:</p>
<ul>
<li>Redhat </li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>@virtualization
</code></pre></div>
<ul>
<li>Ubuntu</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>qemu-kvm<span class="w"> </span>libvirt-bin<span class="w"> </span>bridge-utils<span class="w"> </span>virt-manager
</code></pre></div>
</li>
<li>
<p>Start the libvirtd service and enable it to start automatically at boot time by running the following commands:</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>libvirtd
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>libvirtd
</code></pre></div>
<ol>
<li>Optional: Install the virt-manager package, which provides a GUI application for managing virtual machines, by running the following command:</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>virt-manager
</code></pre></div>
<ol>
<li>Optional: If you want to be able to run virtual machines as a non-root user, add your user to the libvirt group by running the following command, replacing "USERNAME" with your username:</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>sudo<span class="w"> </span>usermod<span class="w"> </span>-a<span class="w"> </span>-G<span class="w"> </span>libvirt<span class="w"> </span>USERNAME
</code></pre></div>
<ol>
<li>You can now launch virt-manager by running the command <code>virt-manager</code> as the non-root user.</li>
</ol>
<p>Note: By default, virt-manager will only allow non-root users to create and manage virtual machines with limited resources, such as a limited amount of memory and CPU cores. To allow non-root users to create and manage virtual machines with more resources, you need to edit the <code>/etc/libvirt/qemu.conf</code> configuration file and set the <code>user</code> and <code>group</code> values for the <code>dynamic_ownership</code> option to <code>1</code>. For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a># Set user and group ownership of dynamic /dev/kvm device nodes
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>dynamic_ownership = 1
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>user = &quot;root&quot;
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>group = &quot;root&quot;
</code></pre></div>
<p>You will also need to restart the libvirtd service for the changes to take effect. You can do this by running the command. </p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>libvirtd
</code></pre></div>
<ol>
<li>Reboot your server to apply the changes </li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>reboot
</code></pre></div>
<p>After completing these steps, you should be able to use the virt-manager GUI application to manage virtual machines on your system. </p>
<h2 id="5-create-a-vm-using-virt-manager">5. Create a VM Using Virt-Manager<a class="headerlink" href="#5-create-a-vm-using-virt-manager" title="Permanent link">&para;</a></h2>
<p>Before creating the virtual machine, ensure the <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> drivers are installed in your host machine. For your chosen <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> platform, refer to the <strong>Getting Stared User Guide</strong> and associated <strong>Software Installation Guidelines</strong> for a complete overview of the software installation process. The following are the current available getting started guides for <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> enabled platforms:</p>
<ul>
<li><a href="https://ofs.github.io/latest/hw/n6001/user_guides/ug_qs_ofs_n6001/ug_qs_ofs_n6001/">Getting Started Guide: <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> for Agilex™ 7 PCIe Attach FPGAs (Intel® FPGA SmartNIC N6001-PL/N6000-PL)</a></li>
<li><a href="https://ofs.github.io/latest/hw/ftile_devkit/user_guides/ug_qs_ofs_ftile/ug_qs_ofs_ftile/">Getting Started Guide: <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> for Agilex™ 7 PCIe Attach FPGAs (F-Series Development Kit (2xF-Tile))</a></li>
<li><a href="https://ofs.github.io/latest/hw/iseries_devkit/user_guides/ug_qs_ofs_iseries/ug_qs_ofs_iseries/">Getting Started Guide: <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> for Agilex™ 7 PCIe Attach FPGAs (I-Series Development Kit (2xR-Tile, 1xF-Tile))</a></li>
<li><a href="https://ofs.github.io/latest/hw/f2000x/user_guides/ug_qs_ofs_f2000x/ug_qs_ofs_f2000x/">Getting Started Guide: <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> for Agilex™ 7 SoC Attach FPGAs</a></li>
<li><a href="https://ofs.github.io/latest/hw/d5005/user_guides/ug_qs_ofs_d5005/ug_qs_ofs_d5005/">Getting Started Guide: <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> for Stratix 10® FPGA PCIe Attach FPGAs</a></li>
</ul>
<p>To create a Red Hat 8.10 or Ubuntu 22.04  virtual machine (VM) using <code>virt-manager</code> and share PCI devices with the VM, you will need to perform the following steps:</p>
<ol>
<li>Start the <code>virt-manager</code> GUI by running the following command:</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>sudo<span class="w"> </span>virt-manager<span class="p">&amp;</span>
</code></pre></div>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img2.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img2.png" alt="img2" style="zoom:50%;" /></a></p>
<ol>
<li>
<p>Create a new connection from the menu File-&gt; "Add Connection," Use the default options and click "Connect."</p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img3.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img3" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img3.png" /></a></p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img4.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img4" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img4.png" /></a></p>
</li>
<li>
<p>In the <code>virt-manager</code> window, click the "New virtual machine" button.</p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img3.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img3" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img3.png" /></a></p>
</li>
<li>
<p>In the "New VM" wizard, select "Local install media (ISO image or CDROM)" as the installation source, and then click "Forward."</p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img6.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img6.png" alt="img6" style="zoom:67%;" /></a></p>
<ul>
<li>
<p>Get the Red Hat image from the following link.</p>
<p>https://developers.redhat.com/content-gateway/file/rhel/Red_Hat_Enterprise_Linux_8.10/rhel-8.10-x86_64-dvd.iso</p>
</li>
</ul>
<ul>
<li>
<p>Get the Ubuntu image from the following link.</p>
<p>https://releases.ubuntu.com/22.04/ubuntu-22.04.1-desktop-amd64.iso</p>
</li>
</ul>
</li>
<li>
<p>In the next step, Click Browse -&gt; Browse local, select the Red Hat 8.10 ISO image as the installation source and click "Forward".</p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img7.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img7" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img7.png" /></a></p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img8.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img8" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img8.png" /></a></p>
<p>Note: if the system is not detected, disable "Automatic detected from the installation media/source" and type ubuntu and select 19.10 (this should be fine for the 22.04); this step is necessary to copy the default values for the specific OS</p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img10.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img10" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img10.png" /></a></p>
</li>
<li>
<p>In the next step, specify a name and location for the VM, and select the desired memory and CPU configuration. in our case, 16 cores and 64 GB of RAM; Click "Forward" to continue.</p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img12.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img12" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img12.png" /></a></p>
</li>
<li>
<p>Select "enable storage for this virtual machine," Select "Create a new disk for the virtual machine," and enter a size for the virtual disk (at least 200~300GB in case you need to compile the design) or create a custom storage.</p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img13.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img13" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img13.png" /></a></p>
<ol>
<li>
<p>If you need to create custom storage, select "Select or Create custom storage" and click "Manage."</p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img14.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img14" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img14.png" /></a></p>
</li>
<li>
<p>Click on the "+" icon (Bottom left) to create the storage pool.</p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/image-20221213155215073.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="image-20221213155215073" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/image-20221213155215073.png" /></a></p>
</li>
<li>
<p>In the "Create a new storage pool" dialog, enter a name for the storage pool and select the type of storage pool you want to create; select the Target Path and Click "Finish."</p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img16.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img16" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img16.png" /></a></p>
</li>
<li>
<p>Select the pool and later click on the "+" icon (The Icon is on the right side of the Volume label) to create the New Storage Volume.</p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/image-20221213155420459.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="image-20221213155420459" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/image-20221213155420459.png" /></a></p>
</li>
<li>
<p>In the "Create Storage Volume" dialog, Define the name and format (keep with the default qcow2) and select the Max Capacity (at least 200~300GB  in case you need to compile the design); click "Finish" to create the disk.</p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img21.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img21" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img21.png" /></a></p>
</li>
<li>
<p>Once the disk is created, it will appear in your virtual machine's list of storage devices. You can now use this disk just like any other disk. Select from the list and Click "Choose Volume."</p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img18.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img18" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img18.png" /></a></p>
</li>
</ol>
</li>
<li>
<p>In the next step, select the "Customize configuration before install" option and click "Finish."</p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img24.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img24" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img24.png" /></a></p>
</li>
</ol>
<h3 id="51-passing-devices-to-the-vm">5.1 Passing Devices to the VM<a class="headerlink" href="#51-passing-devices-to-the-vm" title="Permanent link">&para;</a></h3>
<p>In the "Overview" tab, select "Add Hardware," choose "PCI Host Device" from the drop-down menu and choose the PCI device you want to share with the VM. Click "Apply" to apply the changes, and then click "Finish" to create the VM.</p>
<p>Depending on the <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> currently loaded onto your FPGA device, you have access to a few modes of operation. <a href="#511-management-mode">Management Mode</a> and <a href="#512-deployment-mode">Deployment mode</a> can be used on any <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> that supports a PF/VF split architecture. When using the 2 PF <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr>, see <a href="#513-2-pf-mode">2 PF Mode</a>.</p>
<h4 id="511-management-mode">5.1.1 Management Mode<a class="headerlink" href="#511-management-mode" title="Permanent link">&para;</a></h4>
<p>This will only allow you to load the binaries to the FPGA, you only need to add the PF listed at the <code>fpgainfo fme</code> command.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>fpgainfo<span class="w"> </span>fme
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>fpgainfo<span class="w"> </span>fme
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>Intel<span class="w"> </span>Acceleration<span class="w"> </span>Development<span class="w"> </span>Platform<span class="w"> </span>N6001
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>Board<span class="w"> </span>Management<span class="w"> </span>Controller<span class="w"> </span>NIOS<span class="w"> </span>FW<span class="w"> </span>version:<span class="w"> </span>xxxx<span class="w"> </span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>Board<span class="w"> </span>Management<span class="w"> </span>Controller<span class="w"> </span>Build<span class="w"> </span>version:<span class="w"> </span>xxxx<span class="w"> </span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>//******<span class="w"> </span>FME<span class="w"> </span>******//
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xEE00000
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:b1:00.0
</code></pre></div>
<p>​               </p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img25.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img25.png" alt="img25" style="zoom:67%;" /></a></p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/image-20221213155919267.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/image-20221213155919267.png" alt="image-20221213155919267" style="zoom:80%;" /></a></p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/image-20221213160028673.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="image-20221213160028673" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/image-20221213160028673.png" /></a></p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/image-20221213160128900.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/image-20221213160128900.png" alt="image-20221213160128900" style="zoom:80%;" /></a></p>
<h4 id="512-deployment-mode">5.1.2 Deployment Mode<a class="headerlink" href="#512-deployment-mode" title="Permanent link">&para;</a></h4>
<p>The main idea of this mode is enable the Virtual function used by the Agilex PCIe Attach <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> under the Physical Function 0, This option will allow us to use the Host Exercises.</p>
<p><em>Note: assigning multiple devices to the same VM on a guest IOMMU, you may need to increase the hard_limit option in order to avoid hitting a limit of pinned memory. The hard limit should be more than (VM memory size x Number of PCIe devices)</em></p>
<ol>
<li>
<p>Create 3 VFs in the <abbr title="Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA PAC, a PR bitstream refers to an Intel FPGA PAC AFU. Refer to Partial Reconfiguration support page.">PR</abbr> region.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>sudo<span class="w"> </span>pci_device<span class="w"> </span>b1:00.0<span class="w"> </span>vf<span class="w"> </span><span class="m">3</span><span class="w"> </span>
</code></pre></div>
</li>
<li>
<p>Verify all 3 VFs were created.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>lspci<span class="w"> </span>-s<span class="w"> </span>b1:00<span class="w"> </span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>b1:00.0<span class="w"> </span>Processing<span class="w"> </span>accelerators:<span class="w"> </span>Intel<span class="w"> </span>Corporation<span class="w"> </span>Device<span class="w"> </span>bcce<span class="w"> </span><span class="o">(</span>rev<span class="w"> </span><span class="m">01</span><span class="o">)</span><span class="w"> </span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>b1:00.1<span class="w"> </span>Processing<span class="w"> </span>accelerators:<span class="w"> </span>Intel<span class="w"> </span>Corporation<span class="w"> </span>Device<span class="w"> </span>bcce<span class="w"> </span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>b1:00.2<span class="w"> </span>Processing<span class="w"> </span>accelerators:<span class="w"> </span>Intel<span class="w"> </span>Corporation<span class="w"> </span>Device<span class="w"> </span>bcce<span class="w"> </span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>b1:00.3<span class="w"> </span>Processing<span class="w"> </span>accelerators:<span class="w"> </span>Red<span class="w"> </span>Hat,<span class="w"> </span>Inc.<span class="w"> </span>Virtio<span class="w"> </span>network<span class="w"> </span>device<span class="w"> </span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>b1:00.4<span class="w"> </span>Processing<span class="w"> </span>accelerators:<span class="w"> </span>Intel<span class="w"> </span>Corporation<span class="w"> </span>Device<span class="w"> </span>bcce<span class="w"> </span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>b1:00.5<span class="w"> </span>Processing<span class="w"> </span>accelerators:<span class="w"> </span>Intel<span class="w"> </span>Corporation<span class="w"> </span>Device<span class="w"> </span>bccf<span class="w"> </span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>b1:00.6<span class="w"> </span>Processing<span class="w"> </span>accelerators:<span class="w"> </span>Intel<span class="w"> </span>Corporation<span class="w"> </span>Device<span class="w"> </span>bccf<span class="w"> </span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>b1:00.7<span class="w"> </span>Processing<span class="w"> </span>accelerators:<span class="w"> </span>Intel<span class="w"> </span>Corporation<span class="w"> </span>Device<span class="w"> </span>bccf<span class="w"> </span>
</code></pre></div>
</li>
<li>
<p>Bind all of the PF/VF endpoints to the <code>vfio-pci</code> driver.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>sudo<span class="w"> </span>opae.io<span class="w"> </span>init<span class="w"> </span>-d<span class="w"> </span><span class="m">0000</span>:b1:00.1<span class="w"> </span>user:user
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>Unbinding<span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.1<span class="w"> </span>from<span class="w"> </span>dfl-pci
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>Binding<span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.1<span class="w"> </span>to<span class="w"> </span>vfio-pci
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>iommu<span class="w"> </span>group<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.1<span class="w"> </span>is<span class="w"> </span><span class="m">187</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>Assigning<span class="w"> </span>/dev/vfio/187<span class="w"> </span>to<span class="w"> </span>DCPsupport
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>Changing<span class="w"> </span>permissions<span class="w"> </span><span class="k">for</span><span class="w"> </span>/dev/vfio/187<span class="w"> </span>to<span class="w"> </span>rw-rw----
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>sudo<span class="w"> </span>opae.io<span class="w"> </span>init<span class="w"> </span>-d<span class="w"> </span><span class="m">0000</span>:b1:00.2<span class="w"> </span>user:user
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>Unbinding<span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.2<span class="w"> </span>from<span class="w"> </span>dfl-pci
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>Binding<span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.2<span class="w"> </span>to<span class="w"> </span>vfio-pci
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>iommu<span class="w"> </span>group<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.2<span class="w"> </span>is<span class="w"> </span><span class="m">188</span>
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>Assigning<span class="w"> </span>/dev/vfio/188<span class="w"> </span>to<span class="w"> </span>DCPsupport
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>Changing<span class="w"> </span>permissions<span class="w"> </span><span class="k">for</span><span class="w"> </span>/dev/vfio/188<span class="w"> </span>to<span class="w"> </span>rw-rw----
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>...
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>sudo<span class="w"> </span>opae.io<span class="w"> </span>init<span class="w"> </span>-d<span class="w"> </span><span class="m">0000</span>:b1:00.7<span class="w"> </span>user:user
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a>Binding<span class="w"> </span><span class="o">(</span>0x8086,0xbccf<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.7<span class="w"> </span>to<span class="w"> </span>vfio-pci
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>iommu<span class="w"> </span>group<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">(</span>0x8086,0xbccf<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.7<span class="w"> </span>is<span class="w"> </span><span class="m">319</span>
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a>Assigning<span class="w"> </span>/dev/vfio/319<span class="w"> </span>to<span class="w"> </span>DCPsupport
<a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a>Changing<span class="w"> </span>permissions<span class="w"> </span><span class="k">for</span><span class="w"> </span>/dev/vfio/319<span class="w"> </span>to<span class="w"> </span>rw-rw----
</code></pre></div>
</li>
<li>
<p>Check that the accelerators are present using <code>fpgainfo</code>. <em>Note your port configuration may differ from the below.</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>sudo<span class="w"> </span>fpgainfo<span class="w"> </span>port<span class="w"> </span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>//******<span class="w"> </span>PORT<span class="w"> </span>******//
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xEC00000
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:B1:00.0
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>Vendor<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x8086
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>Device<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xBCCE
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>SubVendor<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x8086
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>SubDevice<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x1771
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>Socket<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x00
<a id="__codelineno-19-10" name="__codelineno-19-10" href="#__codelineno-19-10"></a>//******<span class="w"> </span>PORT<span class="w"> </span>******//
<a id="__codelineno-19-11" name="__codelineno-19-11" href="#__codelineno-19-11"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xE0B1000000000000
<a id="__codelineno-19-12" name="__codelineno-19-12" href="#__codelineno-19-12"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:B1:00.7
<a id="__codelineno-19-13" name="__codelineno-19-13" href="#__codelineno-19-13"></a>Vendor<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x8086
<a id="__codelineno-19-14" name="__codelineno-19-14" href="#__codelineno-19-14"></a>Device<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xBCCF
<a id="__codelineno-19-15" name="__codelineno-19-15" href="#__codelineno-19-15"></a>SubVendor<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x8086
<a id="__codelineno-19-16" name="__codelineno-19-16" href="#__codelineno-19-16"></a>SubDevice<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x1771
<a id="__codelineno-19-17" name="__codelineno-19-17" href="#__codelineno-19-17"></a>Socket<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x01
<a id="__codelineno-19-18" name="__codelineno-19-18" href="#__codelineno-19-18"></a>Accelerator<span class="w"> </span>GUID<span class="w">                 </span>:<span class="w"> </span>4dadea34-2c78-48cb-a3dc-5b831f5cecbb
<a id="__codelineno-19-19" name="__codelineno-19-19" href="#__codelineno-19-19"></a>//******<span class="w"> </span>PORT<span class="w"> </span>******//
<a id="__codelineno-19-20" name="__codelineno-19-20" href="#__codelineno-19-20"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xC0B1000000000000
<a id="__codelineno-19-21" name="__codelineno-19-21" href="#__codelineno-19-21"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:B1:00.6
<a id="__codelineno-19-22" name="__codelineno-19-22" href="#__codelineno-19-22"></a>Vendor<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x8086
<a id="__codelineno-19-23" name="__codelineno-19-23" href="#__codelineno-19-23"></a>Device<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xBCCF
<a id="__codelineno-19-24" name="__codelineno-19-24" href="#__codelineno-19-24"></a>SubVendor<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x8086
<a id="__codelineno-19-25" name="__codelineno-19-25" href="#__codelineno-19-25"></a>SubDevice<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x1771
<a id="__codelineno-19-26" name="__codelineno-19-26" href="#__codelineno-19-26"></a>Socket<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x01
<a id="__codelineno-19-27" name="__codelineno-19-27" href="#__codelineno-19-27"></a>Accelerator<span class="w"> </span>GUID<span class="w">                 </span>:<span class="w"> </span>823c334c-98bf-11ea-bb37-0242ac130002
<a id="__codelineno-19-28" name="__codelineno-19-28" href="#__codelineno-19-28"></a>//******<span class="w"> </span>PORT<span class="w"> </span>******//
<a id="__codelineno-19-29" name="__codelineno-19-29" href="#__codelineno-19-29"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xA0B1000000000000
<a id="__codelineno-19-30" name="__codelineno-19-30" href="#__codelineno-19-30"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:B1:00.5
<a id="__codelineno-19-31" name="__codelineno-19-31" href="#__codelineno-19-31"></a>Vendor<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x8086
<a id="__codelineno-19-32" name="__codelineno-19-32" href="#__codelineno-19-32"></a>Device<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xBCCF
<a id="__codelineno-19-33" name="__codelineno-19-33" href="#__codelineno-19-33"></a>SubVendor<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x8086
<a id="__codelineno-19-34" name="__codelineno-19-34" href="#__codelineno-19-34"></a>SubDevice<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x1771
<a id="__codelineno-19-35" name="__codelineno-19-35" href="#__codelineno-19-35"></a>Socket<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x01
<a id="__codelineno-19-36" name="__codelineno-19-36" href="#__codelineno-19-36"></a>Accelerator<span class="w"> </span>GUID<span class="w">                 </span>:<span class="w"> </span>8568ab4e-6ba5-4616-bb65-2a578330a8eb
<a id="__codelineno-19-37" name="__codelineno-19-37" href="#__codelineno-19-37"></a>//******<span class="w"> </span>PORT<span class="w"> </span>******//
<a id="__codelineno-19-38" name="__codelineno-19-38" href="#__codelineno-19-38"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x80B1000000000000
<a id="__codelineno-19-39" name="__codelineno-19-39" href="#__codelineno-19-39"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:B1:00.4
<a id="__codelineno-19-40" name="__codelineno-19-40" href="#__codelineno-19-40"></a>Vendor<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x8086
<a id="__codelineno-19-41" name="__codelineno-19-41" href="#__codelineno-19-41"></a>Device<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xBCCE
<a id="__codelineno-19-42" name="__codelineno-19-42" href="#__codelineno-19-42"></a>SubVendor<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x8086
<a id="__codelineno-19-43" name="__codelineno-19-43" href="#__codelineno-19-43"></a>SubDevice<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x1771
<a id="__codelineno-19-44" name="__codelineno-19-44" href="#__codelineno-19-44"></a>Socket<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x01
<a id="__codelineno-19-45" name="__codelineno-19-45" href="#__codelineno-19-45"></a>Accelerator<span class="w"> </span>GUID<span class="w">                 </span>:<span class="w"> </span>44bfc10d-b42a-44e5-bd42-57dc93ea7f91
<a id="__codelineno-19-46" name="__codelineno-19-46" href="#__codelineno-19-46"></a>//******<span class="w"> </span>PORT<span class="w"> </span>******//
<a id="__codelineno-19-47" name="__codelineno-19-47" href="#__codelineno-19-47"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x40B1000000000000
<a id="__codelineno-19-48" name="__codelineno-19-48" href="#__codelineno-19-48"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:B1:00.2
<a id="__codelineno-19-49" name="__codelineno-19-49" href="#__codelineno-19-49"></a>Vendor<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x8086
<a id="__codelineno-19-50" name="__codelineno-19-50" href="#__codelineno-19-50"></a>Device<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xBCCE
<a id="__codelineno-19-51" name="__codelineno-19-51" href="#__codelineno-19-51"></a>SubVendor<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x8086
<a id="__codelineno-19-52" name="__codelineno-19-52" href="#__codelineno-19-52"></a>SubDevice<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x1771
<a id="__codelineno-19-53" name="__codelineno-19-53" href="#__codelineno-19-53"></a>Socket<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x01
<a id="__codelineno-19-54" name="__codelineno-19-54" href="#__codelineno-19-54"></a>Accelerator<span class="w"> </span>GUID<span class="w">                 </span>:<span class="w"> </span>56e203e9-864f-49a7-b94b-12284c31e02b
<a id="__codelineno-19-55" name="__codelineno-19-55" href="#__codelineno-19-55"></a>//******<span class="w"> </span>PORT<span class="w"> </span>******//
<a id="__codelineno-19-56" name="__codelineno-19-56" href="#__codelineno-19-56"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x20B1000000000000
<a id="__codelineno-19-57" name="__codelineno-19-57" href="#__codelineno-19-57"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:B1:00.1
<a id="__codelineno-19-58" name="__codelineno-19-58" href="#__codelineno-19-58"></a>Vendor<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x8086
<a id="__codelineno-19-59" name="__codelineno-19-59" href="#__codelineno-19-59"></a>Device<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xBCCE
<a id="__codelineno-19-60" name="__codelineno-19-60" href="#__codelineno-19-60"></a>SubVendor<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x8086
<a id="__codelineno-19-61" name="__codelineno-19-61" href="#__codelineno-19-61"></a>SubDevice<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x1771
<a id="__codelineno-19-62" name="__codelineno-19-62" href="#__codelineno-19-62"></a>Socket<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x01
<a id="__codelineno-19-63" name="__codelineno-19-63" href="#__codelineno-19-63"></a>Accelerator<span class="w"> </span>GUID<span class="w">                 </span>:<span class="w"> </span>3e7b60a0-df2d-4850-aa31-f54a3e403501
</code></pre></div>
</li>
</ol>
<p>The following table contains a mapping between each VF, Accelerator GUID, and component.</p>
<h5 id="table-16-accelerator-pfvf-and-guid-mappings">Table 16: Accelerator PF/VF and GUID Mappings<a class="headerlink" href="#table-16-accelerator-pfvf-and-guid-mappings" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th align="left">Component</th>
<th align="left">VF</th>
<th align="left">Accelerator GUID</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Intel N6001-PL FPGA SmartNIC Platform base PF</td>
<td align="left">XXXX:XX:XX.0</td>
<td align="left">N/A</td>
</tr>
<tr>
<td align="left">VirtIO Stub</td>
<td align="left">XXXX:XX:XX.1</td>
<td align="left">3e7b60a0-df2d-4850-aa31-f54a3e403501</td>
</tr>
<tr>
<td align="left">HE-MEM Stub</td>
<td align="left">XXXX:XX:XX.2</td>
<td align="left">56e203e9-864f-49a7-b94b-12284c31e02b</td>
</tr>
<tr>
<td align="left">Copy Engine</td>
<td align="left">XXXX:XX:XX.4</td>
<td align="left">44bfc10d-b42a-44e5-bd42-57dc93ea7f91</td>
</tr>
<tr>
<td align="left">HE-MEM</td>
<td align="left">XXXX:XX:XX.5</td>
<td align="left">8568ab4e-6ba5-4616-bb65-2a578330a8eb</td>
</tr>
<tr>
<td align="left">HE-HSSI</td>
<td align="left">XXXX:XX:XX.6</td>
<td align="left">823c334c-98bf-11ea-bb37-0242ac130002</td>
</tr>
<tr>
<td align="left">MEM-TG</td>
<td align="left">XXXX:XX:XX.7</td>
<td align="left">4dadea34-2c78-48cb-a3dc-5b831f5cecbb</td>
</tr>
</tbody>
</table>
<ol>
<li>
<p>Ensure you add the desired VF in your PCIE devices list.</p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img25.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img25.png" /></a></p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/image-20221213155919267.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/image-20221213155919267.png" /></a></p>
</li>
</ol>
<h4 id="513-2-pf-mode">5.1.3 2 PF Mode<a class="headerlink" href="#513-2-pf-mode" title="Permanent link">&para;</a></h4>
<p>For FIMs that support the dual PF architecture, you have the option to pass through any number of PFs into the VM. The VM's software will recognize any management / workload ports and probe them appropriately. This assumes you have the <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> and Linux <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> drivers installed on both the VM and host.</p>
<ol>
<li>
<p>Bind all endpoints you wish to pass through to the VM to the <code>vfio-pci</code> driver on the host.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>sudo<span class="w"> </span>opae.io<span class="w"> </span>init<span class="w"> </span>-d<span class="w"> </span><span class="m">0000</span>:b1:00.0<span class="w"> </span>user:user
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>Unbinding<span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.1<span class="w"> </span>from<span class="w"> </span>dfl-pci
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>Binding<span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.1<span class="w"> </span>to<span class="w"> </span>vfio-pci
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>iommu<span class="w"> </span>group<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.1<span class="w"> </span>is<span class="w"> </span><span class="m">187</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>Assigning<span class="w"> </span>/dev/vfio/187<span class="w"> </span>to<span class="w"> </span>user
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>Changing<span class="w"> </span>permissions<span class="w"> </span><span class="k">for</span><span class="w"> </span>/dev/vfio/187<span class="w"> </span>to<span class="w"> </span>rw-rw----
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>sudo<span class="w"> </span>opae.io<span class="w"> </span>init<span class="w"> </span>-d<span class="w"> </span><span class="m">0000</span>:b1:00.1<span class="w"> </span>user:user
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>Unbinding<span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.1<span class="w"> </span>from<span class="w"> </span>dfl-pci
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>Binding<span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.1<span class="w"> </span>to<span class="w"> </span>vfio-pci
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>iommu<span class="w"> </span>group<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.1<span class="w"> </span>is<span class="w"> </span><span class="m">187</span>
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>Assigning<span class="w"> </span>/dev/vfio/187<span class="w"> </span>to<span class="w"> </span>user
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>Changing<span class="w"> </span>permissions<span class="w"> </span><span class="k">for</span><span class="w"> </span>/dev/vfio/187<span class="w"> </span>to<span class="w"> </span>rw-rw----
</code></pre></div>
</li>
<li>
<p>Pass through any required hardware endpoints, select "Add Hardware" -&gt; "PCI Host Device".</p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img25.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img25.png" alt="img25.png" style="zoom:67%;" /></a></p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/image-20221213155919267.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/image-20221213155919267.png" alt="image-20221213155919267" style="zoom:80%;" /></a></p>
</li>
<li>
<p>Run the following command on the host and VM to allocate hugepages for workload testing:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nb">echo</span><span class="w"> </span><span class="m">4194304</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sudo<span class="w"> </span>tee<span class="w"> </span>/sys/module/vfio_iommu_type1/parameters/dma_entry_limit
</code></pre></div>
</li>
</ol>
<h3 id="52-virt-manager-configuration-changes">5.2 Virt-Manager Configuration Changes<a class="headerlink" href="#52-virt-manager-configuration-changes" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p>Edit the XML file for your machine and include the following</p>
<ol>
<li>
<p>&lt; ioapic driver='qemu'/&gt; inside of features:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nt">&lt;features&gt;</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">  </span><span class="nt">&lt;acpi/&gt;</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">  </span><span class="nt">&lt;apic/&gt;</span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="w">  </span><span class="nt">&lt;ioapic</span><span class="w"> </span><span class="na">driver=</span><span class="s">&#39;qemu&#39;</span><span class="nt">/&gt;</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="nt">&lt;/features&gt;</span>
</code></pre></div>
</li>
<li>
<p>Inside of devices</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="nt">&lt;devices&gt;</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="w">    </span>........
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="w">    </span>......
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="w">    </span><span class="nt">&lt;iommu</span><span class="w"> </span><span class="na">model=</span><span class="s">&#39;intel&#39;</span><span class="nt">&gt;</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="w">      </span><span class="nt">&lt;driver</span><span class="w"> </span><span class="na">intremap=</span><span class="s">&#39;on&#39;</span><span class="w"> </span><span class="na">caching_mode=</span><span class="s">&#39;on&#39;</span><span class="nt">/&gt;</span>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="w">    </span><span class="nt">&lt;/iommu&gt;</span>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="nt">&lt;/devices&gt;</span>
</code></pre></div>
</li>
<li>
<p>Ensure the hard limit is setup correctly otherwise you can only pass one device:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="nt">&lt;memtune&gt;</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="w">  </span><span class="nt">&lt;hard_limit</span><span class="w"> </span><span class="na">unit=</span><span class="s">&#39;G&#39;</span><span class="nt">&gt;</span>64<span class="nt">&lt;/hard_limit&gt;</span>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="nt">&lt;/memtune&gt;</span>
</code></pre></div>
<p>Note: assigning multiple devices to the same VM on a guest IOMMU, you may need to increase the hard_limit option in order to avoid hitting a limit of pinned memory. The hard limit should be more than (VM memory size x Number of PCIe devices)</p>
</li>
<li>
<p>Save the changes "Apply"</p>
</li>
</ol>
</li>
<li>
<p>On the host machine append <code>intel_iommu=on</code> to the end of the <code>GRUB_CMDLINE_LINUX</code> line in the grub configuration file.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>nano<span class="w"> </span>/etc/default/grub
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>......
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="nv">GRUB_CMDLINE_LINUX</span><span class="o">=</span><span class="s2">&quot;....... ... intel_iommu=on&quot;</span>
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>...
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a><span class="c1">#Refresh the grub.cfg file for these changes to take effect</span>
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>grub2-mkconfig<span class="w"> </span>-o<span class="w"> </span>/boot/grub2/grub.cfg
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>shutdown<span class="w"> </span>-r<span class="w"> </span>now
</code></pre></div>
</li>
<li>
<p>Ensure your devices are enumerated properly.</p>
<ol>
<li>
<p>Example in you host system should look like this:</p>
<p>1. Management Mode:</p>
<div class="highlight"><pre><span></span><code>B1:00.0
</code></pre></div>
<p>2. Deployment Mode:</p>
<div class="highlight"><pre><span></span><code> B1:00.5
</code></pre></div>
</li>
<li>
<p>Under the virtual machine (The PCIe Address is an example you could get a different
   number):</p>
<p>1. Management Mode:</p>
<div class="highlight"><pre><span></span><code>177:00.0
</code></pre></div>
<p>2. Deployment Mode:</p>
<div class="highlight"><pre><span></span><code> 177:00.0
</code></pre></div>
</li>
</ol>
</li>
<li>
<p>Click on "Begin Installation." and follow the wizard installation of the OS.</p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/image-20221213160221768.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="image-20221213160221768" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/image-20221213160221768.png" /></a></p>
</li>
<li>
<p>Once the VM is created, you can start it by selecting it in the <code>virt-manager</code> window and clicking the "Run" button. This will boot the VM and start the Red Hat 8.10/Ubuntu installation process. Follow the on-screen instructions to complete the installation.</p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img26.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img26" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img26.png" /></a></p>
<p><a class="glightbox" href="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img27.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="img27" src="/ofs-2024.3-1/hw/common/user_guides/ug_kvm/images/img27.png" /></a></p>
</li>
<li>
<p>Under your virtual machine, configure your VM proxy:</p>
<ul>
<li>Redhat <a href="https://access.redhat.com/solutions/1351253">How to apply a system-wide proxy?</a></li>
<li>Ubuntu <a href="https://help.ubuntu.com/stable/ubuntu-help/net-proxy.html.en">Define proxy settings</a></li>
<li><a href="https://gist.github.com/evantoli/f8c23a37eb3558ab8765">Configure Git to use a proxy</a></li>
</ul>
</li>
<li>
<p>To include OPAE in your virtual machine, follow the instructions from the following link  <a href="https://ofs.github.io/ofs-2024.3-1">Open FPGA Stack (<abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr>) Collateral Site</a> select your desired platform from the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> Software tab and select Software Installation Guide. To install the <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> drivers, please follow the instructions from the following link  <a href="https://ofs.github.io/ofs-2024.3-1">Open FPGA Stack (<abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr>) Collateral Site</a> select your desired platform from the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> Software tab and select Software Installation Guide.</p>
</li>
<li>
<p>Use the <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> tool opae.io (under your virtual machine) to check default driver binding using your card under test PCIe B:D.F (Management mode).</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a>sudo<span class="w"> </span>fpgainfo<span class="w"> </span>fme
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>Intel<span class="w"> </span>Acceleration<span class="w"> </span>Development<span class="w"> </span>Platform<span class="w"> </span>N6001
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>Board<span class="w"> </span>Management<span class="w"> </span>Controller<span class="w"> </span>NIOS<span class="w"> </span>FW<span class="w"> </span>version:<span class="w"> </span>xxx<span class="w"> </span>
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>Board<span class="w"> </span>Management<span class="w"> </span>Controller<span class="w"> </span>Build<span class="w"> </span>version:<span class="w"> </span>xxx
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>//******<span class="w"> </span>FME<span class="w"> </span>******//
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xEC00000
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:177:00.0
</code></pre></div>
</li>
<li>
<p>Use the Virtual function (Not supported at management mode)</p>
<ol>
<li>
<p>Ensure the <a href="https://ofs.github.io/ofs-2024.3-1/hw/common/sw_installation/pcie_attach/sw_install_pcie_attach/#30-ofs-dfl-kernel-drivers"><abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> kernel drivers is install in your VM system</a></p>
</li>
<li>
<p>Bind VFs to <abbr title="Virtual Function Input/Output, An IOMMU/device agnostic framework for exposing direct device access to userspace.">VFIO</abbr> driver</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>$<span class="w"> </span>sudo<span class="w"> </span>opae.io<span class="w"> </span>init<span class="w"> </span>-d<span class="w"> </span><span class="m">177</span>:00.0
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="o">[</span>sudo<span class="o">]</span><span class="w"> </span>password<span class="w"> </span><span class="k">for</span><span class="w"> </span>rhel8_10:
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a>Binding<span class="w"> </span><span class="o">(</span>0x8086,0xbccf<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:177:00.0<span class="w"> </span>to<span class="w"> </span>vfio-pci
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>iommu<span class="w"> </span>group<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">(</span>0x8086,0xbccf<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:177:00.0<span class="w"> </span>is<span class="w"> </span><span class="m">24</span>
</code></pre></div>
</li>
<li>
<p>Verify the binding is correct.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a>$<span class="w"> </span>opae.io<span class="w"> </span>ls
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="o">[</span><span class="m">0000</span>:177:00.0<span class="o">]</span><span class="w"> </span><span class="o">(</span>0x8086:0xbccf<span class="w"> </span>0x8086:0x1771<span class="o">)</span><span class="w"> </span>Intel<span class="w"> </span>Acceleration<span class="w"> </span>Development<span class="w"> </span>Platform<span class="w"> </span>N6001<span class="w"> </span><span class="o">(</span>Driver:<span class="w"> </span>vfio-pci<span class="o">)</span>
</code></pre></div>
</li>
<li>
<p>Test the  HE mem</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="w"> </span>host_exerciser<span class="w"> </span>mem
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="w">         </span>starting<span class="w"> </span><span class="nb">test</span><span class="w"> </span>run,<span class="w"> </span>count<span class="w"> </span>of<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>API<span class="w"> </span>version:<span class="w"> </span><span class="m">2</span>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>Bus<span class="w"> </span>width:<span class="w"> </span><span class="m">64</span><span class="w"> </span>bytes
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a>Local<span class="w"> </span>memory<span class="w"> </span>bus<span class="w"> </span>width:<span class="w"> </span><span class="m">64</span><span class="w"> </span>bytes
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a>AFU<span class="w"> </span>clock:<span class="w"> </span><span class="m">470</span><span class="w"> </span>MHz
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a>Allocate<span class="w"> </span>SRC<span class="w"> </span>Buffer
<a id="__codelineno-29-8" name="__codelineno-29-8" href="#__codelineno-29-8"></a>Allocate<span class="w"> </span>DST<span class="w"> </span>Buffer
<a id="__codelineno-29-9" name="__codelineno-29-9" href="#__codelineno-29-9"></a>Allocate<span class="w"> </span>DSM<span class="w"> </span>Buffer
<a id="__codelineno-29-10" name="__codelineno-29-10" href="#__codelineno-29-10"></a><span class="w">   </span>Host<span class="w"> </span>Exerciser<span class="w"> </span>Performance<span class="w"> </span>Counter:
<a id="__codelineno-29-11" name="__codelineno-29-11" href="#__codelineno-29-11"></a><span class="w">   </span>Host<span class="w"> </span>Exerciser<span class="w"> </span>numReads:<span class="w"> </span><span class="m">1024</span>
<a id="__codelineno-29-12" name="__codelineno-29-12" href="#__codelineno-29-12"></a><span class="w">   </span>Host<span class="w"> </span>Exerciser<span class="w"> </span>numWrites:<span class="w"> </span><span class="m">1025</span>
<a id="__codelineno-29-13" name="__codelineno-29-13" href="#__codelineno-29-13"></a><span class="w">   </span>Host<span class="w"> </span>Exerciser<span class="w"> </span>numPendReads:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-29-14" name="__codelineno-29-14" href="#__codelineno-29-14"></a><span class="w">   </span>Host<span class="w"> </span>Exerciser<span class="w"> </span>numPendWrites:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-29-15" name="__codelineno-29-15" href="#__codelineno-29-15"></a><span class="w">   </span>Host<span class="w"> </span>Exerciser<span class="w"> </span>numPendEmifReads:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-29-16" name="__codelineno-29-16" href="#__codelineno-29-16"></a><span class="w">   </span>Host<span class="w"> </span>Exerciser<span class="w"> </span>numPendEmifWrites:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-29-17" name="__codelineno-29-17" href="#__codelineno-29-17"></a><span class="w">   </span>Number<span class="w"> </span>of<span class="w"> </span>clocks:<span class="w"> </span><span class="m">8276</span>
<a id="__codelineno-29-18" name="__codelineno-29-18" href="#__codelineno-29-18"></a><span class="w">   </span>Total<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>Reads<span class="w"> </span>sent:<span class="w"> </span><span class="m">1024</span>
<a id="__codelineno-29-19" name="__codelineno-29-19" href="#__codelineno-29-19"></a><span class="w">   </span>Total<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>Writes<span class="w"> </span>sent:<span class="w"> </span><span class="m">1024</span>
<a id="__codelineno-29-20" name="__codelineno-29-20" href="#__codelineno-29-20"></a><span class="w">   </span>Bandwidth:<span class="w"> </span><span class="m">3</span>.722<span class="w"> </span>GB/s
<a id="__codelineno-29-21" name="__codelineno-29-21" href="#__codelineno-29-21"></a><span class="w">   </span>Test<span class="w"> </span>mem<span class="o">(</span><span class="m">1</span><span class="o">)</span>:<span class="w"> </span>PASS
</code></pre></div>
</li>
</ol>
</li>
</ol>
<p>After the installation, you can use <code>virt-manager</code> to manage and configure the VM to move from Management mode to Deployment or vice versa, including setting up networking, attaching additional storage, and installing additional software. The shared PCI device will be available to the VM, allowing it to use it as if it were connected directly to the physical system.</p>
<h2 id="notices-disclaimers">Notices &amp; Disclaimers<a class="headerlink" href="#notices-disclaimers" title="Permanent link">&para;</a></h2>
<p>Altera® Corporation technologies may require enabled hardware, software or service activation. No product or component can be absolutely secure. Performance varies by use, configuration and other factors. Your costs and results may vary. You may not use or facilitate the use of this document in connection with any infringement or other legal analysis concerning Altera or Intel products described herein. You agree to grant Altera Corporation a non-exclusive, royalty-free license to any patent claim thereafter drafted which includes subject matter disclosed herein. No license (express or implied, by estoppel or otherwise) to any intellectual property rights is granted by this document, with the sole exception that you may publish an unmodified copy. You may create software implementations based on this document and in compliance with the foregoing that are intended to execute on the Altera or Intel product(s) referenced in this document. No rights are granted to create modifications or derivatives of this document. The products described may contain design defects or errors known as errata which may cause the product to deviate from published specifications. Current characterized errata are available on request. Altera disclaims all express and implied warranties, including without limitation, the implied warranties of merchantability, fitness for a particular purpose, and non-infringement, as well as any warranty arising from course of performance, course of dealing, or usage in trade. You are responsible for safety of the overall system, including compliance with applicable safety-related requirements or standards. © Altera Corporation. Altera, the Altera logo, and other Altera marks are trademarks of Altera Corporation. Other names and brands may be claimed as the property of others.</p>
<p>OpenCL* and the OpenCL* logo are trademarks of Apple Inc. used by permission of the Khronos Group™.</p>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.indexes", "search.suggest", "search.highlight", "content.code.copy", "navigation.indexes", "toc.follow"], "search": "../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "ofs-2023.1", "provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fac441b0.min.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>