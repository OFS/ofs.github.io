
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../ug_eval_ofs_d5005/ug_eval_script_ofs_d5005/">
      
      
        <link rel="next" href="../../../../common/reference_manual/ofs_sw/mnl_sw_ofs/">
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.13">
    
    
      
        <title>Getting Started - OFS</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.ffa9267a.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started-guide-open-fpga-stack-for-intel-stratix-10" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="OFS" class="md-header__button md-logo" aria-label="OFS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OFS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting Started
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ofs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ofs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../../.." class="md-tabs__link">
      Welcome
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../ug_eval_ofs_d5005/ug_eval_script_ofs_d5005/" class="md-tabs__link md-tabs__link--active">
        Stratix 10 OFS Hardware Docs
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../sw/fpga_api/quick_start/readme.md" class="md-tabs__link">
        OFS Software
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="OFS" class="md-nav__button md-logo" aria-label="OFS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    OFS
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ofs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ofs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        Welcome
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Stratix 10 OFS Hardware Docs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Stratix 10 OFS Hardware Docs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ug_eval_ofs_d5005/ug_eval_script_ofs_d5005/" class="md-nav__link">
        Quick Start Evaluation Guide
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Getting Started
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#10-introduction" class="md-nav__link">
    1.0 Introduction
  </a>
  
    <nav class="md-nav" aria-label="1.0 Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-about-this-document" class="md-nav__link">
    1.1 About This Document
  </a>
  
    <nav class="md-nav" aria-label="1.1 About This Document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-1-installing-the-opae-sdk" class="md-nav__link">
    Diagram 1: Installing the OPAE SDK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagram-2-installing-the-linux-dfl-drivers" class="md-nav__link">
    Diagram 2: Installing the Linux DFL Drivers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagram-3-bringing-up-the-intel-d5005" class="md-nav__link">
    Diagram 3: Bringing up the Intel D5005
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-terminology" class="md-nav__link">
    1.2 Terminology
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../common/reference_manual/ofs_sw/mnl_sw_ofs/" class="md-nav__link">
        Software Reference Manual
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference_manuals/ofs_fim/mnl_fim_ofs_d5005/" class="md-nav__link">
        FPGA Interface Manager Technical Reference Manual
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/fim_dev/ug_dev_fim_ofs_d5005/" class="md-nav__link">
        FPGA Interface Manager Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/afu_dev/ug_dev_afu_d5005/" class="md-nav__link">
        AFU Developer Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          OFS Software
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          OFS Software
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
      
      
      
        <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
          OPAE USER GUIDES
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_1">
          <span class="md-nav__icon md-icon"></span>
          OPAE USER GUIDES
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_api/quick_start/readme.md" class="md-nav__link">
        Quick Start Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/install_guide/installation_guide.md" class="md-nav__link">
        OPAE Installation Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_api/prog_guide/readme.md" class="md-nav__link">
        OPAE C API Programming Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://opae.github.io/latest/docs/pyopae/README.html" class="md-nav__link">
        OPAE Python Bindings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_api/plug_guide/readme.md" class="md-nav__link">
        OPAE Plugin Developers Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
      
      
      
        <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
          OPAE LIBRARIES
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          OPAE LIBRARIES
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://opae.github.io/latest/docs/fpga_api/fpga_api.html" class="md-nav__link">
        OPAE C API Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://opae.github.io/latest/docs/fpga_api/fpga_cxx_api.html" class="md-nav__link">
        OPAE C++ Core API Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="https://opae.github.io/latest/docs/fpga_api/fpga_python_api.html" class="md-nav__link">
        OPAE Python API Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_api/plug_guide/readme.md" class="md-nav__link">
        OPAE Plugin Developers Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
          OPAE LINUX KERNEL DRIVERS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          OPAE LINUX KERNEL DRIVERS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/drv_arch/drv_arch.md" class="md-nav__link">
        Open Programmable Accelerator Engine (OPAE) Linux Device Driver Architecture
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
      
      
      
        <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
          OPAE FPGA TOOLS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          OPAE FPGA TOOLS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/fpgaconf/fpgaconf.md" class="md-nav__link">
        fpgaconf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/fpgainfo/fpgainfo.md" class="md-nav__link">
        fpgainfo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/fpgasupdate/fpgasupdate.md" class="md-nav__link">
        fpgasupdate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/mmlink/mmlink.md" class="md-nav__link">
        mmlink
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/packager/packager.md" class="md-nav__link">
        packager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/userclk/userclk.md" class="md-nav__link">
        userclk
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/hssi/hssi.md" class="md-nav__link">
        hssi
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/pci_device/pci_device.md" class="md-nav__link">
        pci_device
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/opae.io/opae.io.md" class="md-nav__link">
        opae.io
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/rsu/rsu.md" class="md-nav__link">
        rsu
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/host_exerciser/host_exerciser.md" class="md-nav__link">
        host_exerciser
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/hssi_ethernet/hssistats.md" class="md-nav__link">
        HSSI ethernet statistics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/hssi_ethernet/hssimac.md" class="md-nav__link">
        HSSI ethernet mac
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/hssi_ethernet/hssiloopback.md" class="md-nav__link">
        HSSI ethernet loopback
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/mem_tg/mem_tg.md" class="md-nav__link">
        mem_tg
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/vabtool/vabtool.md" class="md-nav__link">
        vabtool
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/opaevfio/opaevfio.md" class="md-nav__link">
        opaevfio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/ofs.uio/ofs.uio.md" class="md-nav__link">
        ofs.uio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/opaeuio/opaeuio.md" class="md-nav__link">
        opaeuio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/fpgad/fpgad.md" class="md-nav__link">
        fpgad
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/fpgadiag/README.md" class="md-nav__link">
        fpgadiag
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#10-introduction" class="md-nav__link">
    1.0 Introduction
  </a>
  
    <nav class="md-nav" aria-label="1.0 Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-about-this-document" class="md-nav__link">
    1.1 About This Document
  </a>
  
    <nav class="md-nav" aria-label="1.1 About This Document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-1-installing-the-opae-sdk" class="md-nav__link">
    Diagram 1: Installing the OPAE SDK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagram-2-installing-the-linux-dfl-drivers" class="md-nav__link">
    Diagram 2: Installing the Linux DFL Drivers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagram-3-bringing-up-the-intel-d5005" class="md-nav__link">
    Diagram 3: Bringing up the Intel D5005
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-terminology" class="md-nav__link">
    1.2 Terminology
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="getting-started-guide-open-fpga-stack-for-intel-stratix-10">Getting Started Guide: Open FPGA Stack for Intel Stratix 10</h1>
<h2 id="10-introduction"><strong>1.0 Introduction</strong></h2>
<p><a name="heading-1.1"></a></p>
<h3 id="11-about-this-document"><strong>1.1 About This Document</strong></h3>
<p>This document helps users get started in evaluating Open FPGA Stack (<abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr>) for Intel® Stratix 10® FPGA targeting the Intel® FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005. After reviewing the document a user shall be able to:</p>
<ul>
<li>Set up a development environment with all <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> ingredients</li>
<li>Build and install the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> Linux Kernel drivers</li>
<li>Build and install the Open Programmable Acceleration Engine Software Development Kit (<abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr>) software on top of the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> Linux kernel drivers</li>
<li>Flash an <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> binary onto the Intel® FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005</li>
<li>Verify the functionality of <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> on an Intel® FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005 board</li>
<li>Know where to find additional information on all <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> ingredients</li>
</ul>
<p>The following flow charts show a high level overview of the initial bringup process, split into three sequential diagrams.</p>
<h4 id="diagram-1-installing-the-opae-sdk">Diagram 1: Installing the <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr></h4>
<p><img alt="UG_1" src="../images/UG_DIAGRAM_1_D5005.png" /></p>
<h4 id="diagram-2-installing-the-linux-dfl-drivers">Diagram 2: Installing the Linux <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Drivers</h4>
<p><img alt="UG_2" src="../images/UG_DIAGRAM_2_D5005.png" /></p>
<h4 id="diagram-3-bringing-up-the-intel-d5005">Diagram 3: Bringing up the Intel D5005</h4>
<p><img alt="UG_3" src="../images/UG_DIAGRAM_3_D5005.png" /></p>
<p><a name="heading-1.2"></a></p>
<p><a name="heading-1.2"></a></p>
<h3 id="12-terminology">1.2 Terminology</h3>
<p><a name="table-1-1"></a>
<br></p>
<h1 id="glossary">Glossary</h1>
<table>
<thead>
<tr>
<th>Term</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><abbr title="Advanced Error Reporting, The PCIe AER driver is the extended PCI Express error reporting capability providing more robust error reporting.">AER</abbr></td>
<td>Advanced Error Reporting, The PCIe <abbr title="Advanced Error Reporting, The PCIe AER driver is the extended PCI Express error reporting capability providing more robust error reporting.">AER</abbr> driver is the extended PCI Express error reporting capability providing more robust error reporting.</td>
</tr>
<tr>
<td><abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr></td>
<td>Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> region is the part of the design where an <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> may reside. This <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> may or may not be a partial reconfiguration region</td>
</tr>
<tr>
<td><abbr title="Basic Building Block, Features within an AFU or part of an FPGA interface that can be reused across designs. These building blocks do not have stringent interface requirements like the FIM's AFU and host interface requires. All BBBs must have a (globally unique identifier) GUID.">BBB</abbr></td>
<td>Basic Building Block, Features within an <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> or part of an FPGA interface that can be reused across designs. These building blocks do not have stringent interface requirements like the <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr>'s <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> and host interface requires. All BBBs must have a (globally unique identifier) GUID.</td>
</tr>
<tr>
<td><abbr title="Best Known Configuration, The exact hardware configuration Intel has optimized and validated the solution against.">BKC</abbr></td>
<td>Best Known Configuration, The exact hardware configuration Intel has optimized and validated the solution against.</td>
</tr>
<tr>
<td><abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr></td>
<td>Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> platform. Supports features such as power sequence management and board monitoring through on-board sensors.</td>
</tr>
<tr>
<td>CSR</td>
<td>Command/status registers (CSR) and software interface, <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> uses a defined set of CSR's to expose the functionality of the FPGA to the host software.</td>
</tr>
<tr>
<td><abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr></td>
<td>Device Feature List, A concept inherited from <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr>. The <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> drivers provide support for FPGA devices that are designed to support the Device Feature List. The <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr>, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> driver to automatically load the drivers required for a given FPGA configuration.</td>
</tr>
<tr>
<td><abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr></td>
<td>FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> resides in the static region of the FPGA and contains the FPGA Management Engine (<abbr title="FPGA Management Engine, Provides a way to manage the platform and enable acceleration functions on the platform.">FME</abbr>) and I/O ring.</td>
</tr>
<tr>
<td><abbr title="FPGA Management Engine, Provides a way to manage the platform and enable acceleration functions on the platform.">FME</abbr></td>
<td>FPGA Management Engine, Provides a way to manage the platform and enable acceleration functions on the platform.</td>
</tr>
<tr>
<td><abbr title="Host Exerciser Module, Host exercisers are used to exercise and characterize the various host-FPGA interactions, including Memory Mapped Input/Output (MMIO), data transfer from host to FPGA, PR, host to FPGA memory, etc.">HEM</abbr></td>
<td>Host Exerciser Module, Host exercisers are used to exercise and characterize the various host-FPGA interactions, including Memory Mapped Input/Output (<abbr title="Memory Mapped Input/Output, Users may map and access both control registers and system memory buffers with accelerators.">MMIO</abbr>), data transfer from host to FPGA, <abbr title="Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA PAC, a PR bitstream refers to an Intel FPGA PAC AFU. Refer to Partial Reconfiguration support page.">PR</abbr>, host to FPGA memory, etc.</td>
</tr>
<tr>
<td>Intel FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005</td>
<td>Intel FPGA Programmable Acceleration Card D5005, A high performance PCI Express (PCIe)-based FPGA acceleration card for data centers. This card is the target platform for the initial <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> release.</td>
</tr>
<tr>
<td><abbr title="Intel Virtualization Technology for Directed I/O, Extension of the VT-x and VT-I processor virtualization technologies which adds new support for I/O device virtualization.">Intel VT-d</abbr></td>
<td>Intel Virtualization Technology for Directed I/O, Extension of the VT-x and VT-I processor virtualization technologies which adds new support for I/O device virtualization.</td>
</tr>
<tr>
<td><abbr title="Input/Output Control, System calls used to manipulate underlying device parameters of special files.">IOCTL</abbr></td>
<td>Input/Output Control, System calls used to manipulate underlying device parameters of special files.</td>
</tr>
<tr>
<td><abbr title="Joint Test Action Group, Refers to the IEEE 1149.1 JTAG standard; Another FPGA configuration methodology.">JTAG</abbr></td>
<td>Joint Test Action Group, Refers to the IEEE 1149.1 <abbr title="Joint Test Action Group, Refers to the IEEE 1149.1 JTAG standard; Another FPGA configuration methodology.">JTAG</abbr> standard; Another FPGA configuration methodology.</td>
</tr>
<tr>
<td><abbr title="Memory Mapped Input/Output, Users may map and access both control registers and system memory buffers with accelerators.">MMIO</abbr></td>
<td>Memory Mapped Input/Output, Users may map and access both control registers and system memory buffers with accelerators.</td>
</tr>
<tr>
<td><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr></td>
<td>Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> and software developers to optimize and reuse their designs.</td>
</tr>
<tr>
<td><abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr></td>
<td>Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.</td>
</tr>
<tr>
<td><abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr></td>
<td>Programmable Acceleration Card: FPGA based Accelerator card</td>
</tr>
<tr>
<td><abbr title="Platform Interface Manager, An interface manager that comprises two components: a configurable platform specific interface for board developers and a collection of shims that AFU developers can use to handle clock crossing, response sorting, buffering and different protocols.">PIM</abbr></td>
<td>Platform Interface Manager, An interface manager that comprises two components: a configurable platform specific interface for board developers and a collection of shims that <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> developers can use to handle clock crossing, response sorting, buffering and different protocols.</td>
</tr>
<tr>
<td><abbr title="Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA PAC, a PR bitstream refers to an Intel FPGA PAC AFU. Refer to Partial Reconfiguration support page.">PR</abbr></td>
<td>Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr>, a <abbr title="Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA PAC, a PR bitstream refers to an Intel FPGA PAC AFU. Refer to Partial Reconfiguration support page.">PR</abbr> bitstream refers to an Intel FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr>. Refer to <a href="https://www.intel.com/content/www/us/en/programmable/products/design-software/fpga-design/quartus-prime/features/partial-reconfiguration.html">Partial Reconfiguration</a> support page.</td>
</tr>
<tr>
<td><abbr title="Remote System Update, A Remote System Update operation sends an instruction to the Intel FPGA PAC D5005 device that triggers a power cycle of the card only, forcing reconfiguration.">RSU</abbr></td>
<td>Remote System Update, A Remote System Update operation sends an instruction to the Intel FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005 device that triggers a power cycle of the card only, forcing reconfiguration.</td>
</tr>
<tr>
<td><abbr title="Single-Root Input-Output Virtualization, Allows the isolation of PCI Express resources for manageability and performance.">SR-IOV</abbr></td>
<td>Single-Root Input-Output Virtualization, Allows the isolation of PCI Express resources for manageability and performance.</td>
</tr>
<tr>
<td><abbr title="Testbench, Testbench or Verification Environment is used to check the functional correctness of the Design Under Test (DUT) by generating and driving a predefined input sequence to a design, capturing the design output and comparing with-respect-to expected output.">TB</abbr></td>
<td>Testbench, Testbench or Verification Environment is used to check the functional correctness of the Design Under Test (DUT) by generating and driving a predefined input sequence to a design, capturing the design output and comparing with-respect-to expected output.</td>
</tr>
<tr>
<td><abbr title="Universal Verification Methodology, A modular, reusable, and scalable testbench structure via an API framework.">UVM</abbr></td>
<td>Universal Verification Methodology, A modular, reusable, and scalable testbench structure via an API framework.</td>
</tr>
<tr>
<td><abbr title="Virtual Function Input/Output, An IOMMU/device agnostic framework for exposing direct device access to userspace.">VFIO</abbr></td>
<td>Virtual Function Input/Output, An IOMMU/device agnostic framework for exposing direct device access to userspace.</td>
</tr>
</tbody>
</table>
<p><a name="heading-1.3"></a></p>
<h3 id="13-introduction-to-ofs"><strong>1.3 Introduction to <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr></strong></h3>
<p>Each <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> reference <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> targets a specific platform, but the modular hardware, software, simulation and test infrastructure allows you to modify each part of the design and test environment for your own custom acceleration platform card. The current <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> reference <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> for Stratix 10 FPGA targets the Intel® FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005 board. This document focuses exclusively on the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> release targeting the Intel® FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005 board.</p>
<p>The <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> repositories (in <a href="https://github.com/OFS"><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr></a> ) on GitHub provide the following components targeting an Intel® FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005:</p>
<ul>
<li><strong>opae-sdk</strong>: Contains the Open Programmable Acceleration Software Development Kit source code and build scripts.
The following submodule repositories are contained within <code>opae-sdk</code></li>
<li><strong>linux-dfl</strong>: Contains Linux kernel-level driver source code and build scripts.</li>
<li><strong>intel-ofs-fim</strong>: Contains the source code, build scripts and verification suite for FPGA RTL source code</li>
<li><strong>ofs-hld-shim</strong>: Contains the necessary files to generate Shim/BSP for <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> Cards, using <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> Interfaces.</li>
</ul>
<p><a name="heading-1.4"></a></p>
<h3 id="14-intended-audience"><strong>1.4 Intended Audience</strong></h3>
<p>The information in this document is intended for customers evaluating the Open FPGA Stack for Intel® Stratix 10® FPGA on the Intel <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005. This document will cover key topics related to initial setup and development, with links for deeper dives on the topics discussed therein.</p>
<p><a name="heading-1.5"></a></p>
<h3 id="15-reference-documents"><strong>1.5 Reference Documents</strong></h3>
<p>Please refer to the README on the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> GitHub for an updated list of collateral on the <a href="https://ofs.github.io"><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> GitHub page</a>.</p>
<p><a name="heading-1.6"></a></p>
<h3 id="16-component-version-summary"><strong>1.6 Component Version Summary</strong></h3>
<p>The <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> 2022.3 Release targeting the Intel® Stratix 10® FPGA is built upon tightly coupled software and firmware versions. Use this section as a general reference for the versions which comprise this release.</p>
<p>The following table highlights the hardware which makes up the Best Known Configuration (<abbr title="Best Known Configuration, The exact hardware configuration Intel has optimized and validated the solution against.">BKC</abbr>) for the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> 2022.3 release.</p>
<p><a name="table-1-2"></a></p>
<h4 id="table-1-2-hardware-bkc">Table 1-2: Hardware <abbr title="Best Known Configuration, The exact hardware configuration Intel has optimized and validated the solution against.">BKC</abbr></h4>
<table>
<thead>
<tr>
<th>Component</th>
</tr>
</thead>
<tbody>
<tr>
<td>1 x Intel® FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005</td>
</tr>
<tr>
<td>1 x <a href="https://www.intel.com/content/www/us/en/products/details/fpga/platforms/pac/d5005/view.html">Supported Server Model</a></td>
</tr>
<tr>
<td>1 x <a href="https://www.intel.com/content/www/us/en/products/details/fpga/development-kits/cables-adapters.html">Intel FPGA Download Cable II</a>   *<em>(Optional, only required if loading images via <abbr title="Joint Test Action Group, Refers to the IEEE 1149.1 JTAG standard; Another FPGA configuration methodology.">JTAG</abbr>)</em></td>
</tr>
</tbody>
</table>
<p>The following table highlights the versions of the software which comprise the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> stack. The installation of the user-space <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> on top of the kernel-space linux-dfl drivers is discussed in subsequent sections of this document.</p>
<p><a name="table-1-3"></a></p>
<h4 id="table-1-3-software-version-summary">Table 1-3: Software Version Summary</h4>
<table>
<thead>
<tr>
<th>Component</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>FPGA Platform</td>
<td><a href="https://www.intel.com/content/www/us/en/products/details/fpga/platforms/pac/d5005.html">Intel® FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005</a></td>
</tr>
<tr>
<td><abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr></td>
<td><a href="https://github.com/OFS/opae-sdk/releases/tag/2.3.0-1">Tag: 2.3.0-1</a></td>
</tr>
<tr>
<td>Kernel Drivers</td>
<td><a href="https://github.com/OPAE/linux-dfl/releases/tag/ofs-2022.3-2">Tag: ofs-2022.3-2</a></td>
</tr>
<tr>
<td><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> Source Code</td>
<td><a href="https://github.com/OFS/ofs-fim-common/tree/release/1.0.x">Branch: release/1.0.x</a></td>
</tr>
<tr>
<td>Intel Quartus Prime Pro Edition Design Software</td>
<td>22.3 <a href="https://www.intel.com/content/www/us/en/software-kit/746666/intel-quartus-prime-pro-edition-design-software-version-22-3-for-linux.html">Intel® Quartus® Prime Pro Edition Linux</a></td>
</tr>
<tr>
<td>Operating System</td>
<td><a href="https://access.redhat.com/downloads/content/479/ver=/rhel---8/8.2/x86_64/product-software">RHEL 8.2</a></td>
</tr>
</tbody>
</table>
<p>A download page containing the release and already-compiled <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> binary artifacts that you can use for immediate evaluation on the Intel® FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005 can be found on the <a href="https://github.com/OFS/ofs-d5005/releases/tag/ofs-d5005-1.0.1"><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> 2022.3</a> official release drop on GitHub.</p>
<p><strong>Note:</strong> If you wish to freeze your Red Hat operating system version on the RHEL 8.2, refer to the following <a href="https://access.redhat.com/solutions/238533">solution</a> provided in the Red Hat customer portal.</p>
<p><a name="heading-2.0"></a></p>
<h2 id="20-ofs-stack-architecture-overview-for-reference-platform"><strong>2.0 <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> Stack Architecture Overview for Reference Platform</strong></h2>
<p><a name="heading-2.1"></a></p>
<h3 id="21-hardware-components"><strong>2.1 Hardware Components</strong></h3>
<p>The <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> hardware architecture decomposes all designs into a standard set of modules, interfaces, and capabilities. Although the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> infrastructure provides a standard set of functionality and capability, the user is responsible for making the customizations to their specific design in compliance with the specifications outlined in the <a href="https://ofs.github.io/hw/d5005/reference_manuals/ofs_fim/mnl_fim_ofs_d5005/">Open FPGA Stack Technical Reference Manual</a>.</p>
<p><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> is a blanket term which can be used to collectively refer to all ingredients of the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> reference design, which includes the core hardware components discussed below and software.</p>
<p><a name="heading-2.1.1"></a></p>
<h4 id="211-fpga-interface-manager"><strong>2.1.1 FPGA Interface Manager</strong></h4>
<p>The FPGA Interface Manager (<abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr>) or 'shell' provides platform management functionality, clocks, resets, and interface access to the host and peripheral features on the acceleration platform. The <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> is implemented in a static region of the FPGA device.</p>
<p>The primary components of the <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> reference design are:</p>
<ul>
<li>PCIe Subsystem</li>
<li>Transceiver Subsystem</li>
<li>Memory Subsystem</li>
<li>FPGA Management Engine</li>
<li><abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> Peripheral Fabric for <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> accesses to other interface peripherals</li>
<li>Board Peripheral Fabric for master to slave CSR accesses from host or <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr></li>
<li>Interface to Board Management Controller (<abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr>)</li>
</ul>
<p>The FPGA Management Engine (<abbr title="FPGA Management Engine, Provides a way to manage the platform and enable acceleration functions on the platform.">FME</abbr>) provides management features for the platform and the loading/unloading of accelerators through partial reconfiguration.</p>
<p>For more information on the <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> and its external connections, please refer to the <a href="https://ofs.github.io/hw/d5005/reference_manuals/ofs_fim/mnl_fim_ofs_d5005/">Open FPGA Stack Technical Reference Manual</a>, and the <a href="https://www.intel.com/content/www/us/en/programmable/documentation/cvl1520030638800.html">Intel FPGA Programmable Acceleration Card D5005 Data Sheet</a>. Below is a high-level block diagram of the <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr>.</p>
<p><a name="figure-2-1"></a></p>
<p><strong>Figure 2-1 <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> Overview</strong></p>
<p><img align="left" alt="fim-overview" src="../images/Fabric_Features.png" /></p>
<p><a name="heading-2.1.2"></a></p>
<h4 id="212-afu"><strong>2.1.2 <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr></strong></h4>
<p>An <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> is an acceleration workload that interfaces to the <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr>. The <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> boundary in this reference design comprises both static and partial reconfiguration (<abbr title="Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA PAC, a PR bitstream refers to an Intel FPGA PAC AFU. Refer to Partial Reconfiguration support page.">PR</abbr>) regions. You can decide how you want to partition these two areas or if you want your <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> region to only be a partial reconfiguration region. A port gasket within the design provides all the <abbr title="Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA PAC, a PR bitstream refers to an Intel FPGA PAC AFU. Refer to Partial Reconfiguration support page.">PR</abbr> specific modules and logic required for partial reconfiguration. Only one partial reconfiguration region is supported in this design.</p>
<p>Similar to the <abbr title="FPGA Management Engine, Provides a way to manage the platform and enable acceleration functions on the platform.">FME</abbr>, the port gasket exposes its capabilities to the host software driver through a DFH register placed at the beginning of the port gasket CSR space. In addition, only one PCIe link can access the port register space.</p>
<p>You can compile your design in one of the following ways:</p>
<ul>
<li>Your <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> resides in a partial reconfiguration (<abbr title="Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA PAC, a PR bitstream refers to an Intel FPGA PAC AFU. Refer to Partial Reconfiguration support page.">PR</abbr>) region of the FPGA.</li>
<li>Your <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> is a part of the static region (SR) and is a compiled flat design.</li>
<li>Your <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> contains both static and <abbr title="Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA PAC, a PR bitstream refers to an Intel FPGA PAC AFU. Refer to Partial Reconfiguration support page.">PR</abbr> regions.</li>
</ul>
<p>The <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> provided in this release is comprised of the following functions:</p>
<ul>
<li><abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> interface handler to verify transactions coming from the <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> region.</li>
<li>PV/VF Mux to route transactions to and from corresponding <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> components, including the ST2MM module, PCIe loopback host exerciser (HE-LB), HSSI host exerciser (HE-HSSI), and Memory Host Exerciser (HE-MEM).</li>
<li>AXI4 Streaming to Memory Map (ST2MM) Module that routes <abbr title="Memory Mapped Input/Output, Users may map and access both control registers and system memory buffers with accelerators.">MMIO</abbr> CSR accesses to <abbr title="FPGA Management Engine, Provides a way to manage the platform and enable acceleration functions on the platform.">FME</abbr> and board peripherals.</li>
<li>Host exercisers to test PCIe, memory and HSSI interfaces (these can be removed from the <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> region after your <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> design is complete to provide more resource area for workloads).</li>
<li>Port gasket and partial reconfiguration support.</li>
</ul>
<p>For more information on the Platform Interface Manager (<abbr title="Platform Interface Manager, An interface manager that comprises two components: a configurable platform specific interface for board developers and a collection of shims that AFU developers can use to handle clock crossing, response sorting, buffering and different protocols.">PIM</abbr>) and <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> development and testing, please refer to the <a href="https://ofs.github.io/hw/d5005/dev_guides/afu_dev/ug_dev_afu_d5005/"><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> Development Guide</a>.</p>
<p><a name="heading-2.2"></a></p>
<h3 id="22-ofs-software-overview"><strong>2.2 <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> Software Overview</strong></h3>
<p><a name="heading-2.2.1"></a></p>
<h4 id="221-kernel-drivers-for-ofs"><strong>2.2.1 Kernel Drivers for <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr></strong></h4>
<p><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> driver software provides the bottom-most API to FPGA platforms. Libraries such as OPAE and frameworks like DPDK are consumers of the APIs provided by <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr>. Applications may be built on top of these frameworks and libraries. The <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> software does not cover any out-of-band management interfaces. <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> driver software is designed to be extendable, flexible, and provide for bare-metal and virtualized functionality. An in depth look at the various aspects of the driver architecture such as the API, an explanation of the <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> framework, and instructions on how to port <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> driver patches to other kernel distributions can be found on the <a href="https://github.com/OPAE/linux-dfl/wiki"><abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Wiki</a> page.</p>
<p><a name="heading-3.0"></a></p>
<h2 id="30-intel-fpga-pac-d5005-card-and-server-requirements"><strong>3.0 Intel FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005 Card and Server Requirements</strong></h2>
<p>Currently <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> for Intel® Stratix 10® FPGA targets the Intel® FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005. Because the Intel® FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005 is a production card, you must prepare the card in order to receive a new non-production bitstream. For these instructions, please contact an Intel representative.</p>
<p>In addition, refer to sections 2.1-2.3 of the <a href="https://www.intel.com/content/www/us/en/programmable/documentation/edj1542148561811.html">Intel Acceleration Stack Quick Start Guide: Intel FPGA Programmable Acceleration Card D5005</a> for a complete overview of the physical installation process and ESD precautions for the D5005 platform.</p>
<hr />
<p><strong>Note:</strong> Ensure that the system meets all the following requirements   before proceeding to install the Intel® FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005 into a server.</p>
<hr />
<p><a name="table-3-1"></a></p>
<p><strong>Table 3-1 Server Requirements for Intel D5005</strong></p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Server</td>
<td><a href="https://www.intel.com/content/www/us/en/products/details/fpga/platforms/pac/d5005/view.html">Qualified Servers</a></td>
</tr>
<tr>
<td>Main Board</td>
<td>PCI Express 3.0 compliant motherboard with at least one dual-width x16 PCIe slot available for card installation</td>
</tr>
<tr>
<td>Board Power Supply*</td>
<td>Auxiliary Power (12V)</td>
</tr>
</tbody>
</table>
<p>* For more information on the required auxiliary power supply, refer to section 2.2.2 of the <a href="https://www.intel.com/content/www/us/en/programmable/documentation/cvl1520030638800.html">Intel FPGA Programmable Acceleration Card D5005 Data Sheet</a>.</p>
<p><a name="heading-3.1"></a></p>
<h3 id="31-supported-processors-for-intel-d5005"><strong>3.1 Supported Processors for Intel D5005</strong></h3>
<p><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> requires that the deployment machine's Xeon processor must support the following technologies. These options must also be enabled in the BIOS and as kernel parameters. The process to enable these parameters will be discussed in the section on driver installation:</p>
<ul>
<li><abbr title="Intel Virtualization Technology for Directed I/O, Extension of the VT-x and VT-I processor virtualization technologies which adds new support for I/O device virtualization.">Intel VT-d</abbr> (Intel Virtualization Technology for IA-32 and Intel 64 Processors)</li>
<li>Intel VT-x (Intel Virtualization Technology for Directed I/O)</li>
<li>Intel IOMMU</li>
</ul>
<p><a name="heading-3.2"></a></p>
<h3 id="32-cooling-requirements-for-the-intel-fpga-pac-d5005"><strong>3.2 Cooling Requirements for the Intel FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005</strong></h3>
<p>Please refer to sections 8.1 and 8.2 of the <a href="https://www.intel.com/content/www/us/en/docs/programmable/683568/current/thermal-and-airflow-requirements.html">Intel FPGA Programmable Acceleration Card D5005 Data Sheet</a> for guidance on cooling specifications that must be met when using the D5005 card. Failure to adhere to these guidelines may result in thermal runaway and/or performance degradation.</p>
<p><a name="heading-4.0"></a></p>
<h2 id="40-ofs-dfl-kernel-drivers"><strong>4.0 <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Kernel Drivers</strong></h2>
<p><a name="heading-4.1"></a></p>
<h3 id="41-ofs-dfl-kernel-driver-environment-setup"><strong>4.1 <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Kernel Driver Environment Setup</strong></h3>
<p>All <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> kernel driver code resides in the <a href="https://github.com/OFS/linux-dfl">Linux <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr></a> GitHub repository. This repository is open source and does not require any permissions to access. It includes a snapshot of the latest best-known configuration (<abbr title="Best Known Configuration, The exact hardware configuration Intel has optimized and validated the solution against.">BKC</abbr>) Linux kernel with the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> driver included in the drivers/fpga/* directory. Downloading, configuration, and compilation will be discussed in this section. Please refer to <a href="#table-1-3">Table 1-3</a> for the latest supported OS.</p>
<p>It is recommended you boot into your operating system's native 4.18.x kernel  before attempting to upgrade to the dfl enabled 5.15-lts You may experience issues when moving between two dfl enabled 5.15-lts  kernels.</p>
<p>This installation process assumes the user has access to an internet connection in order to pull specific GitHub repositories, and to satisfy package dependencies.</p>
<p><strong>1.</strong> You must make the following changes in order to install all dependencies on the latest <abbr title="Best Known Configuration, The exact hardware configuration Intel has optimized and validated the solution against.">BKC</abbr> Operating System. These are required to both build and install the drivers from source, and to install them from pre-built packages:</p>
<p><br></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>subscription-manager<span class="w"> </span>repos<span class="w"> </span>--enable<span class="w"> </span>codeready-builder-for-rhel-8-x86_64-rpms
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm
</code></pre></div>
<p><strong>2.</strong> You must satisfy the following package dependencies if building and installing the drivers from source. Double check that all packages have been found and installed:</p>
<p><br></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>python3<span class="w"> </span>python3-pip<span class="w"> </span>python3-devel<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>gdb<span class="w"> </span>vim<span class="w"> </span>git<span class="w"> </span>gcc<span class="w"> </span>gcc-c++<span class="w"> </span>make<span class="w"> </span>cmake<span class="w"> </span>libuuid-devel<span class="w"> </span>rpm-build<span class="w"> </span>systemd-devel<span class="w"> </span>sudo<span class="w"> </span>nmap<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>python3-jsonschema<span class="w"> </span>json-c-devel<span class="w"> </span>tbb-devel<span class="w"> </span>rpmdevtools<span class="w"> </span>libcap-devel<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>spdlog-devel<span class="w"> </span>cli11-devel<span class="w"> </span>python3-pyyaml<span class="w"> </span>hwloc-devel<span class="w"> </span>libedit-devel<span class="w"> </span>openssl-devel
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--user<span class="w"> </span>jsonschema<span class="w"> </span>virtualenv<span class="w"> </span>pudb<span class="w"> </span>pyyaml
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>sudo<span class="w"> </span>pip3<span class="w"> </span>uninstall<span class="w"> </span>setuptools
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>sudo<span class="w"> </span>pip3<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>setuptools<span class="w"> </span>--prefix<span class="o">=</span>/usr
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="c1"># To Install pybind11 following are the steps</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>curl<span class="w"> </span><span class="s1">&#39;ftp://ftp.pbone.net/mirror/archive.fedoraproject.org/epel/8.2.2020-11-04/Everything/x86_64/Packages/p/python3-pybind11-2.4.3-2.el8.x86_64.rpm&#39;</span><span class="w"> </span>--output<span class="w"> </span>./python3-pybind11-2.4.3-2.el8.x86_64.rpm
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>curl<span class="w"> </span><span class="s1">&#39;ftp://ftp.pbone.net/mirror/archive.fedoraproject.org/epel/8.2.2020-11-04/Everything/x86_64/Packages/p/pybind11-devel-2.4.3-2.el8.x86_64.rpm&#39;</span><span class="w"> </span>--output<span class="w"> </span>./pybind11-devel-2.4.3-2.el8.x86_64.rpm
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>localinstall<span class="w"> </span>./python3-pybind11-2.4.3-2.el8.x86_64.rpm<span class="w"> </span>./pybind11-devel-2.4.3-2.el8.x86_64.rpm
</code></pre></div>
<p>It is recommended you create an empty top-level directory for their <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> related repositories to keep the working environment clean. All steps in this installation will use a generic top-level directory at <code>/home/user/OFS/</code>. If you have created a different top-level directory, replace this path with your custom path.</p>
<p><strong>3.</strong> Initialize an empty git repository and clone the LTS tagged <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> driver source code:
<br></p>
<p>```bash session
cd /home/user/<abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr>/
git init
git clone https://github.com/OPAE/linux-dfl
cd /home/user/<abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr>/linux-dfl
git checkout tags/ofs-2022.3-2 -b fpga-ofs-dev-5.15-lts</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>**4.** Verify that the correct tag has been checkout out.
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>```bash session
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>git describe 
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>ofs-2022.3-2
</code></pre></div>
<p><a name="heading-4.2"></a></p>
<h3 id="42-building-and-installing-the-ofs-dfl-kernel-drivers-from-source"><strong>4.2 Building and Installing the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Kernel Drivers from Source</strong></h3>
<p><strong>1.</strong> The following set of instructions walk you through copying an existing kernel configuration file on your machine and changing the minimal required configuration settings:</p>
<p><code>``bash session
cd /home/user/OFS/linux-dfl
cp /boot/config-</code>uname -r` .config
cat configs/dfl-config &gt;&gt; .config
echo 'CONFIG_LOCALVERSION="-dfl"' &gt;&gt; .config
echo 'CONFIG_LOCALVERSION_AUTO=y' &gt;&gt; .config
sed -i -r 's/CONFIG_SYSTEM_TRUSTED_KEYS=.*/CONFIG_SYSTEM_TRUSTED_KEYS=""/' .config
sed -i '/^CONFIG_DEBUG_INFO_BTF/ s/./#&amp;/' .config
echo 'CONFIG_DEBUG_ATOMIC_SLEEP=y' &gt;&gt; .config
export LOCALVERSION=
make olddefconfig
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>(Optional) To use the built-in GUI menu for editing kernel configuration parameters, you can opt to run `make menuconfig`.
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>**2.** Linux kernel builds take advantage of multiple processors to parallelize the build process. Display how many processors are available with the `nproc` command, and then specify how many make threads to utilize with the -j option. Note that number of threads can exceed the number of processors. In this case, the number of threads are set to the number of processors in the system.
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>&lt;br&gt;
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>```bash session
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>cd /home/user/OFS/linux-dfl
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>make -j `nproc`
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>make -j `nproc` modules
</code></pre></div></p>
<p><strong>3.</strong> The user has two options for installation from source:</p>
<ul>
<li>Using the built-in install option from the kernel Makefile.</li>
<li>Locally building a set of RPM/DEB packages.</li>
</ul>
<p><strong>3.a</strong> This first flow will directly install the kernel and kernel module files without the need to create a package first:</p>
<p><code>``bash session
cd /home/user/OFS/linux-dfl
sudo make -j</code>nproc<code>modules_install
sudo make -j</code>nproc` install
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>**3.b** This second flow will locally build a set of packages. The package options for this flow as as follows:
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>- rpm-pkg: Build both source and binary RPM kernel packages
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>- binrpm-pkg: Build only the binary kernel RPM package
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>- deb-pkg: Build both source and binary deb kernel packages
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>- bindeb-pkg: Build only the binary kernel deb package
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>If you are concerned about the size of the resulting package and binaries, you can significantly reduce the size of the package and object files by using the make variable INSTALL_MOD_STRIP. If this is not a concern, feel free to skip this step. The below instructions will build a set of binary RPM packages:
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>```bash session
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>cd /home/user/OFS/linux-dfl
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>make INSTALL_MOD_STRIP=1 binrpm-pkg
</code></pre></div></p>
<p><strong>3.b.1</strong> By default a directory is created in your <code>home</code> directory called <code>rpmbuild</code>. This directory will house all of the kernel packages which have been built. You need to navigate to the newly built kernel packages and install them. The following files were generated using the build command executed in the previous step:</p>
<p>```bash session
cd ~/rpmbuild/RPMS/x86_64
ls
kernel-5.15.77_dfl-1.x86_64.rpm  kernel-headers-5.15.77_dfl-1.x86_64.rpm
sudo dnf localinstall kernel*.rpm
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>**4.** The system will need to be rebooted for changes to take effect. After a reboot, select the newly built kernel as the boot target. This can be done pre-boot using the command `grub2-reboot`, which removes the requirement for user intervention. After boot, verify that the currently running kernel matches expectation.
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>```bash session
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>uname -r
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>5.15.77-dfl
</code></pre></div></p>
<p><strong>5.</strong> Verify the <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> drivers have been successfully installed. If an Intel® FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005 card with the appropriate <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> is on the local system, the kernel driver modules will have been loaded. In the <code>lsmod</code> output the second column corresponds to the size of the kernel module in bytes, the third column displays the number of devices registered to that driver, and the fourth column displays the names of the devices using it. Verify their versions against the below.</p>
<p>```bash session
lsmod | grep -e fpga -e dfl</p>
<h1 id="output">output</h1>
<p>uio_dfl                20480  0
spi_altera_dfl         20480  0
uio                    20480  1 uio_dfl
dfl_emif               16384  0
spi_altera_core        16384  1 spi_altera_dfl
dfl_fme_region         20480  0
dfl_fme_br             16384  0
dfl_fme_mgr            20480  0
dfl_afu                36864  0
dfl_fme                49152  0
dfl_pci                20480  0
dfl                    40960  8 dfl_pci,s10hssi,uio_dfl,dfl_fme,dfl_fme_br,dfl_afu,spi_altera_dfl,dfl_emif
fpga_region            20480  3 dfl_fme_region,dfl_fme,dfl
fpga_bridge            20480  4 dfl_fme_region,fpga_region,dfl_fme,dfl_fme_br
fpga_mgr               24576  4 dfl_fme_region,fpga_region,dfl_fme_mgr,dfl_fme</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>If an Intel® FPGA PAC D5005 card is not installed in the system and/or does not have the appropriate FIM configured, the user may read version information of the DFL drivers directly from `/lib/modules`:
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>```bash session
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>cd /usr/lib/modules/`uname -r`/kernel/drivers/fpga
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>modinfo dfl* fpga* | grep ^name
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>#output
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>name:           dfl_afu
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>name:           dfl_fme_br
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a>name:           dfl_fme
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>name:           dfl_fme_mgr
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>name:           dfl_fme_region
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a>name:           dfl_hssi
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a>name:           dfl
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a>name:           dfl_n3000_nios
<a id="__codelineno-6-15" name="__codelineno-6-15" href="#__codelineno-6-15"></a>name:           dfl_pci
<a id="__codelineno-6-16" name="__codelineno-6-16" href="#__codelineno-6-16"></a>name:           fpga_bridge
<a id="__codelineno-6-17" name="__codelineno-6-17" href="#__codelineno-6-17"></a>name:           fpga_mgr
<a id="__codelineno-6-18" name="__codelineno-6-18" href="#__codelineno-6-18"></a>name:           fpga_regions
</code></pre></div>
<p><strong>6.</strong> Four kernel parameters must be added to the boot command-line for the newly installed kernel. First, open the file <code>grub</code>:</p>
<p>```bash session
sudo vim /etc/default/grub
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>&lt;a name=&quot;redirect-step12&quot;&gt;&lt;/a&gt;
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>&lt;a name=&quot;step-7&quot;&gt;&lt;/a&gt;
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>**7.** In the variable GRUB_CMDLINE_LINUX add the parameters shown after `quiet`:
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>```bash
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>GRUB_CMDLINE_LINUX=&quot;crashkernel=auto resume=/dev/mapper/cl-swap rd.lvm.lv=cl/root rd.lvm.lv=cl/swap rhgb quiet intel_iommu=on pcie=realloc hugepagesz=2M hugepages=200&quot;
</code></pre></div></p>
<p><em>Note: If you wish to instead set hugepages on a per session basis, you can perform the following step. These settings will be lost on reboot.</em></p>
<p>```bash session
mkdir -p /mnt/huge 
mount -t hugetlbfs nodev /mnt/huge 
echo 2048 &gt; /sys/devices/system/node/node0/hugepages/hugepages-2048kB/nr_hugepages 
echo 2048 &gt; /sys/devices/system/node/node1/hugepages/hugepages-2048kB/nr_hugepages 
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>**8.** Save your edits, then apply them to the GRUB2 configuration file.
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>```bash session
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>sudo grub2-mkconfig  -o /boot/efi/EFI/redhat/grub.cfg
</code></pre></div></p>
<p><strong>9.</strong> Warm reboot. Your kernel parameter changes should have taken affect.</p>
<p>```bash session
cat /proc/cmdline
BOOT_IMAGE=(hd0,gpt2)/vmlinuz-5.15.77-dfl root=/dev/mapper/rhel_bapvedell028-root ro crashkernel=auto resume=/dev/mapper/rhel_bapvedell028-swap rd.lvm.lv=rhel_bapvedell028/root rd.lvm.lv=rhel_bapvedell028/swap rhgb quiet intel_iommu=on pcie=realloc hugepagesz=2M hugepages=200
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>&lt;a name=&quot;heading-5.0&quot;&gt;&lt;/a&gt;
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>## **5.0 OPAE Software Development Kit**
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>The OPAE SDK software stack sits in user space on top of the OFS kernel drivers. It is a common software infrastructure layer that simplifies and streamlines integration of programmable accelerators such as FPGAs into software applications and environments. OPAE consists of a set of drivers, user-space libraries, and tools to discover, enumerate, share, query, access, manipulate, and reconfigure programmable accelerators. OPAE is designed to support a layered, common programming model across different platforms and devices. To learn more about OPAE, its documentation, code samples, an explanation of the available tools, and an overview of the software architecture, please visit the [OPAE GitHub] page.
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a>The OPAE SDK source code is contained within a single GitHub repository hosted at the [OPAE GitHub]. This repository is open source.
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a>&lt;a name=&quot;heading-5.1&quot;&gt;&lt;/a&gt;
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a>### **5.1 OPAE SDK Build Environment Setup**
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a>Ensure the local environment matches the supported Operating System discussed in section [Table 1-3: Software Version Summary](#table-1-3). This installation process assumes you have access to an internet connection in order to pull specific GitHub repositories, and to satisfy package dependencies.
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a>
<a id="__codelineno-9-16" name="__codelineno-9-16" href="#__codelineno-9-16"></a>
<a id="__codelineno-9-17" name="__codelineno-9-17" href="#__codelineno-9-17"></a>&lt;a name=&quot;heading-5-1-1&quot;&gt;&lt;/a&gt;
<a id="__codelineno-9-18" name="__codelineno-9-18" href="#__codelineno-9-18"></a>
<a id="__codelineno-9-19" name="__codelineno-9-19" href="#__codelineno-9-19"></a>#### **5.1.1 Building and Installing the OPAE SDK from Source**
<a id="__codelineno-9-20" name="__codelineno-9-20" href="#__codelineno-9-20"></a>
<a id="__codelineno-9-21" name="__codelineno-9-21" href="#__codelineno-9-21"></a>**1.** Before OPAE SDK installation the user must remove any prior OPAE frameworks.  To remove these packages:
<a id="__codelineno-9-22" name="__codelineno-9-22" href="#__codelineno-9-22"></a>&lt;br&gt;
<a id="__codelineno-9-23" name="__codelineno-9-23" href="#__codelineno-9-23"></a>```bash session
<a id="__codelineno-9-24" name="__codelineno-9-24" href="#__codelineno-9-24"></a>sudo dnf remove opae*
</code></pre></div></p>
<p><strong>2.</strong> You must make the following changes to install all dependencies on RHEL 8.2:
<br>
```bash session
subscription-manager repos --enable codeready-builder-for-rhel-8-x86_64-rpms
sudo dnf install -y https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>**3.** You must satisfy the following package dependencies. Double check that all packages have been found and installed:
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>&lt;br&gt;
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>```bash session
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>sudo dnf install -y python3 python3-pip python3-devel \
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>gdb vim git gcc gcc-c++ make cmake libarchive libuuid-devel rpm-build systemd-devel sudo nmap \
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a>python3-jsonschema json-c-devel tbb-devel rpmdevtools libcap-devel \
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>spdlog-devel cli11-devel python3-pyyaml hwloc-devel libedit-devel openssl-devel
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a>python3 -m pip install --user jsonschema virtualenv pudb pyyaml
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a>sudo pip3 uninstall setuptools
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a>sudo pip3 install --upgrade setuptools --prefix=/usr
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a># To Install pybind11 following are the steps
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a>
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a>curl &#39;ftp://ftp.pbone.net/mirror/archive.fedoraproject.org/epel/8.2.2020-11-04/Everything/x86_64/Packages/p/python3-pybind11-2.4.3-2.el8.x86_64.rpm&#39; --output ./python3-pybind11-2.4.3-2.el8.x86_64.rpm
<a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a>
<a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a>curl &#39;ftp://ftp.pbone.net/mirror/archive.fedoraproject.org/epel/8.2.2020-11-04/Everything/x86_64/Packages/p/pybind11-devel-2.4.3-2.el8.x86_64.rpm&#39; --output ./pybind11-devel-2.4.3-2.el8.x86_64.rpm
<a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a>
<a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a>sudo dnf localinstall ./python3-pybind11-2.4.3-2.el8.x86_64.rpm ./pybind11-devel-2.4.3-2.el8.x86_64.rpm
</code></pre></div></p>
<p>It is recommended you create an empty top-level directory for their <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> related repositories to keep the working environment clean. All steps in this installation will use a generic top-level directory at <code>/home/user/OFS/</code>. If you have created a different top-level directory, replace this path with your custom path.</p>
<p><strong>4.</strong> Initialize an empty git repository and clone the tagged <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> source code:
<br>
```bash session
cd /home/user/<abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr>/
git init
git clone https://github.com/OPAE/opae-sdk.git
cd opae-sdk
git checkout tags/2.3.0-1 -b release/2.3.0
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>**5.** Verify that the correct tag has been checkout out:
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>&lt;br&gt;
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>```bash session
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>git describe --tags
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>2.3.0-1
</code></pre></div></p>
<p><strong>6.</strong> Build the <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> source code, and pack it into several local RPM packages. Building the code into packages allows for easier installation and removal.
<br>
<code>bash session
cd packaging/opae/rpm
./create fedora
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>**7.** After a successful compile there should be 8 packages present:
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>&lt;br&gt;
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>```bash session
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>ls | grep rpm
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>#output
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>opae-2.3.0-1.el8.src.rpm
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>opae-2.3.0-1.el8.x86_64.rpm
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>opae-debuginfo-2.3.0-1.el8.x86_64.rpm
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>opae-debugsource-2.3.0-1.el8.x86_64.rpm
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>opae-devel-2.3.0-1.el8.x86_64.rpm
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>opae-devel-debuginfo-2.3.0-1.el8.x86_64.rpm
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>opae-extra-tools-2.3.0-1.el8.x86_64.rpm
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>opae-extra-tools-debuginfo-2.3.0-1.el8.x86_64.rpm
</code></pre></div>
Remove the opae-2.3.0-1.el8.src.rpm file as it is not used.</code>bash session
rm opae-2.3.0-1.el8.src.rpm
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>&lt;a name=&quot;#prebuilt-skip-step3-opae&quot;&gt;&lt;/a&gt;
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>**7.a** Install the user-built OPAE SDK packages:
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>```bash session
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a>sudo dnf clean all
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>sudo dnf localinstall -y opae*.rpm
</code></pre></div></p>
<p><strong>8.</strong> Check that all packages have been installed:</p>
<p>```bash session
rpm -qa | grep opae</p>
<h1 id="output_1">output</h1>
<p>opae-extra-tools-2.3.0-1.el8.x86_64
opae-debugsource-2.3.0-1.el8.x86_64
opae-2.3.0-1.el8.x86_64
opae-extra-tools-debuginfo-2.3.0-1.el8.x86_64
opae-debuginfo-2.3.0-1.el8.x86_64
opae-devel-2.3.0-1.el8.x86_64
opae-devel-debuginfo-2.3.0-1.el8.x86_64
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>You can query information about each installed package using `rpm -qi &lt;package__name&gt;`.
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>&lt;a name=&quot;heading-5.2&quot;&gt;&lt;/a&gt;
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>### **5.2 OPAE Tools Overview**
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>The OPAE SDK user-space tools sit upon the kernel-space DFL drivers. In order to use OPAE SDK functionality the user needs to complete the steps outlined in the previous section [4.1 OFS DFL Kernel Driver Environment Setup](#heading-4.1) before attempting to run any OPAE commands or flows. You must have at least one D5005 card with the appropriate FIM present in your system. The steps to read and load a new FIM version are discussed in section [6.1 Programming the OFS FIM](#heading-6.1). After both the DFL kernel-space drivers have been installed and the FIM has been upgraded, you may proceed to test the OPAE commands discussed below.
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>This section covers basic functionality of the commonly used OPAE tools and their expected results. These steps may also be used to verify that all OFS software installation has been completed successfully. A complete overview of the OPAE tools can be found on the [OPAE GitHub] and in your cloned GitHub repo at `&lt;your path&gt;/opae-sdk/doc/src/fpga_tools`. More commands are listed than are defined in the list below - most of these are called by other tools and do not need to be called directly themselves.
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>&lt;a name=&quot;heading-5.2.1&quot;&gt;&lt;/a&gt;
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>#### **5.2.1 `fpgasupdate`**
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a>The fpgasupdate tool updates the Intel Max10 BMC image and firmware, root entry hash, and FPGA Static Region (SR) and user image (PR). The fpgasupdate will only accept images that have been formatted using PACsign. If a root entry hash has been programmed onto the board, then the image will also need to be signed using the correct keys. Please refer to the OFS Security User Guide for information on created signed images and on programming and managing the root entry hash.
<a id="__codelineno-14-17" name="__codelineno-14-17" href="#__codelineno-14-17"></a>
<a id="__codelineno-14-18" name="__codelineno-14-18" href="#__codelineno-14-18"></a>The Intel FPGA PAC ships with a factory and user programmed image for both the FIM and BMC FW and RTL on all cards.
<a id="__codelineno-14-19" name="__codelineno-14-19" href="#__codelineno-14-19"></a>
<a id="__codelineno-14-20" name="__codelineno-14-20" href="#__codelineno-14-20"></a>&lt;a name=&quot;table-5-1&quot;&gt;&lt;/a&gt;
<a id="__codelineno-14-21" name="__codelineno-14-21" href="#__codelineno-14-21"></a>
<a id="__codelineno-14-22" name="__codelineno-14-22" href="#__codelineno-14-22"></a>#### Table 5-1: `fpgasupdate` Overview
<a id="__codelineno-14-23" name="__codelineno-14-23" href="#__codelineno-14-23"></a>
<a id="__codelineno-14-24" name="__codelineno-14-24" href="#__codelineno-14-24"></a>**Synopsis:**
<a id="__codelineno-14-25" name="__codelineno-14-25" href="#__codelineno-14-25"></a>
<a id="__codelineno-14-26" name="__codelineno-14-26" href="#__codelineno-14-26"></a>```bash session
<a id="__codelineno-14-27" name="__codelineno-14-27" href="#__codelineno-14-27"></a>fpgasupdate [--log-level=&lt;level&gt;] file [bdf]
</code></pre></div></p>
<p><strong>Description:</strong> The fpgasupdate command implements a secure firmware update.</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>args (optional)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>--log-level <level></td>
<td>Specifies the <code>log-level</code> which is the level of information output to your command tool. The following seven levels  are available: <code>state</code>, <code>ioctl</code>, <code>debug</code>, <code>info</code>, <code>warning</code>, <code>error</code>, <code>critical</code>. Setting <code>--log-level=state</code> provides the most verbose output. Setting <code>--log-level=ioctl</code> provides the second most information, and so on. The default level is <code>info</code>.</td>
</tr>
<tr>
<td></td>
<td>file</td>
<td>Specifies the secure update firmware file to be programmed. This file may be to program a static region (SR), programmable region (<abbr title="Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA PAC, a PR bitstream refers to an Intel FPGA PAC AFU. Refer to Partial Reconfiguration support page.">PR</abbr>), root entry hash, key cancellation, or other device-specific firmware.</td>
</tr>
<tr>
<td></td>
<td>bdf</td>
<td>The PCIe address of the <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> to program. <code>bdf</code> is of the form <code>[ssss:]bb:dd:f</code>, corresponding to PCIe segment, bus, device, function. The segment is optional. If you do not specify a segment, the segment defaults to <code>0000</code>. If the system has only one <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> you can omit the <code>bdf</code> and let <code>fpgasupdate</code>  determine the address automatically.</td>
</tr>
</tbody>
</table>
<p><a name="table-5-2"></a></p>
<h4 id="table-5-2-fim-version-summary-for-ofs-20223-release"><strong>Table 5-2: <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> Version Summary for <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> 2022.3 Release</strong></h4>
<table>
<thead>
<tr>
<th><abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> Version</th>
<th>Bitstream ID</th>
<th>Pr Interface ID</th>
<th>File Name</th>
<th>Download Location</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>288511861987640872</td>
<td>d51533ad-aee6-5dab-80fb-a44bbf579b68</td>
<td>d5005_page1_unsigned.bin</td>
<td><a href="https://github.com/OFS/ofs-d5005/releases/tag/ofs-d5005-1.0.1"><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> 2022.3 Release Page</a></td>
</tr>
</tbody>
</table>
<p><a name="table-5-3"></a></p>
<h4 id="table-5-3-bmc-version-summary-for-ofs-20223-release"><strong>Table 5-3: <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> Version Summary for <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> 2022.3 Release</strong></h4>
<table>
<thead>
<tr>
<th><abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> FW and RTL Version</th>
<th>File Name</th>
<th>Download Location</th>
</tr>
</thead>
<tbody>
<tr>
<td>2.0.13</td>
<td>unsigned_bmc_fw.bin</td>
<td>Contact your field representative for access</td>
</tr>
</tbody>
</table>
<p><a name="heading-5.2.2"></a></p>
<h4 id="522-fpgainfo"><strong>5.2.2 <code>fpgainfo</code></strong></h4>
<p><strong>Synopsis:</strong></p>
<p>```bash session
   fpgainfo [-h] [-S <segment>] [-B <bus>] [-D <device>] [-F <function>] [PCI_ADDR]
            {errors,power,temp,fme,port,bmc,mac,phy,security}
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>**Description:**
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a> Displays FPGA information derived from sysfs files. The command argument is one of the following: errors, power, temp, port, fme, bmc, phy or mac, security. Some commands may also have other arguments or options that control their behavior.
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>For systems with multiple FPGA devices, you can specify the BDF to limit the output to the FPGA resource with the corresponding PCIe configuration. If not specified, information displays for all resources for the given command.
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>|Command|args (optional)|Description|
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>|-------|----------------|-------------|
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>| | --help, -h | Prints help information and exits. |
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>| | --version, -v | Prints version information and exits. |
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>| | -S, --segment | PCIe segment number of resource. |
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a>| | -B, --bus | PCIe bus number of resource. |
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a>| | -D, --device | PCIe device number of resource. |
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a>| | -F, --function | PCIe function number of resource. |
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a>| errors | {fme, port, all} --clear, -c | First agument to the errors command specifies the resource type to display in human readable format. The second optional argument clears errors for the given FPGA resource. |
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a>|power|   |Provides total power in watts that the FPGA hardware consumes|
<a id="__codelineno-15-16" name="__codelineno-15-16" href="#__codelineno-15-16"></a>|temp|   |Provides FPGA temperature values in degrees Celsius|
<a id="__codelineno-15-17" name="__codelineno-15-17" href="#__codelineno-15-17"></a>|port|   |Provides information about the port|
<a id="__codelineno-15-18" name="__codelineno-15-18" href="#__codelineno-15-18"></a>|fme|   |Provides information about the FME|
<a id="__codelineno-15-19" name="__codelineno-15-19" href="#__codelineno-15-19"></a>|bmc|   |Provides BMC sensors information|
<a id="__codelineno-15-20" name="__codelineno-15-20" href="#__codelineno-15-20"></a>|mac|   |Provides information about MAC ROM connected to FPGA|
<a id="__codelineno-15-21" name="__codelineno-15-21" href="#__codelineno-15-21"></a>|security|  |Provides information about the security keys, hashes, and flash count, if available.|
<a id="__codelineno-15-22" name="__codelineno-15-22" href="#__codelineno-15-22"></a>
<a id="__codelineno-15-23" name="__codelineno-15-23" href="#__codelineno-15-23"></a>*Note: Your Bitstream ID and PR Interface Id may not match the below examples.*
<a id="__codelineno-15-24" name="__codelineno-15-24" href="#__codelineno-15-24"></a>
<a id="__codelineno-15-25" name="__codelineno-15-25" href="#__codelineno-15-25"></a>The following examples walk through sample outputs generated by `fpgainfo`.
<a id="__codelineno-15-26" name="__codelineno-15-26" href="#__codelineno-15-26"></a>
<a id="__codelineno-15-27" name="__codelineno-15-27" href="#__codelineno-15-27"></a>```bash session
<a id="__codelineno-15-28" name="__codelineno-15-28" href="#__codelineno-15-28"></a>sudo fpgainfo fme
<a id="__codelineno-15-29" name="__codelineno-15-29" href="#__codelineno-15-29"></a>#output
<a id="__codelineno-15-30" name="__codelineno-15-30" href="#__codelineno-15-30"></a>Open FPGA Stack Platform
<a id="__codelineno-15-31" name="__codelineno-15-31" href="#__codelineno-15-31"></a>Board Management Controller, MAX10 NIOS FW version: 2.0.13
<a id="__codelineno-15-32" name="__codelineno-15-32" href="#__codelineno-15-32"></a>Board Management Controller, MAX10 Build version: 2.0.13
<a id="__codelineno-15-33" name="__codelineno-15-33" href="#__codelineno-15-33"></a>//****** FME ******//
<a id="__codelineno-15-34" name="__codelineno-15-34" href="#__codelineno-15-34"></a>Object Id                        : 0xF000000
<a id="__codelineno-15-35" name="__codelineno-15-35" href="#__codelineno-15-35"></a>PCIe s:b:d.f                     : 0000:3B:00.0
<a id="__codelineno-15-36" name="__codelineno-15-36" href="#__codelineno-15-36"></a>Vendor Id                        : 0x8086
<a id="__codelineno-15-37" name="__codelineno-15-37" href="#__codelineno-15-37"></a>Device Id                        : 0xBCCE
<a id="__codelineno-15-38" name="__codelineno-15-38" href="#__codelineno-15-38"></a>SubVendor Id                     : 0x8086
<a id="__codelineno-15-39" name="__codelineno-15-39" href="#__codelineno-15-39"></a>SubDevice Id                     : 0x138D
<a id="__codelineno-15-40" name="__codelineno-15-40" href="#__codelineno-15-40"></a>Socket Id                        : 0x00
<a id="__codelineno-15-41" name="__codelineno-15-41" href="#__codelineno-15-41"></a>Ports Num                        : 01
<a id="__codelineno-15-42" name="__codelineno-15-42" href="#__codelineno-15-42"></a>Bitstream Id                     : 288511861987640872
<a id="__codelineno-15-43" name="__codelineno-15-43" href="#__codelineno-15-43"></a>Bitstream Version                : 4.0.1
<a id="__codelineno-15-44" name="__codelineno-15-44" href="#__codelineno-15-44"></a>Pr Interface Id                  : d51533ad-aee6-5dab-80fb-a44bbf579b68
<a id="__codelineno-15-45" name="__codelineno-15-45" href="#__codelineno-15-45"></a>Boot Page                        : user
</code></pre></div></p>
<p>```bash session
sudo fpgainfo bmc</p>
<h1 id="output_2">output</h1>
<p>Open FPGA Stack Platform
Board Management Controller, MAX10 NIOS FW version: 2.0.13
Board Management Controller, MAX10 Build version: 2.0.13
//<strong><em>*</em>* <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> SENSORS </strong>****//
Object Id                        : 0xF000000
PCIe s:b:d.f                     : 0000:3B:00.0
Vendor Id                        : 0x8086
Device Id                        : 0xBCCE
SubVendor Id                     : 0x8086
SubDevice Id                     : 0x138D
Socket Id                        : 0x00
Ports Num                        : 01
Bitstream Id                     : 288511861987640872
Bitstream Version                : 4.0.1
Pr Interface Id                  : d51533ad-aee6-5dab-80fb-a44bbf579b68
( 1) VCCERAM Voltage                                    : 0.90 Volts
( 2) VCCT Temperature                                   : 29.00 Celsius
( 3) 12v Backplane Voltage                              : 12.17 Volts
( 4) VCCERAM Current                                    : 0.18 Amps
( 5) FPGA Transceiver Temperature                       : 36.50 Celsius
( 6) QSFP1 Supply Voltage                               : 0.00 Volts
( 7) 3.3v Temperature                                   : 29.00 Celsius
( 8) 12v Backplane Current                              : 2.28 Amps
( 9) RDIMM3 Temperature                                 : 25.50 Celsius
(10) VCCR Voltage                                       : 1.12 Volts
(11) Board Inlet Air Temperature                        : 24.50 Celsius
(12) 1.8v Temperature                                   : 27.50 Celsius
(13) 12v AUX Voltage                                    : 12.14 Volts
(14) VCCR Current                                       : 0.55 Amps
(15) RDIMM0 Temperature                                 : 24.50 Celsius
(16) FPGA Core Voltage                                  : 0.88 Volts
(17) VCCERAM Temperature                                : 27.50 Celsius
(18) 12v AUX Current                                    : 1.19 Amps
(19) QSFP0 Temperature                                  : N/A
(20) VCCT Voltage                                       : 1.12 Volts
(21) FPGA Core Current                                  : 11.60 Amps
(22) FPGA Core Temperature                              : 42.50 Celsius
(23) 12v Backplane Temperature                          : 24.00 Celsius
(24) VCCT Current                                       : 0.14 Amps
(25) RDIMM1 Temperature                                 : 24.00 Celsius
(26) 3.3v Voltage                                       : 3.30 Volts
(27) VCCR Temperature                                   : 33.50 Celsius
(28) 1.8v Voltage                                       : 1.80 Volts
(29) 3.3v Current                                       : 0.32 Amps
(30) Board Exhaust Air Temperature                      : 26.00 Celsius
(31) 12v AUX Temperature                                : 25.00 Celsius
(32) QSFP0 Supply Voltage                               : 0.00 Volts
(33) QSFP1 Temperature                                  : N/A
(34) 1.8v Current                                       : 0.54 Amps
(35) RDIMM2 Temperature                                 : 26.00 Celsius
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>&lt;a name=&quot;heading-5.2.3&quot;&gt;&lt;/a&gt;
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>#### **5.2.3 `rsu`**
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>The **rsu** performs a **R**emote **S**ystem **U**pdate operation on a device, given its PCIe address. A **rsu** operation sends an instruction to the device to trigger a power cycle of the card only. This will force reconfiguration from flash for either the BMC or FPGA.
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>The Intel FPGA PAC contains a region of flash the user may store their FIM image. After an image has been programmed with fpgasupdate the user may choose to perform rsu to update the image on the device.
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>**Note:** The D5005 platform only supports storing and configuring a single user image from flash for the FPGA. It does not include support for the user1/user2 partitions as shown in other OFS related acceleration boards.
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>**`rsu` Overview**
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>**Synopsis**
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>```bash session
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>rsu [-h] [-d] {bmc,bmcimg,retimer,sdm,fpgadefault} [PCIE_ADDR]
</code></pre></div></p>
<p>```bash session
rsu bmc --page=(user) [PCIE_ADDR]
rsu retimer [PCIE_ADDR]
rsu sdm [PCIE_ADDR]
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>Perform RSU (remote system update) operation on PAC device given its PCIe address. An RSU operation sends an instruction to the device to trigger a power cycle of the card only. This will force reconfiguration from flash for either BMC, Retimer, SDM, (on devices that support these) or the FPGA.
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>*Note: As a result of using the **rsu** command, the host rescans the PCI bus and may assign a different Bus/Device/Function (B/D/F) value than the originally assigned value.*
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>&lt;a name=&quot;heading-5.2.4&quot;&gt;&lt;/a&gt;
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a>#### **5.2.4 `PACsign`**
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a>PACSign is an OPAE utility which allows users to insert authentication markers into bitstreams targeted for the platform. All binary images must be signed using PACSign before fpgasupdate can use them for an update. Assuming no Root Entry Hash (REH) has been programmed on the device, the following examples demonstrate how to prepend the required secure authentication data, and specify which region of flash to update.
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a>More information, including charts detailing the different certification types and their required options, are fully described in the PACsign python/pacsign/PACSign.md [OPAE GitHub] on GitHub.
<a id="__codelineno-17-11" name="__codelineno-17-11" href="#__codelineno-17-11"></a>
<a id="__codelineno-17-12" name="__codelineno-17-12" href="#__codelineno-17-12"></a>&lt;a name=&quot;table-5-4&quot;&gt;&lt;/a&gt;
<a id="__codelineno-17-13" name="__codelineno-17-13" href="#__codelineno-17-13"></a>
<a id="__codelineno-17-14" name="__codelineno-17-14" href="#__codelineno-17-14"></a>#### Table 5-4: `PACSign` Overview
<a id="__codelineno-17-15" name="__codelineno-17-15" href="#__codelineno-17-15"></a>
<a id="__codelineno-17-16" name="__codelineno-17-16" href="#__codelineno-17-16"></a>**Synopsis:**
<a id="__codelineno-17-17" name="__codelineno-17-17" href="#__codelineno-17-17"></a>
<a id="__codelineno-17-18" name="__codelineno-17-18" href="#__codelineno-17-18"></a>```bash session
<a id="__codelineno-17-19" name="__codelineno-17-19" href="#__codelineno-17-19"></a>PACSign [-h] {FIM,SR,SR_TEST,BBS,BMC,BMC_FW,BMC_FACTORY,AFU,PR,PR_TEST,GBS,FACTORY,PXE,THERM_SR,THERM_PR} ...
<a id="__codelineno-17-20" name="__codelineno-17-20" href="#__codelineno-17-20"></a>
<a id="__codelineno-17-21" name="__codelineno-17-21" href="#__codelineno-17-21"></a>PACSign &lt;CMD&gt; [-h] -t {UPDATE,CANCEL,RK_256,RK_384} -H HSM_MANAGER [-C HSM_CONFIG] [-s SLOT_NUM] [-r ROOT_KEY] [-k CODE_SIGNING_KEY] [-d CSK_ID] [-R ROOT_BITSTREAM] [-S] [-i INPUT_FILE] [-o OUTPUT_FILE] [-b BITSTREAM_VERSION] [-y] [-v]
</code></pre></div></p>
<p><strong>Description:</strong>
The PACSign utility inserts authentication markers into bitstreams.</p>
<table>
<thead>
<tr>
<th>Command</th>
<th>args (optional)</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td>(required) -t, --cert_type TYPE</td>
<td>The following operations are supported: UPDATE, CANCEL, RK_256, RK_348</td>
</tr>
<tr>
<td></td>
<td>(required) -H, --HSM_manager MODULE</td>
<td>The module name for a module that interfaces to a HSM. PACSign includes both the openssl_manager and pkcs11_manager to handle keys and signing operations.</td>
</tr>
<tr>
<td></td>
<td>-C, --HSM_config CONFIG</td>
<td>The argument to this operation is passed verbatim to the specified HSM. For pkcs11_manager, this option specifies a JSON file describing the PKCS #11 capable HSM’s parameters.</td>
</tr>
<tr>
<td></td>
<td>-r, --root_key KEY_ID</td>
<td>The key identifier that the HSM uses to identify the root key to be used for the selected operation.</td>
</tr>
<tr>
<td></td>
<td>-k, --code_signing_key KEY_ID</td>
<td>The key indentifier that the HSM uses to identify the code signing key to be used for the selected operation</td>
</tr>
<tr>
<td></td>
<td>-d, --csk_id CSK_NUM</td>
<td>Only used for type CANCEL. Specifies the key number of the code signing key to cancel.</td>
</tr>
<tr>
<td></td>
<td 0_1_2="0,1,2">-s, --slot_num</td>
<td>For bitstream types with multiple slots (i.e. multiple ST regions), this option specifies which of the slots to which this bitstream is to be acted upon</td>
</tr>
<tr>
<td></td>
<td>-b, --bitstream_version VERSION</td>
<td>User-formatted version information. This can be any string up to 32 bytes in length.</td>
</tr>
<tr>
<td></td>
<td>-S, --SHA384</td>
<td>Used to specify that PACSign is to use 384-bit crypto. Default is 256-bit</td>
</tr>
<tr>
<td></td>
<td>-R, --ROOT_BITSTREAM ROOT_BITSTREAM</td>
<td>Valid when verifying bitstreams. The verification step will ensure the generated bitstream is able to be loaded on a board with the specified root entry hash programmed.</td>
</tr>
<tr>
<td></td>
<td>-i, --input_file FILE</td>
<td>Only to be used for UPDATE operations. Specifies the file name containing data to be signed</td>
</tr>
<tr>
<td></td>
<td>-o, --output_file FILE</td>
<td>Specifies the file name for the signed output bitstream.</td>
</tr>
<tr>
<td></td>
<td>-y, --yes</td>
<td>Silently answer all queries from PACSign in the affirmative.</td>
</tr>
<tr>
<td></td>
<td>-v, --verbose</td>
<td>Can be specified multiple times. Increases the verbosity of PACSign. Once enables non-fatal warnings to be displayed. Twice enables progress information. Three or more occurrences enables very verbose debugging information.</td>
</tr>
<tr>
<td></td>
<td>-h</td>
<td>Prints help information and exits</td>
</tr>
<tr>
<td></td>
<td>{<abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr>, SR, SR_TEST, BBS, <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr>, BMC_FW, BMC_FACTORY, <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr>, <abbr title="Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA PAC, a PR bitstream refers to an Intel FPGA PAC AFU. Refer to Partial Reconfiguration support page.">PR</abbr>, PR_TEST, GBS, FACTORY, PXE, THERM_SR, THERM_PR}</td>
<td>Bitstream type identifier.</td>
</tr>
</tbody>
</table>
<p><strong>PACSign</strong> can be run on images that have previously been signed. It will overwrite any existing authentication data.</p>
<p><em>Note: For more information on PACSign and on general security practices, please contact your field representative to get access to the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> Security User Guide.</em></p>
<p>The following example will create an unsigned SR image from an existing signed SR binary update image.</p>
<p>```bash session
PACSign SR -t UPDATE -s 0 -H openssl_manager -i d5005_page1_unsigned.bin -o new_image.bin</p>
<h1 id="output_3">output</h1>
<p>No root key specified.  Generate unsigned bitstream? Y = yes, N = no: y
No CSK specified.  Generate unsigned bitstream? Y = yes, N = no: y
No root entry hash bitstream specified.  Verification will not be done.  Continue? Y = yes, N = no: y
2022-07-20 10:13:54,954 - PACSign.log - WARNING - Bitstream is already signed - removing signature blocks
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>&lt;a name=&quot;heading-5.2.5&quot;&gt;&lt;/a&gt;
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>#### **5.2.5 `bitstreaminfo`**
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a>Displays authentication information contained with each provided `file` on the command line. This includes any JSON header strings, authentication header block information, and a small portion  of the payload. The binary is installed by default at `/usr/bin/bitstreaminfo`.&lt;br&gt;
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a>&lt;a name=&quot;heading-5.2.6&quot;&gt;&lt;/a&gt;
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a>#### **5.2.6 `hssi`**
<a id="__codelineno-18-10" name="__codelineno-18-10" href="#__codelineno-18-10"></a>
<a id="__codelineno-18-11" name="__codelineno-18-11" href="#__codelineno-18-11"></a>The hssi application provides a means of interacting with the 10G and with the 100G HSSI AFUs. In both 10G and 100G operating modes, the application initializes the AFU, completes the desired transfer as described by the mode-specific options. Only the `hssi_10g` MODE is currently supported. An example of this command&#39;s output can be found in section [5.2.9 Running the Host Exerciser Modules](#heading-5.2.9). The binary is installed by default at `/usr/bin/hssi`.&lt;br&gt;
<a id="__codelineno-18-12" name="__codelineno-18-12" href="#__codelineno-18-12"></a>
<a id="__codelineno-18-13" name="__codelineno-18-13" href="#__codelineno-18-13"></a>&lt;a name=&quot;heading-5.2.7&quot;&gt;&lt;/a&gt;
<a id="__codelineno-18-14" name="__codelineno-18-14" href="#__codelineno-18-14"></a>
<a id="__codelineno-18-15" name="__codelineno-18-15" href="#__codelineno-18-15"></a>#### **5.2.7 `opae.io`**
<a id="__codelineno-18-16" name="__codelineno-18-16" href="#__codelineno-18-16"></a>
<a id="__codelineno-18-17" name="__codelineno-18-17" href="#__codelineno-18-17"></a>Opae.io is a interactive Python environment packaged on top of libopaevfio.so, which provides user space access to PCIe devices via the vfio-pci driver. The main feature of opae.io is its built-in Python command interpreter, along with some Python bindings that provide a means to access Configuration and Status Registers (CSRs) that reside on the PCIe device. opae.io has two operating modes: command line mode and interactive mode. An example of this command&#39;s output can be found in section [5.2.9 Running the Host Exerciser Modules](#heading-5.2.9). The binary is installed by default at `/usr/bin/opae.io`.&lt;br&gt;
<a id="__codelineno-18-18" name="__codelineno-18-18" href="#__codelineno-18-18"></a>
<a id="__codelineno-18-19" name="__codelineno-18-19" href="#__codelineno-18-19"></a>&lt;a name=&quot;heading-5.2.8&quot;&gt;&lt;/a&gt;
<a id="__codelineno-18-20" name="__codelineno-18-20" href="#__codelineno-18-20"></a>
<a id="__codelineno-18-21" name="__codelineno-18-21" href="#__codelineno-18-21"></a>#### **5.2.8 `host_exerciser`**
<a id="__codelineno-18-22" name="__codelineno-18-22" href="#__codelineno-18-22"></a>
<a id="__codelineno-18-23" name="__codelineno-18-23" href="#__codelineno-18-23"></a>The host exerciser is used to exercise and characterize the various host-FPGA interactions eg. MMIO, Data transfer from host to FPGA , PR, host to FPGA memory etc. An example of this command&#39;s output can be found in section [5.2.9 Running the Host Exerciser Modules](#heading-5.2.9). The binary is installed by default at `/usr/bin/host_exerciser`. For more information refer to - [Host Exerciser](https://opae.github.io/latest/docs/fpga_tools/host_exerciser/host_exerciser.html)&lt;br&gt;
<a id="__codelineno-18-24" name="__codelineno-18-24" href="#__codelineno-18-24"></a>
<a id="__codelineno-18-25" name="__codelineno-18-25" href="#__codelineno-18-25"></a>&lt;a name=&quot;heading-5.2.9&quot;&gt;&lt;/a&gt;
<a id="__codelineno-18-26" name="__codelineno-18-26" href="#__codelineno-18-26"></a>
<a id="__codelineno-18-27" name="__codelineno-18-27" href="#__codelineno-18-27"></a>#### **5.2.9 Running the Host Exerciser Modules**
<a id="__codelineno-18-28" name="__codelineno-18-28" href="#__codelineno-18-28"></a>
<a id="__codelineno-18-29" name="__codelineno-18-29" href="#__codelineno-18-29"></a>The reference FIM and unchanged compilations contain Host Exerciser Modules (HEMs). These are used to exercise and characterize the various host-FPGA interactions, including Memory Mapped Input/Output (MMIO), data transfer from host to FPGA, PR, host to FPGA memory, etc. 
<a id="__codelineno-18-30" name="__codelineno-18-30" href="#__codelineno-18-30"></a>
<a id="__codelineno-18-31" name="__codelineno-18-31" href="#__codelineno-18-31"></a>---
<a id="__codelineno-18-32" name="__codelineno-18-32" href="#__codelineno-18-32"></a>
<a id="__codelineno-18-33" name="__codelineno-18-33" href="#__codelineno-18-33"></a>**Note:** Before continuing, if huge pages are not set refer to [section 4.2](#step-7)
<a id="__codelineno-18-34" name="__codelineno-18-34" href="#__codelineno-18-34"></a>
<a id="__codelineno-18-35" name="__codelineno-18-35" href="#__codelineno-18-35"></a>---
<a id="__codelineno-18-36" name="__codelineno-18-36" href="#__codelineno-18-36"></a>
<a id="__codelineno-18-37" name="__codelineno-18-37" href="#__codelineno-18-37"></a>
<a id="__codelineno-18-38" name="__codelineno-18-38" href="#__codelineno-18-38"></a>There are three HEMs present in the OFS FIM - HE-LPBK, HE-HSSI, and HE-MEM. These exercisers are tied to three different VFs that must be enabled before they can be used. The user should enable the VF for each HEM using the below steps:
<a id="__codelineno-18-39" name="__codelineno-18-39" href="#__codelineno-18-39"></a>
<a id="__codelineno-18-40" name="__codelineno-18-40" href="#__codelineno-18-40"></a>**1.** Determine the BDF of the Intel® FPGA PAC D5005 card.
<a id="__codelineno-18-41" name="__codelineno-18-41" href="#__codelineno-18-41"></a>
<a id="__codelineno-18-42" name="__codelineno-18-42" href="#__codelineno-18-42"></a>The PCIe BDF address is initially determined when the server powers on. The user can determine the addresses of all Intel® FPGA PAC D5005 boards using `lspci`:
<a id="__codelineno-18-43" name="__codelineno-18-43" href="#__codelineno-18-43"></a>
<a id="__codelineno-18-44" name="__codelineno-18-44" href="#__codelineno-18-44"></a>```bash session
<a id="__codelineno-18-45" name="__codelineno-18-45" href="#__codelineno-18-45"></a>lspci -d :bcce
<a id="__codelineno-18-46" name="__codelineno-18-46" href="#__codelineno-18-46"></a>#output
<a id="__codelineno-18-47" name="__codelineno-18-47" href="#__codelineno-18-47"></a>3b:00.0 Processing accelerators: Intel Corporation Device bcce (rev 01)
</code></pre></div></p>
<hr />
<p><strong>Note:</strong> Before continuing, if you updated your <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> installation, please also <a href="#heading-6.1.1">update your <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr></a> to run <abbr title="Host Exerciser Module, Host exercisers are used to exercise and characterize the various host-FPGA interactions, including Memory Mapped Input/Output (MMIO), data transfer from host to FPGA, PR, host to FPGA memory, etc.">HEM</abbr></p>
<hr />
<p><strong>2.</strong> Enable three VFs.</p>
<p>In this example, the BDF address is 0000:3b:00.0. With this information the user can now enable three VFs with the following:</p>
<p>```bash session
sudo pci_device 0000:3b:00.0 vf 3
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>**3.** Verify that all three VFs have been created.
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>```bash session
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a>lspci -s 3b:00
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>#output
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>3b:00.0 Processing accelerators: Intel Corporation Device bcce (rev 01)
<a id="__codelineno-19-7" name="__codelineno-19-7" href="#__codelineno-19-7"></a>3b:00.1 Processing accelerators: Intel Corporation Device bccf (rev 01)
<a id="__codelineno-19-8" name="__codelineno-19-8" href="#__codelineno-19-8"></a>3b:00.2 Processing accelerators: Intel Corporation Device bccf (rev 01)
<a id="__codelineno-19-9" name="__codelineno-19-9" href="#__codelineno-19-9"></a>3b:00.3 Processing accelerators: Intel Corporation Device bccf (rev 01)
</code></pre></div></p>
<p><strong>4.</strong> Bind the 3 VFs to the vfio-pci driver.</p>
<p>sudo opae.io init -d PCI_ADDR USER[:GROUP]]</p>
<p>```bash session
sudo opae.io init -d 0000:3b:00.1 $USER</p>
<h1 id="output_4">output</h1>
<p>opae.io 0.2.5
Unbinding (0x8086,0xbccf) at 0000:3b:00.1 from dfl-pci
Binding (0x8086,0xbccf) at 0000:3b:00.1 to vfio-pci
iommu group for (0x8086,0xbccf) at 0000:3b:00.1 is 142
Assigning /dev/vfio/142 to $USER:$USER
Changing permissions for /dev/vfio/142 to rw-rw----</p>
<p>sudo opae.io init -d 0000:3b:00.2 $USER</p>
<h1 id="output_5">output</h1>
<p>opae.io 0.2.5
Unbinding (0x8086,0xbccf) at 0000:3b:00.2 from dfl-pci
Binding (0x8086,0xbccf) at 0000:3b:00.2 to vfio-pci
iommu group for (0x8086,0xbccf) at 0000:3b:00.2 is 143
Assigning /dev/vfio/143 to $USER:$USER
Changing permissions for /dev/vfio/143 to rw-rw----</p>
<p>sudo opae.io init -d 0000:3b:00.3 $USER</p>
<h1 id="output_6">output</h1>
<p>opae.io 0.2.5
Unbinding (0x8086,0xbccf) at 0000:3b:00.3 from dfl-pci
Binding (0x8086,0xbccf) at 0000:3b:00.3 to vfio-pci
iommu group for (0x8086,0xbccf) at 0000:3b:00.3 is 144
Assigning /dev/vfio/144 to $USER:$USER
Changing permissions for /dev/vfio/144 to rw-rw----
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>**5.** Check that the accelerators are present using fpgainfo. *Note your port configuration may differ from the below.*
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a>```bash session
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a>sudo fpgainfo port
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a>#output
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a>//****** PORT ******//
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a>Object Id                        : 0xF000000
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a>PCIe s:b:d.f                     : 0000:3B:00.0
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a>Vendor Id                        : 0x8086
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a>Device Id                        : 0xBCCE
<a id="__codelineno-20-11" name="__codelineno-20-11" href="#__codelineno-20-11"></a>SubVendor Id                     : 0x8086
<a id="__codelineno-20-12" name="__codelineno-20-12" href="#__codelineno-20-12"></a>SubDevice Id                     : 0x138D
<a id="__codelineno-20-13" name="__codelineno-20-13" href="#__codelineno-20-13"></a>Socket Id                        : 0x00
<a id="__codelineno-20-14" name="__codelineno-20-14" href="#__codelineno-20-14"></a>//****** PORT ******//
<a id="__codelineno-20-15" name="__codelineno-20-15" href="#__codelineno-20-15"></a>Object Id                        : 0x603B000000000000
<a id="__codelineno-20-16" name="__codelineno-20-16" href="#__codelineno-20-16"></a>PCIe s:b:d.f                     : 0000:3B:00.3
<a id="__codelineno-20-17" name="__codelineno-20-17" href="#__codelineno-20-17"></a>Vendor Id                        : 0x8086
<a id="__codelineno-20-18" name="__codelineno-20-18" href="#__codelineno-20-18"></a>Device Id                        : 0xBCCF
<a id="__codelineno-20-19" name="__codelineno-20-19" href="#__codelineno-20-19"></a>SubVendor Id                     : 0x8086
<a id="__codelineno-20-20" name="__codelineno-20-20" href="#__codelineno-20-20"></a>SubDevice Id                     : 0x138D
<a id="__codelineno-20-21" name="__codelineno-20-21" href="#__codelineno-20-21"></a>Socket Id                        : 0x00
<a id="__codelineno-20-22" name="__codelineno-20-22" href="#__codelineno-20-22"></a>Accelerator GUID                 : 823c334c-98bf-11ea-bb37-0242ac130002
<a id="__codelineno-20-23" name="__codelineno-20-23" href="#__codelineno-20-23"></a>//****** PORT ******//
<a id="__codelineno-20-24" name="__codelineno-20-24" href="#__codelineno-20-24"></a>Object Id                        : 0x403B000000000000
<a id="__codelineno-20-25" name="__codelineno-20-25" href="#__codelineno-20-25"></a>PCIe s:b:d.f                     : 0000:3B:00.2
<a id="__codelineno-20-26" name="__codelineno-20-26" href="#__codelineno-20-26"></a>Vendor Id                        : 0x8086
<a id="__codelineno-20-27" name="__codelineno-20-27" href="#__codelineno-20-27"></a>Device Id                        : 0xBCCF
<a id="__codelineno-20-28" name="__codelineno-20-28" href="#__codelineno-20-28"></a>SubVendor Id                     : 0x8086
<a id="__codelineno-20-29" name="__codelineno-20-29" href="#__codelineno-20-29"></a>SubDevice Id                     : 0x138D
<a id="__codelineno-20-30" name="__codelineno-20-30" href="#__codelineno-20-30"></a>Socket Id                        : 0x00
<a id="__codelineno-20-31" name="__codelineno-20-31" href="#__codelineno-20-31"></a>Accelerator GUID                 : 8568ab4e-6ba5-4616-bb65-2a578330a8eb
<a id="__codelineno-20-32" name="__codelineno-20-32" href="#__codelineno-20-32"></a>//****** PORT ******//
<a id="__codelineno-20-33" name="__codelineno-20-33" href="#__codelineno-20-33"></a>Object Id                        : 0x203B000000000000
<a id="__codelineno-20-34" name="__codelineno-20-34" href="#__codelineno-20-34"></a>PCIe s:b:d.f                     : 0000:3B:00.1
<a id="__codelineno-20-35" name="__codelineno-20-35" href="#__codelineno-20-35"></a>Vendor Id                        : 0x8086
<a id="__codelineno-20-36" name="__codelineno-20-36" href="#__codelineno-20-36"></a>Device Id                        : 0xBCCF
<a id="__codelineno-20-37" name="__codelineno-20-37" href="#__codelineno-20-37"></a>SubVendor Id                     : 0x8086
<a id="__codelineno-20-38" name="__codelineno-20-38" href="#__codelineno-20-38"></a>SubDevice Id                     : 0x138D
<a id="__codelineno-20-39" name="__codelineno-20-39" href="#__codelineno-20-39"></a>Socket Id                        : 0x00
<a id="__codelineno-20-40" name="__codelineno-20-40" href="#__codelineno-20-40"></a>Accelerator GUID                 : 56e203e9-864f-49a7-b94b-12284c31e02b
</code></pre></div></p>
<p><a name="table-5-5"></a></p>
<h4 id="table-5-5-vf-to-hem-mappings">Table 5-5 VF to <abbr title="Host Exerciser Module, Host exercisers are used to exercise and characterize the various host-FPGA interactions, including Memory Mapped Input/Output (MMIO), data transfer from host to FPGA, PR, host to FPGA memory, etc.">HEM</abbr> Mappings</h4>
<table>
<thead>
<tr>
<th>VF BDF</th>
<th><abbr title="Host Exerciser Module, Host exercisers are used to exercise and characterize the various host-FPGA interactions, including Memory Mapped Input/Output (MMIO), data transfer from host to FPGA, PR, host to FPGA memory, etc.">HEM</abbr></th>
</tr>
</thead>
<tbody>
<tr>
<td>BBBB:DD.1</td>
<td>HE-LB</td>
</tr>
<tr>
<td>BBBB:DD.2</td>
<td>HE-MEM</td>
</tr>
<tr>
<td>BBBB:DD.3</td>
<td>He-HSSI</td>
</tr>
</tbody>
</table>
<p><strong>HE-MEM / HE-LB</strong></p>
<p>HE-LB is responsible for generating traffic with the intention of exercising the path from the <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> to the Host at full bandwidth. HE-MEM is used to exercise the DDR interface; data read from the host is written to DDR, and the same data is read from DDR before sending it back to the host. HE-MEM uses external DDR memory (i.e. EMIF) to store data. It has a customized version of the AVMM interface to communicate with the EMIF memory controller. Both exercisers rely on the user-space tool <code>host_exerciser</code>. The following commands are supported by the HE-LB/HE-MEM OPAE driver program. They may need to be run using <code>sudo</code> privileges, depending on your server configuration.</p>
<p>Basic operations:</p>
<p>```bash session
sudo host_exerciser lpbk</p>
<h1 id="output_7">output</h1>
<div class="highlight"><pre><span></span><code>starting test run, count of 1
</code></pre></div>
<p>API version: 1
<abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> clock: 250 MHz
Allocate SRC Buffer
Allocate DST Buffer
Allocate DSM Buffer
    Host Exerciser Performance Counter:
    Host Exerciser numReads: 1024
    Host Exerciser numWrites: 1025
    Host Exerciser numPendReads: 0
    Host Exerciser numPendWrites: 0
    Host Exerciser numPendEmifReads: 0
    Host Exerciser numPendEmifWrites: 0
    Number of clocks: 5342
    Total number of Reads sent: 1024
    Total number of Writes sent: 1024
    Bandwidth: 3.067 GB/s
    Test lpbk(1): PASS</p>
<p>sudo host_exerciser --mode lpbk lpbk</p>
<h1 id="output_8">output</h1>
<div class="highlight"><pre><span></span><code>starting test run, count of 1
</code></pre></div>
<p>API version: 1
<abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> clock: 250 MHz
Allocate SRC Buffer
Allocate DST Buffer
Allocate DSM Buffer
    Host Exerciser Performance Counter:
    Host Exerciser numReads: 1024
    Host Exerciser numWrites: 1025
    Host Exerciser numPendReads: 0
    Host Exerciser numPendWrites: 0
    Host Exerciser numPendEmifReads: 0
    Host Exerciser numPendEmifWrites: 0
    Number of clocks: 5358
    Total number of Reads sent: 1024
    Total number of Writes sent: 1024
    Bandwidth: 3.058 GB/s
    Test lpbk(1): PASS</p>
<p>sudo host_exerciser --mode write lpbk</p>
<h1 id="output_9">output</h1>
<div class="highlight"><pre><span></span><code>starting test run, count of 1
</code></pre></div>
<p>API version: 1
<abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> clock: 250 MHz
Allocate SRC Buffer
Allocate DST Buffer
Allocate DSM Buffer
    Host Exerciser Performance Counter:
    Host Exerciser numReads: 0
    Host Exerciser numWrites: 1025
    Host Exerciser numPendReads: 0
    Host Exerciser numPendWrites: 0
    Host Exerciser numPendEmifReads: 0
    Host Exerciser numPendEmifWrites: 0
    Number of clocks: 2592
    Total number of Reads sent: 0
    Total number of Writes sent: 1024
    Bandwidth: 6.321 GB/s
    Test lpbk(1): PASS</p>
<p>sudo host_exerciser --mode trput lpbk</p>
<h1 id="output_10">output</h1>
<div class="highlight"><pre><span></span><code>starting test run, count of 1
</code></pre></div>
<p>API version: 1
<abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> clock: 250 MHz
Allocate SRC Buffer
Allocate DST Buffer
Allocate DSM Buffer
    Host Exerciser Performance Counter:
    Host Exerciser numReads: 512
    Host Exerciser numWrites: 513
    Host Exerciser numPendReads: 0
    Host Exerciser numPendWrites: 0
    Host Exerciser numPendEmifReads: 0
    Host Exerciser numPendEmifWrites: 0
    Number of clocks: 3384
    Total number of Reads sent: 512
    Total number of Writes sent: 512
    Bandwidth: 4.842 GB/s
    Test lpbk(1): PASS</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>Number of cachelines per request 1, 2, and 4. The user may replace `--mode lpbk` with `read, write, trput`. The target `lpbk` can be replaced with `mem`:
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>```bash session
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>sudo host_exerciser --mode lpbk --cls cl_1 lpbk
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>#output
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>    starting test run, count of 1
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>API version: 1
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>AFU clock: 250 MHz
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>Allocate SRC Buffer
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a>Allocate DST Buffer
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>Allocate DSM Buffer
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>    Host Exerciser Performance Counter:
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>    Host Exerciser numReads: 1024
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a>    Host Exerciser numWrites: 1025
<a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>    Host Exerciser numPendReads: 0
<a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a>    Host Exerciser numPendWrites: 0
<a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a>    Host Exerciser numPendEmifReads: 0
<a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a>    Host Exerciser numPendEmifWrites: 0
<a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a>    Number of clocks: 5475
<a id="__codelineno-21-20" name="__codelineno-21-20" href="#__codelineno-21-20"></a>    Total number of Reads sent: 1024
<a id="__codelineno-21-21" name="__codelineno-21-21" href="#__codelineno-21-21"></a>    Total number of Writes sent: 1024
<a id="__codelineno-21-22" name="__codelineno-21-22" href="#__codelineno-21-22"></a>    Bandwidth: 2.993 GB/s
<a id="__codelineno-21-23" name="__codelineno-21-23" href="#__codelineno-21-23"></a>    Test lpbk(1): PASS
<a id="__codelineno-21-24" name="__codelineno-21-24" href="#__codelineno-21-24"></a>
<a id="__codelineno-21-25" name="__codelineno-21-25" href="#__codelineno-21-25"></a>
<a id="__codelineno-21-26" name="__codelineno-21-26" href="#__codelineno-21-26"></a>sudo host_exerciser --mode lpbk --cls cl_2 lpbk
<a id="__codelineno-21-27" name="__codelineno-21-27" href="#__codelineno-21-27"></a>#output
<a id="__codelineno-21-28" name="__codelineno-21-28" href="#__codelineno-21-28"></a>    starting test run, count of 1
<a id="__codelineno-21-29" name="__codelineno-21-29" href="#__codelineno-21-29"></a>API version: 1
<a id="__codelineno-21-30" name="__codelineno-21-30" href="#__codelineno-21-30"></a>AFU clock: 250 MHz
<a id="__codelineno-21-31" name="__codelineno-21-31" href="#__codelineno-21-31"></a>Allocate SRC Buffer
<a id="__codelineno-21-32" name="__codelineno-21-32" href="#__codelineno-21-32"></a>Allocate DST Buffer
<a id="__codelineno-21-33" name="__codelineno-21-33" href="#__codelineno-21-33"></a>Allocate DSM Buffer
<a id="__codelineno-21-34" name="__codelineno-21-34" href="#__codelineno-21-34"></a>    Host Exerciser Performance Counter:
<a id="__codelineno-21-35" name="__codelineno-21-35" href="#__codelineno-21-35"></a>    Host Exerciser numReads: 1024
<a id="__codelineno-21-36" name="__codelineno-21-36" href="#__codelineno-21-36"></a>    Host Exerciser numWrites: 1025
<a id="__codelineno-21-37" name="__codelineno-21-37" href="#__codelineno-21-37"></a>    Host Exerciser numPendReads: 0
<a id="__codelineno-21-38" name="__codelineno-21-38" href="#__codelineno-21-38"></a>    Host Exerciser numPendWrites: 0
<a id="__codelineno-21-39" name="__codelineno-21-39" href="#__codelineno-21-39"></a>    Host Exerciser numPendEmifReads: 0
<a id="__codelineno-21-40" name="__codelineno-21-40" href="#__codelineno-21-40"></a>    Host Exerciser numPendEmifWrites: 0
<a id="__codelineno-21-41" name="__codelineno-21-41" href="#__codelineno-21-41"></a>    Number of clocks: 5356
<a id="__codelineno-21-42" name="__codelineno-21-42" href="#__codelineno-21-42"></a>    Total number of Reads sent: 1024
<a id="__codelineno-21-43" name="__codelineno-21-43" href="#__codelineno-21-43"></a>    Total number of Writes sent: 1024
<a id="__codelineno-21-44" name="__codelineno-21-44" href="#__codelineno-21-44"></a>    Bandwidth: 3.059 GB/s
<a id="__codelineno-21-45" name="__codelineno-21-45" href="#__codelineno-21-45"></a>    Test lpbk(1): PASS
<a id="__codelineno-21-46" name="__codelineno-21-46" href="#__codelineno-21-46"></a>
<a id="__codelineno-21-47" name="__codelineno-21-47" href="#__codelineno-21-47"></a>
<a id="__codelineno-21-48" name="__codelineno-21-48" href="#__codelineno-21-48"></a>sudo host_exerciser --mode lpbk --cls cl_4 lpbk
<a id="__codelineno-21-49" name="__codelineno-21-49" href="#__codelineno-21-49"></a>#output
<a id="__codelineno-21-50" name="__codelineno-21-50" href="#__codelineno-21-50"></a>    starting test run, count of 1
<a id="__codelineno-21-51" name="__codelineno-21-51" href="#__codelineno-21-51"></a>API version: 1
<a id="__codelineno-21-52" name="__codelineno-21-52" href="#__codelineno-21-52"></a>AFU clock: 250 MHz
<a id="__codelineno-21-53" name="__codelineno-21-53" href="#__codelineno-21-53"></a>Allocate SRC Buffer
<a id="__codelineno-21-54" name="__codelineno-21-54" href="#__codelineno-21-54"></a>Allocate DST Buffer
<a id="__codelineno-21-55" name="__codelineno-21-55" href="#__codelineno-21-55"></a>Allocate DSM Buffer
<a id="__codelineno-21-56" name="__codelineno-21-56" href="#__codelineno-21-56"></a>    Host Exerciser Performance Counter:
<a id="__codelineno-21-57" name="__codelineno-21-57" href="#__codelineno-21-57"></a>    Host Exerciser numReads: 1024
<a id="__codelineno-21-58" name="__codelineno-21-58" href="#__codelineno-21-58"></a>    Host Exerciser numWrites: 1025
<a id="__codelineno-21-59" name="__codelineno-21-59" href="#__codelineno-21-59"></a>    Host Exerciser numPendReads: 0
<a id="__codelineno-21-60" name="__codelineno-21-60" href="#__codelineno-21-60"></a>    Host Exerciser numPendWrites: 0
<a id="__codelineno-21-61" name="__codelineno-21-61" href="#__codelineno-21-61"></a>    Host Exerciser numPendEmifReads: 0
<a id="__codelineno-21-62" name="__codelineno-21-62" href="#__codelineno-21-62"></a>    Host Exerciser numPendEmifWrites: 0
<a id="__codelineno-21-63" name="__codelineno-21-63" href="#__codelineno-21-63"></a>    Number of clocks: 4481
<a id="__codelineno-21-64" name="__codelineno-21-64" href="#__codelineno-21-64"></a>    Total number of Reads sent: 1024
<a id="__codelineno-21-65" name="__codelineno-21-65" href="#__codelineno-21-65"></a>    Total number of Writes sent: 1024
<a id="__codelineno-21-66" name="__codelineno-21-66" href="#__codelineno-21-66"></a>    Bandwidth: 3.656 GB/s
<a id="__codelineno-21-67" name="__codelineno-21-67" href="#__codelineno-21-67"></a>    Test lpbk(1): PASS
</code></pre></div>
<p>Interrupt tests (only valid for mode <code>mem</code>):</p>
<p>```bash session
sudo host_exerciser --interrupt 0 mem</p>
<h1 id="output_11">output</h1>
<div class="highlight"><pre><span></span><code>starting test run, count of 1
</code></pre></div>
<p>API version: 1
<abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> clock: 250 MHz
Allocate SRC Buffer
Allocate DST Buffer
Allocate DSM Buffer
Using Interrupts
    Host Exerciser Performance Counter:
    Host Exerciser numReads: 1024
    Host Exerciser numWrites: 1026
    Host Exerciser numPendReads: 0
    Host Exerciser numPendWrites: 0
    Host Exerciser numPendEmifReads: 0
    Host Exerciser numPendEmifWrites: 0
    Number of clocks: 5140
    Total number of Reads sent: 1024
    Total number of Writes sent: 1024
    Bandwidth: 3.188 GB/s
    Test mem(1): PASS</p>
<p>sudo host_exerciser --interrupt 1 mem</p>
<h1 id="output_12">output</h1>
<div class="highlight"><pre><span></span><code>starting test run, count of 1
</code></pre></div>
<p>API version: 1
<abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> clock: 250 MHz
Allocate SRC Buffer
Allocate DST Buffer
Allocate DSM Buffer
Using Interrupts
    Host Exerciser Performance Counter:
    Host Exerciser numReads: 1024
    Host Exerciser numWrites: 1026
    Host Exerciser numPendReads: 0
    Host Exerciser numPendWrites: 0
    Host Exerciser numPendEmifReads: 0
    Host Exerciser numPendEmifWrites: 0
    Number of clocks: 5079
    Total number of Reads sent: 1024
    Total number of Writes sent: 1024
    Bandwidth: 3.226 GB/s
    Test mem(1): PASS</p>
<p>sudo host_exerciser --interrupt 2 mem</p>
<h1 id="output_13">output</h1>
<div class="highlight"><pre><span></span><code>starting test run, count of 1
</code></pre></div>
<p>API version: 1
<abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> clock: 250 MHz
Allocate SRC Buffer
Allocate DST Buffer
Allocate DSM Buffer
Using Interrupts
    Host Exerciser Performance Counter:
    Host Exerciser numReads: 1024
    Host Exerciser numWrites: 1026
    Host Exerciser numPendReads: 0
    Host Exerciser numPendWrites: 0
    Host Exerciser numPendEmifReads: 0
    Host Exerciser numPendEmifWrites: 0
    Number of clocks: 5525
    Total number of Reads sent: 1024
    Total number of Writes sent: 1024
    Bandwidth: 3.439 GB/s
    Test mem(1): PASS</p>
<p>sudo host_exerciser --interrupt 3 mem</p>
<h1 id="output_14">output</h1>
<div class="highlight"><pre><span></span><code>starting test run, count of 1
</code></pre></div>
<p>API version: 1
<abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> clock: 250 MHz
Allocate SRC Buffer
Allocate DST Buffer
Allocate DSM Buffer
Using Interrupts
    Host Exerciser Performance Counter:
    Host Exerciser numReads: 1024
    Host Exerciser numWrites: 1026
    Host Exerciser numPendReads: 0
    Host Exerciser numPendWrites: 0
    Host Exerciser numPendEmifReads: 0
    Host Exerciser numPendEmifWrites: 0
    Number of clocks: 4735
    Total number of Reads sent: 1024
    Total number of Writes sent: 1024
    Bandwidth: 3.460 GB/s
    Test mem(1): PASS</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a>**HE-HSSI**
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>HE-HSSI is responsible for handling client-side ethernet traffic. It wraps the 10G ethernet AFU and includes a 10G traffic generator and checker. The user-space tool `hssi` exports a control interface to the HE-HSSI&#39;s AFU&#39;s packet generator logic. Context sensitive information is given by the `hssi --help` command. Help for the 10G specific test is given by `hssi hssi_10g --help` Example useage:
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>```bash session
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a>sudo hssi --pci-address 3b:00.3 hssi_10g --eth-ifc s10hssi0 --eth-loopback on --he-loopback=off  --num-packets 100
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a>#output
<a id="__codelineno-22-8" name="__codelineno-22-8" href="#__codelineno-22-8"></a>10G loopback test
<a id="__codelineno-22-9" name="__codelineno-22-9" href="#__codelineno-22-9"></a>  port: 0
<a id="__codelineno-22-10" name="__codelineno-22-10" href="#__codelineno-22-10"></a>  eth_loopback: on
<a id="__codelineno-22-11" name="__codelineno-22-11" href="#__codelineno-22-11"></a>  he_loopback: off
<a id="__codelineno-22-12" name="__codelineno-22-12" href="#__codelineno-22-12"></a>  num_packets: 100
<a id="__codelineno-22-13" name="__codelineno-22-13" href="#__codelineno-22-13"></a>  packet_length: 64
<a id="__codelineno-22-14" name="__codelineno-22-14" href="#__codelineno-22-14"></a>  src_address: 11:22:33:44:55:66
<a id="__codelineno-22-15" name="__codelineno-22-15" href="#__codelineno-22-15"></a>    (bits):  0x665544332211
<a id="__codelineno-22-16" name="__codelineno-22-16" href="#__codelineno-22-16"></a>  dest_address: 77:88:99:aa:bb:cc
<a id="__codelineno-22-17" name="__codelineno-22-17" href="#__codelineno-22-17"></a>    (bits): 0xccbbaa998877
<a id="__codelineno-22-18" name="__codelineno-22-18" href="#__codelineno-22-18"></a>  random_length: fixed
<a id="__codelineno-22-19" name="__codelineno-22-19" href="#__codelineno-22-19"></a>  random_payload: incremental
<a id="__codelineno-22-20" name="__codelineno-22-20" href="#__codelineno-22-20"></a>  rnd_seed0: 5eed0000
<a id="__codelineno-22-21" name="__codelineno-22-21" href="#__codelineno-22-21"></a>  rnd_seed1: 5eed0001
<a id="__codelineno-22-22" name="__codelineno-22-22" href="#__codelineno-22-22"></a>  rnd_seed2: 25eed
<a id="__codelineno-22-23" name="__codelineno-22-23" href="#__codelineno-22-23"></a>  eth: s10hssi0
</code></pre></div>
<p><a name="heading-6.0"></a></p>
<h2 id="60-compiling-ofs-fim"><strong>6.0 Compiling <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr></strong></h2>
<p>Pre-Compiled <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> binaries are at <a href="https://github.com/OFS/ofs-d5005/releases/tag/ofs-d5005-1.0.1"><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> 2022.3 release page</a> and to compile the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> for Intel® FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005 follow the below steps :</p>
<p>1) Compile <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> manually - Steps are provided in the developer guide to compile <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> and generate binaries. Refer to <a href="https://ofs.github.io/hw/d5005/dev_guides/fim_dev/ug_dev_fim_ofs_d5005/">Intel® FPGA Interface Manager Developer Guide: Open Stack for Intel® Stratix 10®</a>.</p>
<p>2) Compile <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> using evaluation script - The script guides you to the steps required for compilation via selecting options from the menu. Refer to <a href="https://github.com/OFS/ofs-d5005/tree/release/1.0.x/eval_scripts">evaluation script</a></p>
<p><a name="heading-7.0"></a></p>
<h2 id="70-programming-the-ofs-fim-and-bmc"><strong>7.0 Programming the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> and <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr></strong></h2>
<p>Instructions surrounding the compilation and simulation of the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> have fully moved into the <a href="https://ofs.github.io/hw/d5005/dev_guides/fim_dev/ug_dev_fim_ofs_d5005/">Intel® FPGA Interface Manager Developer Guide: Open Stack for Intel® Stratix 10®</a>.</p>
<p><a name="heading-7.1"></a></p>
<h3 id="71-programming-the-ofs-fim"><strong>7.1 Programming the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr></strong></h3>
<p>In order to program the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr>, both the <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> and <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> drivers need to be installed on the host system. Please complete the steps in sections <a href="#heading-4.0">4.0 <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Kernel Drivers</a> and <a href="#heading-5.0">5.0 OPAE Software Development Kit</a>. The <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> version can be identified using the OPAE tool <code>fpgainfo</code>. A sample output of this command is included below.</p>
<p>```bash session
sudo fpgainfo fme</p>
<h1 id="output_15">output</h1>
<p>Intel FPGA Programmable Acceleration Card D5005
Board Management Controller, MAX10 NIOS FW version: 2.0.13
Board Management Controller, MAX10 Build version: 2.0.13
//<strong><em>*</em>* <abbr title="FPGA Management Engine, Provides a way to manage the platform and enable acceleration functions on the platform.">FME</abbr> </strong>****//
Object Id                        : 0xF000000
PCIe s:b:d.f                     : 0000:3B:00.0
Vendor Id                        : 0x8086
Device Id                        : 0xBCCE
SubVendor Id                     : 0x8086
SubDevice Id                     : 0x138D
Socket Id                        : 0x00
Ports Num                        : 01
Bitstream Id                     : 288511861987640872
Bitstream Version                : 4.0.1
Pr Interface Id                  : d51533ad-aee6-5dab-80fb-a44bbf579b68
Boot Page                        : user
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>Use the value under `PR Interface ID` to identify that FIM that has been loaded. Refer to the table below for a list of previous FIM releases.
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a> Please 
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a>&lt;a name=&quot;table-7-1&quot;&gt;&lt;/a&gt;
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a>#### Table 7-1 Previous FIM Releases
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a>| PR Release | PR Interface ID |
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a>|---------|---------|
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a>| 2022.2 (tag 1.3.0)                         | bf531bcf-a896-5171-ab31-601a4ab754b6                    |
<a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a>| 2022.1 Beta (tag: 1.2.0-beta)              | 2fae83fc-8568-53aa-9157-8f75e9c0ba92                   |
<a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a>| OFS 2.1 Beta (tag: 1.1.0-beta)             | 99160d37e42a 3f8b586f-c275-594c-92e2-d9f2c23e94d1                    |
<a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a>| OFS 1.0 (tag: ofs-1.0.0)                   | b5f6a71e-daec-59c3-a43a-85567b51fd3f |
<a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a>| Intel Acceleration Stack for Intel® FPGA PAC D5005 2.0.1 | 9346116d-a52d-5ca8-b06a-a9a389ef7c8d |
<a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a>
<a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a>The Beta release of the OFS software depends on the corresponding Beta release of the FIM. If the user&#39;s card does not report a PR Interface ID which matches the above table, then a new FIM will need to be programmed.
<a id="__codelineno-23-16" name="__codelineno-23-16" href="#__codelineno-23-16"></a>
<a id="__codelineno-23-17" name="__codelineno-23-17" href="#__codelineno-23-17"></a>&lt;a name=&quot;heading-7.1.1&quot;&gt;&lt;/a&gt;
<a id="__codelineno-23-18" name="__codelineno-23-18" href="#__codelineno-23-18"></a>
<a id="__codelineno-23-19" name="__codelineno-23-19" href="#__codelineno-23-19"></a>#### **7.1.1 Programming the FIM**
<a id="__codelineno-23-20" name="__codelineno-23-20" href="#__codelineno-23-20"></a>
<a id="__codelineno-23-21" name="__codelineno-23-21" href="#__codelineno-23-21"></a>**1.** Download the file **d5005_page1_unsigned.bin** from [OFS 2022.3 release page](https://github.com/OFS/ofs-d5005/releases/tag/ofs-d5005-1.0.1).
<a id="__codelineno-23-22" name="__codelineno-23-22" href="#__codelineno-23-22"></a>
<a id="__codelineno-23-23" name="__codelineno-23-23" href="#__codelineno-23-23"></a>**2.** Run `PACSign` to create an unsigned image with added header for use by fpgasupdate
<a id="__codelineno-23-24" name="__codelineno-23-24" href="#__codelineno-23-24"></a>
<a id="__codelineno-23-25" name="__codelineno-23-25" href="#__codelineno-23-25"></a>```bash session
<a id="__codelineno-23-26" name="__codelineno-23-26" href="#__codelineno-23-26"></a>PACSign SR -y -v -t UPDATE -s 0 -H openssl_manager -i d5005_page1_unsigned.bin -o d5005_PACsigned_unsigned.bin
</code></pre></div></p>
<p><strong>3.</strong> Run <code>fpgasupdate</code> to load the image into the user location of the Intel® FPGA <abbr title="Programmable Acceleration Card: FPGA based Accelerator card">PAC</abbr> D5005 FPGA flash, NOTE: use "sudo fpgainfo fme" command to find the PCIe address for your card.</p>
<p>```bash session
sudo fpgasupdate d5005_PACsigned_unsigned.bin 3B:00.0
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>**4.** Run `RSU` command, and after powercycle your host.
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a>```bash session
<a id="__codelineno-24-4" name="__codelineno-24-4" href="#__codelineno-24-4"></a>sudo rsu bmcimg 0000:3B:00.0
</code></pre></div></p>
<p><a name="heading-7.2"></a></p>
<h3 id="72-programming-the-bmc"><strong>7.2 Programming the <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr></strong></h3>
<p><strong>1.</strong> Download intel-fpga-bmc images(To download <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> Stratix 10 <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> binaries contact Intel Technical Sales Representative)</p>
<p><strong>2.</strong> The file <code>unsigned_bmc_fw.bin</code> has the newly binary format. This bitstream is programmed with remote system update (<abbr title="Remote System Update, A Remote System Update operation sends an instruction to the Intel FPGA PAC D5005 device that triggers a power cycle of the card only, forcing reconfiguration.">RSU</abbr>) and the bitstream must be signed with PACSign tool to generate.</p>
<p><strong>3.</strong> Run <code>PACSign</code> to create an unsigned image with added header for use by fpgasupdate</p>
<p>```bash session
PACSign <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> -y -v -t UPDATE -s 0 -H openssl_manager -i unsigned_bmc_fw.bin -o PACsigned_unsigned_bmc_fw.bin</p>
<h1 id="output_16">output</h1>
<p>2022-04-22 03:07:05,626 - PACSign.log - INFO - OpenSSL version "OpenSSL 1.1.1k  FIPS 25 Mar 2021" matches "1.1.1"
2022-04-22 03:07:05,648 - PACSign.log - INFO - Bitstream not previously signed
2022-04-22 03:07:05,648 - PACSign.log - INFO - platform value is '688128'
2022-04-22 03:07:05,745 - PACSign.log - INFO - Starting Block 0 creation
2022-04-22 03:07:05,745 - PACSign.log - INFO - Calculating SHA256
2022-04-22 03:07:05,747 - PACSign.log - INFO - Calculating SHA384
2022-04-22 03:07:05,749 - PACSign.log - INFO - Done with Block 0
2022-04-22 03:07:05,749 - PACSign.log - INFO - Starting Root Entry creation
2022-04-22 03:07:05,749 - PACSign.log - INFO - Calculating Root Entry SHA
2022-04-22 03:07:05,749 - PACSign.log - INFO - Starting Code Signing Key Entry creation
2022-04-22 03:07:05,749 - PACSign.log - INFO - Calculating Code Signing Key Entry SHA
2022-04-22 03:07:05,749 - PACSign.log - INFO - Code Signing Key Entry done
2022-04-22 03:07:05,749 - PACSign.log - INFO - Starting Block 0 Entry creation
2022-04-22 03:07:05,749 - PACSign.log - INFO - Calculating Block 0 Entry SHA
2022-04-22 03:07:05,749 - PACSign.log - INFO - Block 0 Entry done
2022-04-22 03:07:05,749 - PACSign.log - INFO - Starting Block 1 creation
2022-04-22 03:07:05,750 - PACSign.log - INFO - Block 1 done
2022-04-22 03:07:05,757 - PACSign.log - INFO - Writing blocks to file
2022-04-22 03:07:05,758 - PACSign.log - INFO - Processing of file 'PACsigned_unsigned_bmc_fw.bin' complete
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>**4.** Run `fpgasupdate` to perform an upgrade of the BMC.
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>```bash session
<a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a>sudo fpgasupdate PACsigned_unsigned_bmc_fw.bin 3B:00.0
<a id="__codelineno-25-5" name="__codelineno-25-5" href="#__codelineno-25-5"></a>#output
<a id="__codelineno-25-6" name="__codelineno-25-6" href="#__codelineno-25-6"></a>[2022-04-22 03:08:34.15] [WARNING ] Update starting. Please do not interrupt.
<a id="__codelineno-25-7" name="__codelineno-25-7" href="#__codelineno-25-7"></a>[2022-04-22 03:08:34.15] [INFO    ] updating from file pacsign_unsigned_bmc_fw.bin with size 819968
<a id="__codelineno-25-8" name="__codelineno-25-8" href="#__codelineno-25-8"></a>[2022-04-22 03:08:34.15] [INFO    ] waiting for idle
<a id="__codelineno-25-9" name="__codelineno-25-9" href="#__codelineno-25-9"></a>[2022-04-22 03:08:34.15] [INFO    ] preparing image file
<a id="__codelineno-25-10" name="__codelineno-25-10" href="#__codelineno-25-10"></a>[2022-04-22 03:09:02.18] [INFO    ] writing image file
<a id="__codelineno-25-11" name="__codelineno-25-11" href="#__codelineno-25-11"></a>(100%) [████████████████████] [819968/819968 bytes][Elapsed Time: 0:00:13.01]
<a id="__codelineno-25-12" name="__codelineno-25-12" href="#__codelineno-25-12"></a>[2022-04-22 03:09:15.20] [INFO    ] programming image file
<a id="__codelineno-25-13" name="__codelineno-25-13" href="#__codelineno-25-13"></a>(100%) [████████████████████][Elapsed Time: 0:00:29.03]
<a id="__codelineno-25-14" name="__codelineno-25-14" href="#__codelineno-25-14"></a>[2022-04-22 03:09:44.24] [INFO    ] update of 0000:3B:00.0 complete
<a id="__codelineno-25-15" name="__codelineno-25-15" href="#__codelineno-25-15"></a>[2022-04-22 03:09:44.24] [INFO    ] Secure update OK
<a id="__codelineno-25-16" name="__codelineno-25-16" href="#__codelineno-25-16"></a>[2022-04-22 03:09:44.24] [INFO    ] Total time: 0:01:10.08
</code></pre></div></p>
<h2 id="notices-disclaimers">Notices &amp; Disclaimers</h2>
<p>Intel<sup>&reg;</sup> technologies may require enabled hardware, software or service activation.
No product or component can be absolutely secure. 
Performance varies by use, configuration and other factors.
Your costs and results may vary. 
You may not use or facilitate the use of this document in connection with any infringement or other legal analysis concerning Intel products described herein. You agree to grant Intel a non-exclusive, royalty-free license to any patent claim thereafter drafted which includes subject matter disclosed herein.
No license (express or implied, by estoppel or otherwise) to any intellectual property rights is granted by this document, with the sole exception that you may publish an unmodified copy. You may create software implementations based on this document and in compliance with the foregoing that are intended to execute on the Intel product(s) referenced in this document. No rights are granted to create modifications or derivatives of this document.
The products described may contain design defects or errors known as errata which may cause the product to deviate from published specifications.  Current characterized errata are available on request.
Intel disclaims all express and implied warranties, including without limitation, the implied warranties of merchantability, fitness for a particular purpose, and non-infringement, as well as any warranty arising from course of performance, course of dealing, or usage in trade.
You are responsible for safety of the overall system, including compliance with applicable safety-related requirements or standards. 
<sup>&copy;</sup> Intel Corporation.  Intel, the Intel logo, and other Intel marks are trademarks of Intel Corporation or its subsidiaries.  Other names and brands may be claimed as the property of others.   </p>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.top", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.2a6f1dda.min.js"></script>
      
    
  </body>
</html>