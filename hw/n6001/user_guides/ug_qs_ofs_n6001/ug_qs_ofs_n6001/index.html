
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../ug_eval_ofs_n6001/ug_eval_script_ofs_n6001/">
      
      
        <link rel="next" href="../../../../common/reference_manual/ofs_sw/mnl_sw_ofs/">
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.9">
    
    
      
        <title>Getting Started - OFS</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.85bb2934.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started-guide-open-fpga-stack-for-intel-agilex-fpgas-targeting-the-intel-fpga-smartnic-n6001-pl" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="OFS" class="md-header__button md-logo" aria-label="OFS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OFS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting Started
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ofs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ofs
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../../.." class="md-tabs__link">
      Welcome
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../d5005/user_guides/ug_eval_ofs_d5005/ug_eval_script_ofs_d5005/" class="md-tabs__link">
        Stratix 10 PCIe Attach OFS
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../ug_eval_ofs_n6001/ug_eval_script_ofs_n6001/" class="md-tabs__link md-tabs__link--active">
        Agilex PCIe Attach OFS
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../f2000x/user_guides/ug_eval_ofs/ug_eval_script_ofs_f2000x/" class="md-tabs__link">
        Agilex SoC Attach OFS
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../common/user_guides/oneapi_asp/ug_oneapi_asp/" class="md-tabs__link">
        oneAPI
      </a>
    </li>
  

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../sw/fpga_api/quick_start/readme/" class="md-tabs__link">
        OFS Software
      </a>
    </li>
  

  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="OFS" class="md-nav__button md-logo" aria-label="OFS" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    OFS
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ofs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ofs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        Welcome
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Stratix 10 PCIe Attach OFS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Stratix 10 PCIe Attach OFS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../d5005/user_guides/ug_eval_ofs_d5005/ug_eval_script_ofs_d5005/" class="md-nav__link">
        Quick Start Evaluation Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../d5005/user_guides/ug_qs_ofs_d5005/ug_qs_ofs_d5005/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../common/reference_manual/ofs_sw/mnl_sw_ofs/" class="md-nav__link">
        Software Reference Manual
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../d5005/reference_manuals/ofs_fim/mnl_fim_ofs_d5005/" class="md-nav__link">
        FPGA Interface Manager Technical Reference Manual
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../d5005/dev_guides/fim_dev/ug_dev_fim_ofs_d5005/" class="md-nav__link">
        FPGA Interface Manager Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../d5005/dev_guides/afu_dev/ug_dev_afu_d5005/" class="md-nav__link">
        AFU Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../d5005/user_guides/ug_sim_ofs_d5005/ug_sim_ofs_d5005/" class="md-nav__link">
        Simulation User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../common/user_guides/ug_docker/ug_docker/" class="md-nav__link">
        Docker User guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../common/user_guides/ug_kvm/ug_kvm/" class="md-nav__link">
        KVM User guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../d5005/doc_modules/Glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Agilex PCIe Attach OFS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Agilex PCIe Attach OFS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ug_eval_ofs_n6001/ug_eval_script_ofs_n6001/" class="md-nav__link">
        Quick Start Evaluation Guide
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Getting Started
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#10-introduction" class="md-nav__link">
    1.0 Introduction
  </a>
  
    <nav class="md-nav" aria-label="1.0 Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-about-this-document" class="md-nav__link">
    1.1 About This Document
  </a>
  
    <nav class="md-nav" aria-label="1.1 About This Document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-1-installing-the-opae-sdk" class="md-nav__link">
    Diagram 1: Installing the OPAE SDK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagram-2-installing-the-linux-dfl-drivers" class="md-nav__link">
    Diagram 2: Installing the Linux DFL Drivers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagram-3-bringing-up-the-intel-fpga-smartnic-n6001-pl" class="md-nav__link">
    Diagram 3: Bringing up the Intel® FPGA SmartNIC N6001-PL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-introduction-to-ofs" class="md-nav__link">
    1.2 Introduction to OFS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-intended-audience" class="md-nav__link">
    1.3 Intended Audience
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-reference-documents" class="md-nav__link">
    1.4 Reference Documents
  </a>
  
    <nav class="md-nav" aria-label="1.4 Reference Documents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-2-reference-documents" class="md-nav__link">
    Table 2: Reference Documents
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15-component-version-summary" class="md-nav__link">
    1.5 Component Version Summary
  </a>
  
    <nav class="md-nav" aria-label="1.5 Component Version Summary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-3-hardware-bkc" class="md-nav__link">
    Table 3: Hardware BKC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#table-4-software-version-summary" class="md-nav__link">
    Table 4: Software Version Summary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#table-5-intel-n60001-pl-fpga-smartnic-platform-sku-mapping" class="md-nav__link">
    Table 5: Intel N6000/1-PL FPGA SmartNIC Platform SKU Mapping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#table-6-intel-fpga-smartnic-n6001-pl-programmable-component-version-summary" class="md-nav__link">
    Table 6: Intel® FPGA SmartNIC N6001-PL Programmable Component Version Summary
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16-initial-server-setup" class="md-nav__link">
    1.6 Initial Server Setup
  </a>
  
    <nav class="md-nav" aria-label="1.6 Initial Server Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#161-server-bmc-and-bios-updates" class="md-nav__link">
    1.6.1 Server BMC and BIOS Updates
  </a>
  
    <nav class="md-nav" aria-label="1.6.1 Server BMC and BIOS Updates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-7-supermicro-server-bmc-bkc" class="md-nav__link">
    Table 7: Supermicro Server BMC BKC
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#162-server-fan-speed" class="md-nav__link">
    1.6.2 Server Fan Speed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#163-server-bios-configuration-changes" class="md-nav__link">
    1.6.3 Server BIOS Configuration Changes
  </a>
  
    <nav class="md-nav" aria-label="1.6.3 Server BIOS Configuration Changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1631-enabling-intel-vt-d-technology" class="md-nav__link">
    1.6.3.1 Enabling Intel VT-d Technology
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1632-pcie-slot-mapping" class="md-nav__link">
    1.6.3.2 PCie Slot Mapping
  </a>
  
    <nav class="md-nav" aria-label="1.6.3.2 PCie Slot Mapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-8-pcie-slot-mapping" class="md-nav__link">
    Table 8: PCIe Slot Mapping
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#164-intel-fpga-smartnic-n6001-pl-installation-procedure" class="md-nav__link">
    1.6.4 Intel® FPGA SmartNIC N6001-PL Installation Procedure
  </a>
  
    <nav class="md-nav" aria-label="1.6.4 Intel® FPGA SmartNIC N6001-PL Installation Procedure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-9-intel-fpga-smartnic-n6001-pl-installation-procedure" class="md-nav__link">
    Table 9: Intel® FPGA SmartNIC N6001-PL Installation Procedure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#165-intel-fpga-smartnic-n6001-pl-removal-procedure" class="md-nav__link">
    1.6.5 Intel® FPGA SmartNIC N6001-PL Removal Procedure
  </a>
  
    <nav class="md-nav" aria-label="1.6.5 Intel® FPGA SmartNIC N6001-PL Removal Procedure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-10-intel-fpga-smartnic-n6001-pl-removal-procedure" class="md-nav__link">
    Table 10: Intel® FPGA SmartNIC N6001-PL Removal Procedure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#20-ofs-stack-architecture-overview-for-reference-platform" class="md-nav__link">
    2.0 OFS Stack Architecture Overview for Reference Platform
  </a>
  
    <nav class="md-nav" aria-label="2.0 OFS Stack Architecture Overview for Reference Platform">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-hardware-components" class="md-nav__link">
    2.1 Hardware Components
  </a>
  
    <nav class="md-nav" aria-label="2.1 Hardware Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211-fpga-interface-manager" class="md-nav__link">
    2.1.1 FPGA Interface Manager
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-afu" class="md-nav__link">
    *.1.2 AFU
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-ofs-software-overview" class="md-nav__link">
    2.2 OFS Software Overview
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#30-ofs-dfl-kernel-drivers" class="md-nav__link">
    3.0 OFS DFL Kernel Drivers
  </a>
  
    <nav class="md-nav" aria-label="3.0 OFS DFL Kernel Drivers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-ofs-dfl-kernel-driver-environment-setup" class="md-nav__link">
    3.1 OFS DFL Kernel Driver Environment Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-building-and-installing-the-ofs-dfl-kernel-drivers-from-source" class="md-nav__link">
    3.2 Building and Installing the OFS DFL Kernel Drivers from Source
  </a>
  
    <nav class="md-nav" aria-label="3.2 Building and Installing the OFS DFL Kernel Drivers from Source">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-11-dfl-driver-modules" class="md-nav__link">
    Table 11: DFL Driver Modules
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-installing-the-ofs-dfl-kernel-drivers-from-pre-built-packages" class="md-nav__link">
    3.3 Installing the OFS DFL Kernel Drivers from Pre-Built Packages
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#40-opae-software-development-kit" class="md-nav__link">
    4.0 OPAE Software Development Kit
  </a>
  
    <nav class="md-nav" aria-label="4.0 OPAE Software Development Kit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-opae-sdk-build-environment-setup" class="md-nav__link">
    4.1 OPAE SDK Build Environment Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-building-and-installing-the-opae-sdk-by-script" class="md-nav__link">
    4.2 Building and Installing the OPAE SDK by Script
  </a>
  
    <nav class="md-nav" aria-label="4.2 Building and Installing the OPAE SDK by Script">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-12-opae-package-description" class="md-nav__link">
    Table 12: OPAE Package Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-building-and-installing-the-opae-sdk-by-opae-source-code" class="md-nav__link">
    4.3 Building and Installing the OPAE SDK by OPAE source code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-opae-tools-overview" class="md-nav__link">
    4.4 OPAE Tools Overview
  </a>
  
    <nav class="md-nav" aria-label="4.4 OPAE Tools Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#441-board-management-with-fpgainfo" class="md-nav__link">
    4.4.1 Board Management with fpgainfo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#432-sensor-monitoring-with-fpgad" class="md-nav__link">
    4.3.2 Sensor Monitoring with fpgad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#433-updating-with-fpgasupdate" class="md-nav__link">
    4.3.3 Updating with fpgasupdate
  </a>
  
    <nav class="md-nav" aria-label="4.3.3 Updating with fpgasupdate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-13-fim-version-summary-for-ofs-20231-release" class="md-nav__link">
    Table 13: FIM Version Summary for OFS 2023.1 Release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#table-14-bmc-version-summary-for-ofs-20231-release" class="md-nav__link">
    Table 14: BMC Version Summary for OFS 2023.1 Release
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#434-signing-images-with-pacsign" class="md-nav__link">
    4.3.4 Signing Images with PACSign
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#435-loading-images-with-rsu" class="md-nav__link">
    4.3.5 Loading Images with rsu
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#436-verify-fme-interrupts-with-hello_events" class="md-nav__link">
    4.3.6 Verify FME Interrupts with hello_events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#437-host-exercisor-modules" class="md-nav__link">
    4.3.7 Host Exercisor Modules
  </a>
  
    <nav class="md-nav" aria-label="4.3.7 Host Exercisor Modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-15-module-pfvf-mappings" class="md-nav__link">
    Table 15: Module PF/VF Mappings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4371-he-mem-he-lb" class="md-nav__link">
    4.3.7.1 HE-MEM / HE-LB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4372-traffic-generator-afu-test-application" class="md-nav__link">
    4.3.7.2 Traffic Generator AFU Test Application
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4373-he-hssi" class="md-nav__link">
    4.3.7.3 HE-HSSI
  </a>
  
    <nav class="md-nav" aria-label="4.3.7.3 HE-HSSI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-16-accelerator-pfvf-and-guid-mappings" class="md-nav__link">
    Table 16: Accelerator PF/VF and GUID Mappings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#50-upgrading-the-intel-fpga-smartnic-n6001-pl-with-20231-version-of-the-bmc-and-fim" class="md-nav__link">
    5.0 Upgrading the Intel® FPGA SmartNIC N6001-PL with 2023.1 Version of the BMC and FIM
  </a>
  
    <nav class="md-nav" aria-label="5.0 Upgrading the Intel® FPGA SmartNIC N6001-PL with 2023.1 Version of the BMC and FIM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-17-fim-version-summary-for-intel-ofs-20231-release" class="md-nav__link">
    Table 17: FIM Version Summary for Intel OFS 2023.1 Release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#table-18-bmc-version-summary-for-intel-ofs-20231-release" class="md-nav__link">
    Table 18: BMC Version Summary for Intel OFS 2023.1 Release
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notices-disclaimers" class="md-nav__link">
    Notices &amp; Disclaimers
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../common/reference_manual/ofs_sw/mnl_sw_ofs/" class="md-nav__link">
        Software Reference Manual
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference_manuals/ofs_fim/mnl_fim_ofs_n6001/" class="md-nav__link">
        FPGA Interface Manager Technical Reference Manual
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/fim_dev/ug_dev_fim_ofs_n6001/" class="md-nav__link">
        FPGA Interface Manager Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/afu_dev/ug_dev_afu_ofs_n6001/" class="md-nav__link">
        AFU Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../dev_guides/hps_dev/hps_developer_ug/" class="md-nav__link">
        HPS Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ug_sim_ofs_n6001/ug_sim_ofs_n6001/" class="md-nav__link">
        Simulation User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../common/user_guides/ug_docker/ug_docker/" class="md-nav__link">
        Docker User guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../common/user_guides/ug_kvm/ug_kvm/" class="md-nav__link">
        KVM User guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../doc_modules/Glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Agilex SoC Attach OFS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Agilex SoC Attach OFS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f2000x/user_guides/ug_eval_ofs/ug_eval_script_ofs_f2000x/" class="md-nav__link">
        Quick Start Evaluation Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f2000x/user_guides/ug_qs_ofs_f2000x/ug_qs_ofs_f2000x/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../common/reference_manual/ofs_sw/mnl_sw_ofs/" class="md-nav__link">
        Software Reference Manual
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f2000x/reference_manuals/ofs_fim/mnl_fim_ofs/" class="md-nav__link">
        FPGA Interface Manager Technical Reference Manual
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f2000x/dev_guides/fim_dev/ug_dev_fim_ofs_f2000x/" class="md-nav__link">
        FPGA Interface Manager Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f2000x/dev_guides/afu_dev/ug_dev_afu_ofs_f2000x/" class="md-nav__link">
        AFU Developer Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f2000x/user_guides/ug_sim_ofs/ug_sim_ofs/" class="md-nav__link">
        Simulation User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../common/user_guides/ug_docker/ug_docker/" class="md-nav__link">
        Docker User guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../common/user_guides/ug_kvm/ug_kvm/" class="md-nav__link">
        KVM User guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../f2000x/doc_modules/Glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          oneAPI
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          oneAPI
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../common/user_guides/oneapi_asp/ug_oneapi_asp/" class="md-nav__link">
        oneAPI ASP Getting Started User Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../common/reference_manual/oneapi_asp/oneapi_asp_ref_mnl/" class="md-nav__link">
        oneAPI Accelerator Support Package(ASP) Reference Manual
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          OFS Software
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          OFS Software
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_1" >
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6_1" id="__nav_6_1_label" tabindex="0">
          OPAE USER GUIDES
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          OPAE USER GUIDES
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_api/quick_start/readme/" class="md-nav__link">
        Quick Start Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/install_guide/installation_guide/" class="md-nav__link">
        OPAE Installation Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_api/prog_guide/readme/" class="md-nav__link">
        OPAE C API Programming Guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/pyopae/python_bindings/" class="md-nav__link">
        OPAE Python Bindings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_api/plug_guide/readme/" class="md-nav__link">
        OPAE Plugin Developers Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_2" >
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6_2" id="__nav_6_2_label" tabindex="0">
          OPAE LIBRARIES
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_2">
          <span class="md-nav__icon md-icon"></span>
          OPAE LIBRARIES
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_api/fpga_api/" class="md-nav__link">
        OPAE C API Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_api/fpga_cxx_api/" class="md-nav__link">
        OPAE C++ Core API Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_api/fpga_python_api/" class="md-nav__link">
        OPAE Python API Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_api/plug_guide/readme/" class="md-nav__link">
        OPAE Plugin Developers Guide
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_3" >
      
      
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6_3" id="__nav_6_3_label" tabindex="0">
          OPAE LINUX KERNEL DRIVERS
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_3">
          <span class="md-nav__icon md-icon"></span>
          OPAE LINUX KERNEL DRIVERS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/drv_arch/drv_arch/" class="md-nav__link">
        Open Programmable Accelerator Engine (OPAE) Linux Device Driver Architecture
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../../../sw/fpga_tools/fpgadiag/">OPAE FPGA TOOLS</a>
          
            <label for="__nav_6_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6_4">
          <span class="md-nav__icon md-icon"></span>
          OPAE FPGA TOOLS
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/fpgaconf/fpgaconf/" class="md-nav__link">
        fpgaconf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/fpgainfo/fpgainfo/" class="md-nav__link">
        fpgainfo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/fpgasupdate/fpgasupdate/" class="md-nav__link">
        fpgasupdate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/mmlink/mmlink/" class="md-nav__link">
        mmlink
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/packager/packager/" class="md-nav__link">
        packager
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/userclk/userclk/" class="md-nav__link">
        userclk
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/hssi/hssi/" class="md-nav__link">
        hssi
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/pci_device/pci_device/" class="md-nav__link">
        pci_device
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/opae.io/opae.io/" class="md-nav__link">
        opae.io
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/rsu/rsu/" class="md-nav__link">
        rsu
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/host_exerciser/host_exerciser/" class="md-nav__link">
        host_exerciser
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/hssi_ethernet/hssistats/" class="md-nav__link">
        HSSI ethernet statistics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/hssi_ethernet/hssimac/" class="md-nav__link">
        HSSI ethernet mac
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/hssi_ethernet/hssiloopback/" class="md-nav__link">
        HSSI ethernet loopback
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/mem_tg/mem_tg/" class="md-nav__link">
        mem_tg
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/vabtool/vabtool/" class="md-nav__link">
        vabtool
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/opaevfio/opaevfio/" class="md-nav__link">
        opaevfio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/ofs.uio/ofs.uio/" class="md-nav__link">
        ofs.uio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/opaeuio/opaeuio/" class="md-nav__link">
        opaeuio
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../sw/fpga_tools/fpgad/fpgad/" class="md-nav__link">
        fpgad
      </a>
    </li>
  

            
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#10-introduction" class="md-nav__link">
    1.0 Introduction
  </a>
  
    <nav class="md-nav" aria-label="1.0 Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-about-this-document" class="md-nav__link">
    1.1 About This Document
  </a>
  
    <nav class="md-nav" aria-label="1.1 About This Document">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#diagram-1-installing-the-opae-sdk" class="md-nav__link">
    Diagram 1: Installing the OPAE SDK
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagram-2-installing-the-linux-dfl-drivers" class="md-nav__link">
    Diagram 2: Installing the Linux DFL Drivers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#diagram-3-bringing-up-the-intel-fpga-smartnic-n6001-pl" class="md-nav__link">
    Diagram 3: Bringing up the Intel® FPGA SmartNIC N6001-PL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-introduction-to-ofs" class="md-nav__link">
    1.2 Introduction to OFS
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13-intended-audience" class="md-nav__link">
    1.3 Intended Audience
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-reference-documents" class="md-nav__link">
    1.4 Reference Documents
  </a>
  
    <nav class="md-nav" aria-label="1.4 Reference Documents">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-2-reference-documents" class="md-nav__link">
    Table 2: Reference Documents
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15-component-version-summary" class="md-nav__link">
    1.5 Component Version Summary
  </a>
  
    <nav class="md-nav" aria-label="1.5 Component Version Summary">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-3-hardware-bkc" class="md-nav__link">
    Table 3: Hardware BKC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#table-4-software-version-summary" class="md-nav__link">
    Table 4: Software Version Summary
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#table-5-intel-n60001-pl-fpga-smartnic-platform-sku-mapping" class="md-nav__link">
    Table 5: Intel N6000/1-PL FPGA SmartNIC Platform SKU Mapping
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#table-6-intel-fpga-smartnic-n6001-pl-programmable-component-version-summary" class="md-nav__link">
    Table 6: Intel® FPGA SmartNIC N6001-PL Programmable Component Version Summary
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16-initial-server-setup" class="md-nav__link">
    1.6 Initial Server Setup
  </a>
  
    <nav class="md-nav" aria-label="1.6 Initial Server Setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#161-server-bmc-and-bios-updates" class="md-nav__link">
    1.6.1 Server BMC and BIOS Updates
  </a>
  
    <nav class="md-nav" aria-label="1.6.1 Server BMC and BIOS Updates">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-7-supermicro-server-bmc-bkc" class="md-nav__link">
    Table 7: Supermicro Server BMC BKC
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#162-server-fan-speed" class="md-nav__link">
    1.6.2 Server Fan Speed
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#163-server-bios-configuration-changes" class="md-nav__link">
    1.6.3 Server BIOS Configuration Changes
  </a>
  
    <nav class="md-nav" aria-label="1.6.3 Server BIOS Configuration Changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1631-enabling-intel-vt-d-technology" class="md-nav__link">
    1.6.3.1 Enabling Intel VT-d Technology
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#1632-pcie-slot-mapping" class="md-nav__link">
    1.6.3.2 PCie Slot Mapping
  </a>
  
    <nav class="md-nav" aria-label="1.6.3.2 PCie Slot Mapping">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-8-pcie-slot-mapping" class="md-nav__link">
    Table 8: PCIe Slot Mapping
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#164-intel-fpga-smartnic-n6001-pl-installation-procedure" class="md-nav__link">
    1.6.4 Intel® FPGA SmartNIC N6001-PL Installation Procedure
  </a>
  
    <nav class="md-nav" aria-label="1.6.4 Intel® FPGA SmartNIC N6001-PL Installation Procedure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-9-intel-fpga-smartnic-n6001-pl-installation-procedure" class="md-nav__link">
    Table 9: Intel® FPGA SmartNIC N6001-PL Installation Procedure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#165-intel-fpga-smartnic-n6001-pl-removal-procedure" class="md-nav__link">
    1.6.5 Intel® FPGA SmartNIC N6001-PL Removal Procedure
  </a>
  
    <nav class="md-nav" aria-label="1.6.5 Intel® FPGA SmartNIC N6001-PL Removal Procedure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-10-intel-fpga-smartnic-n6001-pl-removal-procedure" class="md-nav__link">
    Table 10: Intel® FPGA SmartNIC N6001-PL Removal Procedure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#20-ofs-stack-architecture-overview-for-reference-platform" class="md-nav__link">
    2.0 OFS Stack Architecture Overview for Reference Platform
  </a>
  
    <nav class="md-nav" aria-label="2.0 OFS Stack Architecture Overview for Reference Platform">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-hardware-components" class="md-nav__link">
    2.1 Hardware Components
  </a>
  
    <nav class="md-nav" aria-label="2.1 Hardware Components">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#211-fpga-interface-manager" class="md-nav__link">
    2.1.1 FPGA Interface Manager
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12-afu" class="md-nav__link">
    *.1.2 AFU
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-ofs-software-overview" class="md-nav__link">
    2.2 OFS Software Overview
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#30-ofs-dfl-kernel-drivers" class="md-nav__link">
    3.0 OFS DFL Kernel Drivers
  </a>
  
    <nav class="md-nav" aria-label="3.0 OFS DFL Kernel Drivers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-ofs-dfl-kernel-driver-environment-setup" class="md-nav__link">
    3.1 OFS DFL Kernel Driver Environment Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-building-and-installing-the-ofs-dfl-kernel-drivers-from-source" class="md-nav__link">
    3.2 Building and Installing the OFS DFL Kernel Drivers from Source
  </a>
  
    <nav class="md-nav" aria-label="3.2 Building and Installing the OFS DFL Kernel Drivers from Source">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-11-dfl-driver-modules" class="md-nav__link">
    Table 11: DFL Driver Modules
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-installing-the-ofs-dfl-kernel-drivers-from-pre-built-packages" class="md-nav__link">
    3.3 Installing the OFS DFL Kernel Drivers from Pre-Built Packages
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#40-opae-software-development-kit" class="md-nav__link">
    4.0 OPAE Software Development Kit
  </a>
  
    <nav class="md-nav" aria-label="4.0 OPAE Software Development Kit">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-opae-sdk-build-environment-setup" class="md-nav__link">
    4.1 OPAE SDK Build Environment Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-building-and-installing-the-opae-sdk-by-script" class="md-nav__link">
    4.2 Building and Installing the OPAE SDK by Script
  </a>
  
    <nav class="md-nav" aria-label="4.2 Building and Installing the OPAE SDK by Script">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-12-opae-package-description" class="md-nav__link">
    Table 12: OPAE Package Description
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-building-and-installing-the-opae-sdk-by-opae-source-code" class="md-nav__link">
    4.3 Building and Installing the OPAE SDK by OPAE source code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-opae-tools-overview" class="md-nav__link">
    4.4 OPAE Tools Overview
  </a>
  
    <nav class="md-nav" aria-label="4.4 OPAE Tools Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#441-board-management-with-fpgainfo" class="md-nav__link">
    4.4.1 Board Management with fpgainfo
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#432-sensor-monitoring-with-fpgad" class="md-nav__link">
    4.3.2 Sensor Monitoring with fpgad
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#433-updating-with-fpgasupdate" class="md-nav__link">
    4.3.3 Updating with fpgasupdate
  </a>
  
    <nav class="md-nav" aria-label="4.3.3 Updating with fpgasupdate">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-13-fim-version-summary-for-ofs-20231-release" class="md-nav__link">
    Table 13: FIM Version Summary for OFS 2023.1 Release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#table-14-bmc-version-summary-for-ofs-20231-release" class="md-nav__link">
    Table 14: BMC Version Summary for OFS 2023.1 Release
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#434-signing-images-with-pacsign" class="md-nav__link">
    4.3.4 Signing Images with PACSign
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#435-loading-images-with-rsu" class="md-nav__link">
    4.3.5 Loading Images with rsu
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#436-verify-fme-interrupts-with-hello_events" class="md-nav__link">
    4.3.6 Verify FME Interrupts with hello_events
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#437-host-exercisor-modules" class="md-nav__link">
    4.3.7 Host Exercisor Modules
  </a>
  
    <nav class="md-nav" aria-label="4.3.7 Host Exercisor Modules">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-15-module-pfvf-mappings" class="md-nav__link">
    Table 15: Module PF/VF Mappings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4371-he-mem-he-lb" class="md-nav__link">
    4.3.7.1 HE-MEM / HE-LB
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4372-traffic-generator-afu-test-application" class="md-nav__link">
    4.3.7.2 Traffic Generator AFU Test Application
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4373-he-hssi" class="md-nav__link">
    4.3.7.3 HE-HSSI
  </a>
  
    <nav class="md-nav" aria-label="4.3.7.3 HE-HSSI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-16-accelerator-pfvf-and-guid-mappings" class="md-nav__link">
    Table 16: Accelerator PF/VF and GUID Mappings
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#50-upgrading-the-intel-fpga-smartnic-n6001-pl-with-20231-version-of-the-bmc-and-fim" class="md-nav__link">
    5.0 Upgrading the Intel® FPGA SmartNIC N6001-PL with 2023.1 Version of the BMC and FIM
  </a>
  
    <nav class="md-nav" aria-label="5.0 Upgrading the Intel® FPGA SmartNIC N6001-PL with 2023.1 Version of the BMC and FIM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#table-17-fim-version-summary-for-intel-ofs-20231-release" class="md-nav__link">
    Table 17: FIM Version Summary for Intel OFS 2023.1 Release
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#table-18-bmc-version-summary-for-intel-ofs-20231-release" class="md-nav__link">
    Table 18: BMC Version Summary for Intel OFS 2023.1 Release
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#notices-disclaimers" class="md-nav__link">
    Notices &amp; Disclaimers
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="getting-started-guide-open-fpga-stack-for-intel-agilex-fpgas-targeting-the-intel-fpga-smartnic-n6001-pl">Getting Started Guide: Open FPGA Stack for Intel<sup>&reg;</sup> Agilex FPGAs Targeting the Intel® FPGA SmartNIC N6001-PL<a class="headerlink" href="#getting-started-guide-open-fpga-stack-for-intel-agilex-fpgas-targeting-the-intel-fpga-smartnic-n6001-pl" title="Permanent link">&para;</a></h1>
<h2 id="10-introduction">1.0 Introduction<a class="headerlink" href="#10-introduction" title="Permanent link">&para;</a></h2>
<h3 id="11-about-this-document">1.1 About This Document<a class="headerlink" href="#11-about-this-document" title="Permanent link">&para;</a></h3>
<p>The purpose of this document is to help users get started in evaluating the 2023.1
 version of the Open FPGA Stack (<abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr>) for the Intel Agilex FPGA targeting the Intel N6001-PL FPGA SmartNIC Platform. After reviewing the document a user shall be able to:</p>
<ul>
<li>Set up their server environment according to the Best Known Configuration (<abbr title="Best Known Configuration, The exact hardware configuration Intel has optimized and validated the solution against.">BKC</abbr>)</li>
<li>Build and install the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> Linux Kernel drivers</li>
<li>Build and install the Open Programmable Acceleration Engine Software Development Kit (<abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr>) software on top of the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> Linux kernel drivers</li>
<li>Load and Verify the Firmware and <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> versions loaded on their boards</li>
<li>Verify the full stack functionality offered by the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> solution</li>
<li>Know where to find additional information on other <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> ingredients</li>
</ul>
<p>The following flow charts show a high level overview of the initial bring up process, split into three sequential diagrams. Detailed instructions for each installation process are shown in their respective sections.</p>
<h4 id="diagram-1-installing-the-opae-sdk">Diagram 1: Installing the <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr><a class="headerlink" href="#diagram-1-installing-the-opae-sdk" title="Permanent link">&para;</a></h4>
<p><a class="glightbox" href="../images/UG_DIAGRAM_1.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="UG_1" src="../images/UG_DIAGRAM_1.png" /></a></p>
<h4 id="diagram-2-installing-the-linux-dfl-drivers">Diagram 2: Installing the Linux <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Drivers<a class="headerlink" href="#diagram-2-installing-the-linux-dfl-drivers" title="Permanent link">&para;</a></h4>
<p><a class="glightbox" href="../images/UG_DIAGRAM_2.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="UG_2" src="../images/UG_DIAGRAM_2.png" /></a></p>
<h4 id="diagram-3-bringing-up-the-intel-fpga-smartnic-n6001-pl">Diagram 3: Bringing up the Intel® FPGA SmartNIC N6001-PL<a class="headerlink" href="#diagram-3-bringing-up-the-intel-fpga-smartnic-n6001-pl" title="Permanent link">&para;</a></h4>
<p><a class="glightbox" href="../images/UG_DIAGRAM_3.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="UG_3" src="../images/UG_DIAGRAM_3.png" /></a></p>
<h3 id="12-introduction-to-ofs">1.2 Introduction to <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr><a class="headerlink" href="#12-introduction-to-ofs" title="Permanent link">&para;</a></h3>
<p>Each <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> targets a specific platform, but the modular hardware, software, simulation and test infrastructure allow users to modify each part of the design and test environment for their own custom acceleration platform card. This <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> release targets the Intel® FPGA SmartNIC N6001-PL.</p>
<h3 id="13-intended-audience">1.3 Intended Audience<a class="headerlink" href="#13-intended-audience" title="Permanent link">&para;</a></h3>
<p>The information in this document is intended for customers evaluating the Intel® FPGA SmartNIC N6001-PL
. The card is an acceleration development platform (ADP) intended to be used as a starting point for evaluation and development. This document will cover key topics related to initial bring up and development, with links for deeper dives on the topics discussed therein.</p>
<h3 id="14-reference-documents">1.4 Reference Documents<a class="headerlink" href="#14-reference-documents" title="Permanent link">&para;</a></h3>
<p>Documentation for N6001 is collected  <a href="https://ofs.github.io/hw/n6001/user_guides/ug_eval_ofs_n6001/ug_eval_script_ofs_n6001/">on GitHub</a>. The document list is as follows:</p>
<h4 id="table-2-reference-documents">Table 2: Reference Documents<a class="headerlink" href="#table-2-reference-documents" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Document</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://ofs.github.io/hw/n6001/user_guides/ug_qs_ofs_n6001/ug_qs_ofs_n6001/">Getting Started Guide: Intel Open FPGA Stack for Intel Agilex FPGA</a></td>
<td>Guides you through the setup and build steps to evaluate the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> solution targeting an Intel N6001-PL FPGA SmartNIC Platform</td>
</tr>
<tr>
<td><a href="https://ofs.github.io/hw/n6001/reference_manuals/ofs_fim/mnl_fim_ofs_n6001/">FPGA Interface Manager Technical Reference Manual: Intel Open FPGA Stack for Intel Agilex FPGA</a></td>
<td>Describes the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> architecture and features.</td>
</tr>
<tr>
<td><a href="https://ofs.github.io/hw/common/reference_manual/ofs_sw/mnl_sw_ofs/">Software Reference Manual: Intel Open FPGA Stack</a></td>
<td>Describes the Open Programmable Acceleration Engine (OPAE) Software Development Kit, the OPAE C++ and Python API and management interfaces.  This document also covers building the <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr>, how to add a new PCIe device, and debugging the software stack.</td>
</tr>
<tr>
<td><a href="https://ofs.github.io/hw/f2000x/dev_guides/fim_dev/ug_dev_fim_ofs/">FPGA Interface Manager Developer Guide: Intel Open Stack for Intel Agilex FPGA</a></td>
<td>Provides guidance on developing an FPGA Interface Manager (<abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr>) for a custom FPGA acceleration board.</td>
</tr>
<tr>
<td><a href="https://ofs.github.io/hw/n6001/dev_guides/hps_dev/hps_developer_ug/?h=">Hard Processor System Software Developer Guide: Intel <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> for Intel Agilex FPGAs</a></td>
<td>Describes the HPS configuration and software package for the Intel <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> release targeting Intel Agilex <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> and guides you through the steps to build your own Yocto application image for HPS.</td>
</tr>
<tr>
<td><a href="https://ofs.github.io/hw/n6001/dev_guides/afu_dev/ug_dev_afu_ofs_n6001/">Accelerator Functional Unit Developer Guide: Intel Open FPGA Stack</a></td>
<td>Provides guidance on how to build and test an <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> when designing to an <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr>-based FPGA Interface Manager</td>
</tr>
<tr>
<td><a href="https://ofs.github.io/hw/n6001/user_guides/ug_sim_ofs_n6001/ug_sim_ofs_n6001/">Simulation User Guide: Intel Open FPGA Stack for Intel Agilex FPGA</a></td>
<td>Provides steps for setting up the <abbr title="Universal Verification Methodology, A modular, reusable, and scalable testbench structure via an API framework.">UVM</abbr> verification tool suite and running <abbr title="Universal Verification Methodology, A modular, reusable, and scalable testbench structure via an API framework.">UVM</abbr> unit tests</td>
</tr>
<tr>
<td><a href="https://github.com/otcshare/ofs-bmc/blob/main/docs/user_guides/security/ug-pac-security-N600x.md">Security User Guide: Intel Open FPGA Stack</a></td>
<td>Describes how to create keys and sign bitstreams for your custom design; includes new VAB feature</td>
</tr>
<tr>
<td><a href="https://ofs.github.io/hw/common/user_guides/oneapi_asp/ug_oneapi_asp/">oneAPI Accelerator Support Package (ASP): Getting Started User Guide</a></td>
<td>Describes how to get started using OneAPI with the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> BSP.</td>
</tr>
<tr>
<td><a href="https://ofs.github.io/hw/common/reference_manual/oneapi_asp/oneapi_asp_ref_mnl/">oneAPI Accelerator Support Package(ASP) Reference Manual: Open FPGA Stack</a></td>
<td>Describes how to use the provided shim for <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> for creating your custom OneAPI board support package.</td>
</tr>
<tr>
<td><a href="https://ofs.github.io/hw/n6001/user_guides/ug_eval_ofs_n6001/ug_eval_script_ofs_n6001/">Platform Evaluation Script: Open FPGA Stack for Intel Agilex FPGA</a></td>
<td>Serves as a set-up and user guide for the checkout and evaluation of an Intel FPGA SmartNIC N6001 Platform using Open FPGA Stack (<abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr>).</td>
</tr>
</tbody>
</table>
<h3 id="15-component-version-summary">1.5 Component Version Summary<a class="headerlink" href="#15-component-version-summary" title="Permanent link">&para;</a></h3>
<p>The <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> 2023.1 Release targeting the Intel® FPGA SmartNIC N6001-PL is built upon tightly coupled software and firmware versions. Use this section as a general reference for the versions which compose this release.</p>
<p>The following table highlights the hardware which makes up the Best Known Configuration (<abbr title="Best Known Configuration, The exact hardware configuration Intel has optimized and validated the solution against.">BKC</abbr>) for the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> 2023.1 release.</p>
<h4 id="table-3-hardware-bkc">Table 3: Hardware <abbr title="Best Known Configuration, The exact hardware configuration Intel has optimized and validated the solution against.">BKC</abbr><a class="headerlink" href="#table-3-hardware-bkc" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Component</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>1 x Intel® FPGA SmartNIC N6001-PL, SKU2</td>
<td><a class="glightbox" href="../images/HARDWARE_1_N6000.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="HARDWARE_1_N6000" src="../images/HARDWARE_1_N6000.png" /></a></td>
</tr>
<tr>
<td>1 x Supermicro Server SYS-220HE</td>
<td><a class="glightbox" href="../images/HARDWARE_2_SERVER.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="HARDWARE_2_SERVER" src="../images/HARDWARE_2_SERVER.png" /></a></td>
</tr>
<tr>
<td>1 x Intel FPGA Download Cable II (Only Required for manual flashing)</td>
<td><a class="glightbox" href="../images/HARDWARE_3_JTAG.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="HARDWARE_3_JTAG" src="../images/HARDWARE_3_JTAG.png" /></a></td>
</tr>
<tr>
<td>1 x 2x5 Extension header - Samtech Part No: ESQ-105-13-L-D (Only Required for manual flashing)</td>
<td><a class="glightbox" href="../images/HARDWARE_4_EXTENDER.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="HARDWARE_4_EXTENDER" src="../images/HARDWARE_4_EXTENDER.png" /></a></td>
</tr>
</tbody>
</table>
<p>The following table highlights the versions of the software which compose the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> stack. The installation of the <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> on top of the Linux <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> drivers will be discussed in their relevant sections in this document.</p>
<h4 id="table-4-software-version-summary">Table 4: Software Version Summary<a class="headerlink" href="#table-4-software-version-summary" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Component</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>FPGA Platform</td>
<td><a href="https://cdrdv2.intel.com/v1/dl/getContent/723837?explicitVersion=true">Intel® FPGA SmartNIC N6001-PL</a>, release notes: <a href="https://github.com/OFS/ofs-n6001/releases/tag/ofs-2023.1-1">https://github.com/OFS/ofs-n6001/releases/tag/ofs-2023.1-1</a> under "Known Issues"</td>
</tr>
<tr>
<td><abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr></td>
<td><a href="https://github.com/OFS/opae-sdk/releases/tag/2.5.0-3">2.5.0-3</a></td>
</tr>
<tr>
<td>Kernel Drivers</td>
<td><a href="https://github.com/OFS/linux-dfl/releases/tag/ofs-2023.1-6.1-1">ofs-2023.1-6.1-1</a></td>
</tr>
<tr>
<td>OneAPI-ASP</td>
<td><a href="https://github.com/OFS/oneapi-asp/releases/tag/ofs-2023.1-1">ofs-2023.1-1</a></td>
</tr>
<tr>
<td><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> Source Code for N6001</td>
<td><a href="https://github.com/OFS/ofs-n6001/releases/tag/ofs-2023.1-1">ofs-2023.1-1</a></td>
</tr>
<tr>
<td><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> Common Resources</td>
<td><a href="https://github.com/OFS/ofs-fim-common/releases/tag/ofs-fim-common-1.1.0-rc2">Tag: ofs-fim-common-1.1.0-rc2</a></td>
</tr>
<tr>
<td><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> Platform <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> <abbr title="Basic Building Block, Features within an AFU or part of an FPGA interface that can be reused across designs. These building blocks do not have stringent interface requirements like the FIM's AFU and host interface requires. All BBBs must have a (globally unique identifier) GUID.">BBB</abbr></td>
<td><a href="https://github.com/OFS/ofs-platform-afu-bbb/releases/tag/ofs-2023.1-1">ofs-2023.1-1</a></td>
</tr>
<tr>
<td>Intel Quartus Prime Pro Edition Design Software*</td>
<td><a href="https://www.intel.com/content/www/us/en/software-kit/776241/intel-quartus-prime-pro-edition-design-software-version-23-1-for-linux.html">Quartus Prime Pro Version 23.1 for Linux</a></td>
</tr>
<tr>
<td>Operating System</td>
<td><a href="https://access.redhat.com/downloads/content/479/ver=/rhel---8/8.6/x86_64/product-software">RedHat® Enterprise Linux® (RHEL) 8.6</a></td>
</tr>
</tbody>
</table>
<p>The following table highlights the differences between N6000/1 PL FPGA SmartNIC platforms (SKU1/SKU2). Use this table to identify which version of the N6000/1-PL FPGA SmartNIC platform you have. The board identification printed by the <code>fpgainfo fme</code> commands depends on both the <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> and Linux <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> drivers from sections <a href="#30-ofs-dfl-kernel-drivers">3.0 <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Kernel Drivers</a> through <a href="#40-opae-software-development-kit">4.0 OPAE Software Development Kit</a> to be installed before it can be run.</p>
<h4 id="table-5-intel-n60001-pl-fpga-smartnic-platform-sku-mapping">Table 5: Intel N6000/1-PL FPGA SmartNIC Platform SKU Mapping<a class="headerlink" href="#table-5-intel-n60001-pl-fpga-smartnic-platform-sku-mapping" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>SKU Mapping</th>
<th>SKU Value</th>
<th>Primary Difference</th>
<th><code>fpgainfo</code> Identification</th>
</tr>
</thead>
<tbody>
<tr>
<td>N6000</td>
<td>Q1613314XXXXX</td>
<td>PCIe Gen 4 1x16 mechanical bifurcated 2x8 logical to host, with one PCIe Gen 4x8 endpoint reserved for Intel E810-C-CAM2 NIC, the other reserved for <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr></td>
<td>"Intel Acceleration Development Platform N6000"</td>
</tr>
<tr>
<td>N6001</td>
<td>Q0216514XXXXX</td>
<td>PCIe Gen 4 1x16 mechanical and logical connection between host and <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr></td>
<td>"Intel Acceleration Development Platform N6001"</td>
</tr>
</tbody>
</table>
<p>The following table highlights the programmable firmware versions that are supported on the Intel N6001-PL FPGA SmartNIC Platform in the <a href="https://github.com/OFS/ofs-n6001/releases/tag/ofs-2023.1-1"><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> 2023.1 release</a>. Programming and verifying these components is discussed in their respective sections.</p>
<h4 id="table-6-intel-fpga-smartnic-n6001-pl-programmable-component-version-summary">Table 6: Intel® FPGA SmartNIC N6001-PL Programmable Component Version Summary<a class="headerlink" href="#table-6-intel-fpga-smartnic-n6001-pl-programmable-component-version-summary" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Component</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td><abbr title="Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA PAC, a PR bitstream refers to an Intel FPGA PAC AFU. Refer to Partial Reconfiguration support page.">PR</abbr> Interface ID</td>
<td>4514ee67-ca01-5def-9fa5-a1ef30d0c76c</td>
</tr>
<tr>
<td>Bitstream ID</td>
<td>360571655976424377</td>
</tr>
<tr>
<td><abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> RTL</td>
<td>3.11.0</td>
</tr>
<tr>
<td><abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> NIOS FW</td>
<td>3.11.0</td>
</tr>
</tbody>
</table>
<h3 id="16-initial-server-setup">1.6 Initial Server Setup<a class="headerlink" href="#16-initial-server-setup" title="Permanent link">&para;</a></h3>
<h4 id="161-server-bmc-and-bios-updates">1.6.1 Server <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> and BIOS Updates<a class="headerlink" href="#161-server-bmc-and-bios-updates" title="Permanent link">&para;</a></h4>
<p>Both the server BIOS and <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> need to match the versions listed below in <a href="#table-7-supermicro-server-bmc-bkc">Table 7: Supermicro Server <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> <abbr title="Best Known Configuration, The exact hardware configuration Intel has optimized and validated the solution against.">BKC</abbr></a>. These updates only apply for this specific Best Known Configuration (<abbr title="Best Known Configuration, The exact hardware configuration Intel has optimized and validated the solution against.">BKC</abbr>) - other server manufacturers may require different BIOS updates. Please consult your server's user guide and release notes for update information.</p>
<p>Information about the server’s currently loaded firmware can be found on the <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr>
web portal dashboard. Accessing this page requires an Ethernet cable to be attached
to an open port on the server labelled “IPMI”. During boot the <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr>’s login IP will be
presented on the screen.</p>
<p>Open this IP address in a browser and enter your login credentials. The default
username is ADMIN, and the default password has been printed on the service tag
that pulls out from the front of the server case. It is recommended the user change
their <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr>’s default username as soon as they are able</p>
<p>After logging in you should be able to review information about the <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> and BIOS by
referring to the System box, visible upon initial loading of the page. Double check that
the values match those in <a href="#table-7-supermicro-server-bmc-bkc">Table 7 Supermicro Server <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> <abbr title="Best Known Configuration, The exact hardware configuration Intel has optimized and validated the solution against.">BKC</abbr></a>. If they do not, you
may download the appropriate versions from the <a href="https://www.supermicro.com/en/products/system/Hyper/2U/SYS-220HE-FTNR">Supermicro product page</a> by
selecting the BIOS option and downloading the most recent “Bundled Software File
Name”. Follow the <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> and BIOS update instructions included in the
<a href="https://www.supermicro.com/support/manuals/?mlg=0">Supermicro manuals page</a> in the document <strong>X12/H12 <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> Manual</strong> in <strong>Appendix A.2 Updating Firmware Using <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> Web GUI</strong>.</p>
<p>If using a different server model, refer to that server’s user guide for
instructions on remote system management.</p>
<h5 id="table-7-supermicro-server-bmc-bkc">Table 7: Supermicro Server <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> <abbr title="Best Known Configuration, The exact hardware configuration Intel has optimized and validated the solution against.">BKC</abbr><a class="headerlink" href="#table-7-supermicro-server-bmc-bkc" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Component</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>BIOS Version</td>
<td>American Megatrends International, LLC(1.4)</td>
</tr>
</tbody>
</table>
<h4 id="162-server-fan-speed">1.6.2 Server Fan Speed<a class="headerlink" href="#162-server-fan-speed" title="Permanent link">&para;</a></h4>
<p>The recommended fan speed setting is to use the 100% preset. If using a different
server model, refer to that server’s user guide for instructions on changing fan
speed. The following steps will help users on the Supermicro platform.</p>
<ol>
<li>Log in to the Supermicro server <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr>.
(This requires an Ethernet cable to be attached to an open port on the
server labelled “IPMI”.)</li>
<li>During boot the <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr>’s login IP will be presented on the screen. Open this IP address in a browser and enter your login credentials. The default username is ADMIN, and the default password has been
printed on the service tag that pulls out from the front of the server
case.</li>
<li>On the left menu select <strong>System</strong> -&gt; <strong>Component Info</strong>, select the <strong>Fan</strong> tab, under <strong>Advanced Settings</strong> click the circle next to <strong>Full Speed</strong>.</li>
</ol>
<h4 id="163-server-bios-configuration-changes">1.6.3 Server BIOS Configuration Changes<a class="headerlink" href="#163-server-bios-configuration-changes" title="Permanent link">&para;</a></h4>
<p>To enter the Supermicro server’s BIOS setup page, reboot, and press \&lt;Delete> when
prompted. You can browse the tabs / options with a combination of arrow keys along with
\&lt;Escape> and \&lt;Enter>.</p>
<h5 id="1631-enabling-intel-vt-d-technology">1.6.3.1 Enabling <abbr title="Intel Virtualization Technology for Directed I/O, Extension of the VT-x and VT-I processor virtualization technologies which adds new support for I/O device virtualization.">Intel VT-d</abbr> Technology<a class="headerlink" href="#1631-enabling-intel-vt-d-technology" title="Permanent link">&para;</a></h5>
<p>Navigate right to the <strong>Advanced</strong> tab, then select the following menu options: <strong>Chipset
Configuration</strong> -&gt; <strong>North Bridge</strong> -&gt; <strong>IIO Configuration</strong> -&gt; <strong>Intel VT for Directed I/O (VT-d)</strong>.
If not already, enable the option <strong>Intel VT for Directed I/O (VT-d)</strong>.</p>
<h5 id="1632-pcie-slot-mapping">1.6.3.2 PCie Slot Mapping<a class="headerlink" href="#1632-pcie-slot-mapping" title="Permanent link">&para;</a></h5>
<p>The Intel N6001-PL FPGA SmartNIC Platform is officially verified in the upper middle PCIe x16 slot (Slot 3). If using a different slot, refer to the information in <a href="#table-8-pcie-slot-mapping">Table 8 PCIe Slot Mapping</a> for which port to manually change in the server BIOS.</p>
<p><a class="glightbox" href="../images/SERVER_1.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="SERVER_1" src="../images/SERVER_1.png" /></a></p>
<h6 id="table-8-pcie-slot-mapping">Table 8: PCIe Slot Mapping<a class="headerlink" href="#table-8-pcie-slot-mapping" title="Permanent link">&para;</a></h6>
<table>
<thead>
<tr>
<th>CPU Number</th>
<th>Port Number (in BIOS)</th>
<th>PCIe Slot</th>
</tr>
</thead>
<tbody>
<tr>
<td>CPU1</td>
<td>Port 2</td>
<td>5 and 6</td>
</tr>
<tr>
<td>CPU1</td>
<td>Port 4</td>
<td>7 and 8</td>
</tr>
<tr>
<td>CPU2</td>
<td>Port 2</td>
<td>1 and 2</td>
</tr>
<tr>
<td>CPU2</td>
<td>Port 4</td>
<td>3 and 4</td>
</tr>
</tbody>
</table>
<h4 id="164-intel-fpga-smartnic-n6001-pl-installation-procedure">1.6.4 Intel® FPGA SmartNIC N6001-PL Installation Procedure<a class="headerlink" href="#164-intel-fpga-smartnic-n6001-pl-installation-procedure" title="Permanent link">&para;</a></h4>
<p>The following instructions will help to ensure safe installation of the Intel® FPGA SmartNIC N6001-PL into a supported server. Refer to <a href="#table-8-pcie-slot-mapping">Table 8 PCIe Slot Mapping</a> for a breakdown of the available PCIe slots on a SuperMicro SYS-220HE.</p>
<ol>
<li>Position the board over the selected connector on the motherboard.</li>
<li>Press down gently and firmly to seat the card in the PCIe slot, and then secure the bracket to the system chassis with the retention screw.</li>
</ol>
<p><a class="glightbox" href="../images/SERVER_2.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="SERVER_2" src="../images/SERVER_2.png" /></a></p>
<h5 id="table-9-intel-fpga-smartnic-n6001-pl-installation-procedure">Table 9: Intel® FPGA SmartNIC N6001-PL Installation Procedure<a class="headerlink" href="#table-9-intel-fpga-smartnic-n6001-pl-installation-procedure" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Callout</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Retention screw</td>
</tr>
<tr>
<td>2</td>
<td>Press down here gently</td>
</tr>
<tr>
<td>3</td>
<td>Press down here gently</td>
</tr>
<tr>
<td>4</td>
<td>Motherboard</td>
</tr>
</tbody>
</table>
<p>Do not bend the card while inserting into a slot. Do not apply much pressure in regions 2 or 3 while inserting.</p>
<p><a class="glightbox" href="../images/SERVER_3.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="SERVER_3" src="../images/SERVER_3.png" /></a></p>
<h4 id="165-intel-fpga-smartnic-n6001-pl-removal-procedure">1.6.5 Intel® FPGA SmartNIC N6001-PL Removal Procedure<a class="headerlink" href="#165-intel-fpga-smartnic-n6001-pl-removal-procedure" title="Permanent link">&para;</a></h4>
<p>The following instructions will help to ensure safe removal of the platform from a supported server.</p>
<ol>
<li>Disconnect all power cords from the server power supply(s).</li>
<li>Remove the retention bracket screw.</li>
<li>Carefully lift the card out of the PCIe slot.</li>
</ol>
<p><a class="glightbox" href="../images/SERVER_4.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="SERVER_4" src="../images/SERVER_4.png" /></a></p>
<h5 id="table-10-intel-fpga-smartnic-n6001-pl-removal-procedure">Table 10: Intel® FPGA SmartNIC N6001-PL Removal Procedure<a class="headerlink" href="#table-10-intel-fpga-smartnic-n6001-pl-removal-procedure" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Callout</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Retention screw</td>
</tr>
<tr>
<td>2</td>
<td>Pull up here gently</td>
</tr>
<tr>
<td>3</td>
<td>Motherboard</td>
</tr>
</tbody>
</table>
<p>Do not bend the card while removing it from the slot.</p>
<p><a class="glightbox" href="../images/SERVER_5.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="SERVER_5" src="../images/SERVER_5.png" /></a></p>
<p><a name="heading-2.0"> </a></p>
<h2 id="20-ofs-stack-architecture-overview-for-reference-platform">2.0 <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> Stack Architecture Overview for Reference Platform<a class="headerlink" href="#20-ofs-stack-architecture-overview-for-reference-platform" title="Permanent link">&para;</a></h2>
<h3 id="21-hardware-components">2.1 Hardware Components<a class="headerlink" href="#21-hardware-components" title="Permanent link">&para;</a></h3>
<p>The <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> hardware architecture decomposes all designs into a standard
set of modules, interfaces, and capabilities. Although the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> infrastructure provides a standard set of functionality and capability, the user is responsible for making the customizations to their specific design in compliance with the specifications outlined in the <a href="https://ofs.github.io/hw/n6001/reference_manuals/ofs_fim/mnl_fim_ofs_n6001/">FPGA Interface Manager Technical Reference Manual: Intel Open FPGA Stack for Intel Agilex FPGA</a>.</p>
<p><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> is a hardware and software infrastructure that provides an efficient approach to developing a customer FPGA-based platform or workload using an Intel, 3<sup>rd</sup> party, or custom board.</p>
<h4 id="211-fpga-interface-manager">2.1.1 FPGA Interface Manager<a class="headerlink" href="#211-fpga-interface-manager" title="Permanent link">&para;</a></h4>
<p><a class="glightbox" href="../../../reference_manuals/ofs_fim/images/Agilex_Fabric_Features.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="OFS_FIM" src="../../../reference_manuals/ofs_fim/images/Agilex_Fabric_Features.png" /></a></p>
<p>The FPGA Interface Manager (<abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr>), or shell of the FPGA provides platform management
functionality, clocks, resets, and interface access to the host and
peripheral features on the acceleration platform. The <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> architecture for Intel Agilex FPGA provides modularity, configurability and scalability.  The primary components of the FPGA Interface Manager or shell of the reference design are:</p>
<ul>
<li>PCIe Subsystem - a hierarchical design that targets the P-tile PCIe hard IP and is configured to support Gen4 speeds and Arm AXI4-Stream Data Mover functional mode.</li>
<li>Ethernet Subsystem - provides portability to different Ethernet configurations across platforms and generations and reusability of the hardware framework and software stack.</li>
<li>Memory Subsystem - composed of 5 DDR4 channels; two HPS DDR4 banks, x40 (x32 Data and x8 ECC), 1200 MHz, 1GB each, and four Fabric DDR4 banks, x32 (no ECC), 1200 MHz, 4GB</li>
<li>Hard Processor System - 64-bit quad core ARM® Cortex*-A53 MPCore with integrated peripherals.</li>
<li>Reset Controller</li>
<li>FPGA Management Engine - Provides a way to manage the platform and enable acceleration functions on the platform.</li>
<li><abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> Peripheral Fabric for <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> accesses to other interface peripherals</li>
<li>Board Peripheral Fabric for master to slave CSR accesses from Host or <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr></li>
<li>Platform Management Controller Interface (PMCI) to the board management controller</li>
</ul>
<p>The FPGA Management Engine (<abbr title="FPGA Management Engine, Provides a way to manage the platform and enable acceleration functions on the platform.">FME</abbr>)
provides management features for the platform and the
loading/unloading of accelerators through partial reconfiguration. Each
feature of the <abbr title="FPGA Management Engine, Provides a way to manage the platform and enable acceleration functions on the platform.">FME</abbr> exposes itself to the kernel-level <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> drivers on the host through a Device Feature Header (DFH)
register that is placed at the beginning of Control Status Register
(CSR) space. Only one PCIe link can access the <abbr title="FPGA Management Engine, Provides a way to manage the platform and enable acceleration functions on the platform.">FME</abbr> register space in a
multi-host channel design architecture at a time.</p>
<p><em>Note: For more information on the <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> and its external connections, refer to the <a href="https://ofs.github.io/hw/n6001/reference_manuals/ofs_fim/mnl_fim_ofs_n6001/">FPGA Interface Manager Technical Reference Manual: Intel Open FPGA Stack for Intel Agilex FPGA</a>.</em></p>
<h4 id="12-afu">*.1.2 <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr><a class="headerlink" href="#12-afu" title="Permanent link">&para;</a></h4>
<p>An <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> is an acceleration workload that interfaces to the <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr>. The <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> boundary in this reference design comprises both static and partial reconfiguration (<abbr title="Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA PAC, a PR bitstream refers to an Intel FPGA PAC AFU. Refer to Partial Reconfiguration support page.">PR</abbr>) regions.  You can decide how you want to partition these two areas or if you want your <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> region to only be a partial reconfiguration region. A port gasket within the design provides all the <abbr title="Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA PAC, a PR bitstream refers to an Intel FPGA PAC AFU. Refer to Partial Reconfiguration support page.">PR</abbr> specific modules and logic required to support partial reconfiguration. Only one partial reconfiguration region is supported in this design.</p>
<p>Similar to the <abbr title="FPGA Management Engine, Provides a way to manage the platform and enable acceleration functions on the platform.">FME</abbr>, the port gasket exposes its capability to the host software
driver through a DFH register placed at the beginning of the port gasket CSR
space. In addition, only one PCIe link can access the port register
space.  </p>
<p>You can compile your design in one of the following ways:</p>
<ul>
<li>Your entire <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> resides in a partial reconfiguration region of the FPGA.</li>
<li>The <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> is part of the static region and is compiled as a flat design.</li>
<li>Your <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> contains both static and <abbr title="Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA PAC, a PR bitstream refers to an Intel FPGA PAC AFU. Refer to Partial Reconfiguration support page.">PR</abbr> regions.</li>
</ul>
<p>In this design, the <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> region is comprised of:</p>
<ul>
<li><abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> Interface handler to verify transactions coming from <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> region.</li>
<li>PF/VF Mux to route transactions to and from corresponding <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> components: ST2MM module, Virtio LB stub, PCIe loopback host exerciser (HE-LB), HSSI host exerciser (HE-HSSI), Memory Host Exerciser (HE-MEM), Traffic Generator to memory (HE-MEM-TG), Port Gasket (PRG) and HPS Copy Engine.</li>
<li>AXI4 Streaming to Memory Map (ST2MM) Module that routes <abbr title="Memory Mapped Input/Output, Users may map and access both control registers and system memory buffers with accelerators.">MMIO</abbr> CSR accesses to <abbr title="FPGA Management Engine, Provides a way to manage the platform and enable acceleration functions on the platform.">FME</abbr> and board peripherals.</li>
<li>Host exercisers to test PCIe, memory and HSSI interfaces (these can be removed from the <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> region after your <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> design is complete to provide more resource area for workloads)</li>
<li>Basic HPS Copy Engine to copy second-stage bootloader and Linux OS image from Host DDR to HPS DDR.  </li>
<li>Port gasket and partial reconfiguration support.</li>
<li>Component for handling PLDM over MCTP over PCIe Vendor Defined Messages (VDM)</li>
</ul>
<p>The <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> has the option to consume
native packets from the host or interface channels or to instantiate a
shim provided by the Platform Interface Manager (<abbr title="Platform Interface Manager, An interface manager that comprises two components: a configurable platform specific interface for board developers and a collection of shims that AFU developers can use to handle clock crossing, response sorting, buffering and different protocols.">PIM</abbr>) to translate
between protocols.</p>
<p><em>Note: For more information on the Platform Interface Manager and <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> development and testing, refer to the <a href="https://ofs.github.io/hw/n6001/dev_guides/afu_dev/ug_dev_afu_ofs_n6001/"><abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> Development Guide: <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> for Intel® Agilex® PCIe Attach FPGAs</a>.</em></p>
<h3 id="22-ofs-software-overview">2.2 <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> Software Overview<a class="headerlink" href="#22-ofs-software-overview" title="Permanent link">&para;</a></h3>
<p>The responsibility of the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> kernel drivers is to act as the lowest software
layer in the FPGA software stack, providing a minimalist driver implementation between the
host software and functionality that has been implemented on the development platform. This leaves the implementation of IP-specific
software in user-land, not the kernel. The <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> software stack also
provides a mechanism for interface and feature discovery of FPGA
platforms.</p>
<p>The <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> is a software framework for managing and accessing programmable accelerators (FPGAs). It consists of a collection of libraries and tools to facilitate the development of software applications and accelerators. The <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> resides exclusively in user-space, and can be found on the <a href="https://github.com/OPAE/opae-sdk"><abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> Github</a>.</p>
<p>The <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> drivers decompose implemented functionality, including external <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> features such as HSSI, EMIF and SPI, into sets of
individual Device Features. Each Device Feature has its associated
Device Feature Header (DFH), which enables a uniform discovery mechanism
by software. A set of Device Features are exposed through the host
interface in a Device Feature List (<abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr>). The <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> drivers discover
and "walk" the Device Features in a Device Feature List and associate
each Device Feature with its matching kernel driver.</p>
<p>In this way the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> software provides a clean and extensible framework
for the creation and integration of additional functionalities and their
features.</p>
<p>*Note: A deeper dive on available SW APIs and programming model is available in the <a href="../../reference_manual/ofs_sw/mnl_sw_ofs.md">Software Reference Manual: Intel® Open FPGA Stack</a> and on <a href="https://docs.kernel.org/fpga/dfl.html?highlight=fpga">kernel.org</a>.</p>
<h2 id="30-ofs-dfl-kernel-drivers">3.0 <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Kernel Drivers<a class="headerlink" href="#30-ofs-dfl-kernel-drivers" title="Permanent link">&para;</a></h2>
<p><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> driver software provides the bottom-most API to FPGA platforms. Libraries such as OPAE and frameworks like DPDK are consumers of the APIs provided by <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr>. Applications may be built on top of these frameworks and libraries. The <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> software does not cover any out-of-band management interfaces. <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> driver software is designed to be extendable, flexible, and provide for bare-metal and virtualized functionality. An in depth look at the various aspects of the driver architecture such as the API, an explanation of the <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> framework, and instructions on how to port <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> driver patches to other kernel distributions can be found on https://github.com/OPAE/linux-dfl/wiki.</p>
<p>An in-depth review of the Linux device driver architecture can be found on <a href="https://opae.github.io/latest/docs/drv_arch/drv_arch.html">opae.github.io</a>.</p>
<h3 id="31-ofs-dfl-kernel-driver-environment-setup">3.1 <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Kernel Driver Environment Setup<a class="headerlink" href="#31-ofs-dfl-kernel-driver-environment-setup" title="Permanent link">&para;</a></h3>
<p>All <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> kernel driver code resides in the <a href="https://github.com/OPAE/linux-dfl">Linux <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr></a> GitHub repository. This repository is open source and should not require any permissions to access. It includes a snapshot of the Linux kernel with the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> driver included in /drivers/fpga/*. Downloading, configuration, and compilation will be discussed in this section. The only operating systems supported out of the box by the Linux <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> kernel drivers is RHEL 8.6.</p>
<p>This installation process assumes the user has access to an internet connection in order to clone specific GitHub repositories, and to satisfy package dependencies.</p>
<p><strong>1.</strong> Make the following changes on your installation machine to satisfy all dependencies:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>subscription-manager<span class="w"> </span>release<span class="w"> </span>--set<span class="o">=</span><span class="m">8</span>.6
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>update
</code></pre></div>
<p>If you wish to install the pre-built linux-dfl package available on the <a href="https://github.com/OFS/ofs-n6001/releases/tag/ofs-2023.1-1"><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> 2023.1 Release Page</a> skip to section <a href="#33-installing-the-ofs-dfl-kernel-drivers-from-pre-built-packages">3.3 Installing the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Kernel Drivers from Pre-Built Packages</a>.</p>
<p><strong>2.</strong> You must satisfy the following package dependencies if building and installing the drivers from source. Double check that all packages have been found and installed. The following section assumes you require use of a proxy to download from remote repositories. If you do not, then you may safely ignore all references to proxies in the following code block.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># If you require the use of a proxy, add it to DNF using by editing the following file</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/dnf/dnf.conf
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="c1"># Include your proxy by adding the following line, replacing the URL with your proxy&#39;s URL</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="c1"># proxy=http://proxy.server.com:port</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>update
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>subscription-manager<span class="w"> </span>repos<span class="w"> </span>--enable<span class="w"> </span>codeready-builder-for-rhel-8-x86_64-rpms
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>python3<span class="w"> </span>python3-pip<span class="w"> </span>python3-devel<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>gdb<span class="w"> </span>vim<span class="w"> </span>git<span class="w"> </span>gcc<span class="w"> </span>gcc-c++<span class="w"> </span>make<span class="w"> </span>cmake<span class="w"> </span>libuuid-devel<span class="w"> </span>rpm-build<span class="w"> </span>systemd-devel<span class="w"> </span>nmap<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>python3-jsonschema<span class="w"> </span>json-c-devel<span class="w"> </span>tbb-devel<span class="w"> </span>rpmdevtools<span class="w"> </span>libcap-devel<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>python3-pyyaml<span class="w"> </span>hwloc-devel<span class="w"> </span>libedit-devel<span class="w"> </span>git<span class="w"> </span>kernel-headers<span class="w"> </span>kernel-devel<span class="w"> </span>elfutils-libelf-devel<span class="w"> </span>ncurses-devel<span class="w"> </span>openssl-devel<span class="w"> </span>bison<span class="w"> </span>flex<span class="w"> </span>cli11-devel<span class="w"> </span>spdlog-devel
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--user<span class="w"> </span>jsonschema<span class="w"> </span>virtualenv<span class="w"> </span>pudb<span class="w"> </span>pyyaml
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>sudo<span class="w"> </span>pip3<span class="w"> </span>uninstall<span class="w"> </span>setuptools
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>sudo<span class="w"> </span>pip3<span class="w"> </span>install<span class="w"> </span><span class="nv">Pybind11</span><span class="o">==</span><span class="m">2</span>.10.0<span class="w"> </span>--proxy<span class="w"> </span>http://yourproxy:xxx
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a>sudo<span class="w"> </span>pip3<span class="w"> </span>install<span class="w"> </span><span class="nv">setuptools</span><span class="o">==</span><span class="m">59</span>.6.0<span class="w"> </span>--prefix<span class="o">=</span>/usr<span class="w"> </span>--proxy<span class="w"> </span>http://yourproxy:xxx
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a>
<a id="__codelineno-1-22" name="__codelineno-1-22" href="#__codelineno-1-22"></a>wget<span class="w"> </span>http://ftp.pbone.net/mirror/archive.fedoraproject.org/epel/8.4/Everything/x86_64/Packages/p/pybind11-devel-2.4.3-2.el8.x86_64.rpm
<a id="__codelineno-1-23" name="__codelineno-1-23" href="#__codelineno-1-23"></a>
<a id="__codelineno-1-24" name="__codelineno-1-24" href="#__codelineno-1-24"></a>wget<span class="w"> </span>http://ftp.pbone.net/mirror/archive.fedoraproject.org/epel/8.4/Everything/x86_64/Packages/p/python3-pybind11-2.4.3-2.el8.x86_64.rpm
<a id="__codelineno-1-25" name="__codelineno-1-25" href="#__codelineno-1-25"></a>
<a id="__codelineno-1-26" name="__codelineno-1-26" href="#__codelineno-1-26"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>localinstall<span class="w"> </span>./python3-pybind11-2.4.3-2.el8.x86_64.rpm<span class="w"> </span>./pybind11-devel-2.4.3-2.el8.x86_64.rpm<span class="w"> </span>-y
</code></pre></div>
<p>It is recommended you create an empty top level directory for their <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> related repositories to keep the working environment clean. All steps in this installation will use a generic top-level directory at <code>/home/OFS/</code>. If you have created a different top-level directory, replace this path with your custom path.</p>
<p><strong>3.</strong> Initialize an empty git repository and clone the LTS tagged <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> driver source code:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>mkdir<span class="w"> </span>/home/OFS/
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="nb">cd</span><span class="w"> </span>/home/OFS/
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>git<span class="w"> </span>init
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/OFS/linux-dfl
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="nb">cd</span><span class="w"> </span>/home/OFS/linux-dfl
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>git<span class="w"> </span>checkout<span class="w"> </span>tags/ofs-2023.1-6.1-1
</code></pre></div>
<p><strong>4.</strong> Verify that the correct tag/branch have been checkout out.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>git<span class="w"> </span>describe<span class="w"> </span>--tags
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>ofs-2023.1-6.1-1
</code></pre></div>
<p><em>Note: If two different tagged releases are tied to the same commit, running git describe tags may report the other release's tag. This is why the match is made explicit.</em></p>
<p><em>Note: The linux-dfl repository is roughly 5 GB in size.</em></p>
<h3 id="32-building-and-installing-the-ofs-dfl-kernel-drivers-from-source">3.2 Building and Installing the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Kernel Drivers from Source<a class="headerlink" href="#32-building-and-installing-the-ofs-dfl-kernel-drivers-from-source" title="Permanent link">&para;</a></h3>
<p><strong>1.</strong> The following set of instructions walk you through copying an existing kernel configuration file on your machine and changing the minimal required configuration settings.:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nb">cd</span><span class="w"> </span>/home/OFS/linux-dfl
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>cp<span class="w"> </span>/boot/config-<span class="sb">`</span>uname<span class="w"> </span>-r<span class="sb">`</span><span class="w"> </span>.config
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>cat<span class="w"> </span>configs/dfl-config<span class="w"> </span>&gt;&gt;<span class="w"> </span>.config
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;CONFIG_LOCALVERSION=&quot;-dfl&quot;&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>.config
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;CONFIG_LOCALVERSION_AUTO=y&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>.config
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>sed<span class="w"> </span>-i<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;s/CONFIG_SYSTEM_TRUSTED_KEYS=.*/CONFIG_SYSTEM_TRUSTED_KEYS=&quot;&quot;/&#39;</span><span class="w"> </span>.config
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>sed<span class="w"> </span>-i<span class="w"> </span><span class="s1">&#39;/^CONFIG_DEBUG_INFO_BTF/ s/./#&amp;/&#39;</span><span class="w"> </span>.config
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;CONFIG_DEBUG_ATOMIC_SLEEP=y&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>.config
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="nb">export</span><span class="w"> </span><span class="nv">LOCALVERSION</span><span class="o">=</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>make<span class="w"> </span>olddefconfig
</code></pre></div>
<p><strong>1.1.</strong> The above command may report errors resembling <code>symbol value 'm' invalid for CHELSIO_IPSEC_INLINE</code>. These errors indicate that the nature of the config has changed between the currently executing kernel and the kernel being built. The option "m" for a particular kernel module is no longer a valid option, and the default behavior is to simply turn the option off. However the option can likely be turned back on by setting it to 'y'. If the user wants to turn the option back on, change it to 'y' and re-run "make olddefconfig":</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nb">cd</span><span class="w"> </span>/home/OFS/linux-dfl
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;CONFIG_CHELSIO_IPSEC_INLINE=y&#39;</span><span class="w"> </span>&gt;&gt;<span class="w"> </span>.config
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>make<span class="w"> </span>olddefconfig
</code></pre></div>
<p>(Optional) To use the built-in GUI menu for editing kernel configuration parameters, you can opt to run <code>make menuconfig</code>.</p>
<p><strong>2.</strong> Linux kernel builds take advantage of multiple processors to parallelize the build process. Display how many processors are available with the <code>nproc</code> command, and then specify how many make threads to utilize with the -j option. Note that number of threads can exceed the number of processors. In this case, the number of threads are set to the number of processors in the system.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nb">cd</span><span class="w"> </span>/home/OFS/linux-dfl
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>make<span class="w"> </span>-j<span class="w"> </span><span class="k">$(</span>nproc<span class="k">)</span>
</code></pre></div>
<p><strong>3.</strong> The user has two options for installation from source:</p>
<ul>
<li>Using the built-in install option from the kernel Makefile.</li>
<li>Locally building a set of RPM/DEP packages.</li>
</ul>
<p><strong>3.1</strong> (Option 1) This first flow will directly install the kernel and kernel module files without the need to create a package first:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nb">cd</span><span class="w"> </span>/home/OFS/linux-dfl
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>sudo<span class="w"> </span>make<span class="w"> </span>modules_install<span class="w"> </span>-j<span class="w"> </span><span class="k">$(</span>nproc<span class="k">)</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>sudo<span class="w"> </span>make<span class="w"> </span>install
</code></pre></div>
<p><strong>3.2</strong> (Option 2) This second flow will locally build a set of packages. The package options for this flow as as follows:</p>
<ul>
<li>rpm-pkg: Build both source and binary RPM kernel packages</li>
<li>binrpm-pkg: Build only the binary kernel RPM package</li>
<li>deb-pkg: Build both source and binary deb kernel packages</li>
<li>bindeb-pkg: Build only the binary kernel deb package</li>
</ul>
<p>If you are concerned about the size of the resulting package and binaries, they can significantly reduce the size of the package and object files by using the make variable INSTALL_MOD_STRIP. If this is not a concern, feel free to skip this step. The below instructions will build a set of binary RPM packages:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nb">cd</span><span class="w"> </span>/home/OFS/linux-dfl
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>make<span class="w"> </span><span class="nv">INSTALL_MOD_STRIP</span><span class="o">=</span><span class="m">1</span><span class="w"> </span>binrpm-pkg
</code></pre></div>
<p><strong>3.2.1</strong> By default a directory is created in your <code>home</code> directory called <code>rpmbuild</code>. This directory will house all of the kernel packages which have been built. You need to navigate to the newly built kernel packages and install them. The following files were generated using the build command executed in the previous step:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nb">cd</span><span class="w"> </span>~/rpmbuild/RPMS/x86_64
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>ls
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>kernel-6.1.22_dfl.x86_64.rpm<span class="w">  </span>kernel-headers-6.1.22_dfl.x86_64.rpm
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>localinstall<span class="w"> </span>kernel*.rpm
</code></pre></div>
<p><strong>4.</strong> The system will need to be rebooted in order for changes to take affect. After a reboot, select the newly built kernel as the boot target. This can be done pre-boot using the command <code>grub2-reboot</code>, which removes the requirement for user intervention. After boot, verify that the currently running kernel matches expectation.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>uname<span class="w"> </span>-r
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="m">6</span>.1.22-dfl
</code></pre></div>
<p><strong>5.</strong> Verify the <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> drivers have been successfully installed by reading version information directly from <code>/lib/modules</code>. Recall that the name of the kernel built as apart of this section is <code>6.1.22-dfl</code>. If the user set a different name for their kernel, change this path as needed:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nb">cd</span><span class="w"> </span>/usr/lib/modules/6.1.22-dfl/kernel/drivers/fpga
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>ls
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>dfl-afu.ko<span class="w">     </span>dfl-fme.ko<span class="w">      </span>dfl-fme-region.ko<span class="w">  </span>dfl.ko<span class="w">             </span>dfl-pci.ko<span class="w">      </span>fpga-mgr.ko<span class="w">     </span>intel-m10-bmc-sec-update.ko
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>dfl-fme-br.ko<span class="w">  </span>dfl-fme-mgr.ko<span class="w">  </span>dfl-hssi.ko<span class="w">        </span>dfl-n3000-nios.ko<span class="w">  </span>fpga-bridge.ko<span class="w">  </span>fpga-region.ko
</code></pre></div>
<p>If an N6000/1-PL FPGA SmartNIC Platform is present on the server, you can also double check driver versions using the <code>lsmod</code> command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>lsmod<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>dfl
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>uio_dfl<span class="w">                </span><span class="m">20480</span><span class="w">  </span><span class="m">0</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>dfl_emif<span class="w">               </span><span class="m">16384</span><span class="w">  </span><span class="m">0</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>uio<span class="w">                    </span><span class="m">20480</span><span class="w">  </span><span class="m">1</span><span class="w"> </span>uio_dfl
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>ptp_dfl_tod<span class="w">            </span><span class="m">16384</span><span class="w">  </span><span class="m">0</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>dfl_intel_s10_iopll<span class="w">    </span><span class="m">20480</span><span class="w">  </span><span class="m">0</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a>8250_dfl<span class="w">               </span><span class="m">20480</span><span class="w">  </span><span class="m">0</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a>dfl_fme_region<span class="w">         </span><span class="m">20480</span><span class="w">  </span><span class="m">0</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a>dfl_fme_br<span class="w">             </span><span class="m">16384</span><span class="w">  </span><span class="m">0</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>dfl_fme_mgr<span class="w">            </span><span class="m">20480</span><span class="w">  </span><span class="m">2</span>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a>dfl_fme<span class="w">                </span><span class="m">49152</span><span class="w">  </span><span class="m">0</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a>dfl_afu<span class="w">                </span><span class="m">36864</span><span class="w">  </span><span class="m">0</span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a>dfl_pci<span class="w">                </span><span class="m">20480</span><span class="w">  </span><span class="m">0</span>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a>dfl<span class="w">                    </span><span class="m">40960</span><span class="w">  </span><span class="m">11</span><span class="w"> </span>dfl_pci,uio_dfl,dfl_fme,intel_m10_bmc_pmci,dfl_fme_br,8250_dfl,qsfp_mem,ptp_dfl_tod,dfl_afu,dfl_intel_s10_iopll,dfl_emif
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a>fpga_region<span class="w">            </span><span class="m">20480</span><span class="w">  </span><span class="m">3</span><span class="w"> </span>dfl_fme_region,dfl_fme,dfl
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a>fpga_bridge<span class="w">            </span><span class="m">20480</span><span class="w">  </span><span class="m">4</span><span class="w"> </span>dfl_fme_region,fpga_region,dfl_fme,dfl_fme_br
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a>fpga_mgr<span class="w">               </span><span class="m">20480</span><span class="w">  </span><span class="m">4</span><span class="w"> </span>dfl_fme_region,fpga_region,dfl_fme_mgr,dfl_fme
</code></pre></div>
<p>Refer to the following table for a brief description of each driver:</p>
<h4 id="table-11-dfl-driver-modules">Table 11: <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Driver Modules<a class="headerlink" href="#table-11-dfl-driver-modules" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Module Name</th>
<th>Short Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>uio_dfl</td>
<td>Generic <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> driver for Userspace I/O devices</td>
</tr>
<tr>
<td>dfl_intel_s10_iopll</td>
<td><abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Intel S10 IOPLL driver</td>
</tr>
<tr>
<td>uio</td>
<td>UIO Driver</td>
</tr>
<tr>
<td>dfl_fme_region</td>
<td>FPGA Region for <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> FPGA Management Engine</td>
</tr>
<tr>
<td>ptp_dfl_tod</td>
<td><abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> ToD driver</td>
</tr>
<tr>
<td>dfl_emif</td>
<td><abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> EMIF driver</td>
</tr>
<tr>
<td>dfl_fme_br</td>
<td>FPGA Bridge for <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> FPGA Management Engine</td>
</tr>
<tr>
<td>8250_dfl</td>
<td><abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Intel UART driver</td>
</tr>
<tr>
<td>dfl_fme_mgr</td>
<td>FPGA Manager for <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> FPGA Management Engine</td>
</tr>
<tr>
<td>dfl_fme</td>
<td>FPGA Management Engine driver</td>
</tr>
<tr>
<td>dfl_afu</td>
<td>FPGA Accelerated Function Unit driver</td>
</tr>
<tr>
<td>dfl_pci</td>
<td>FPGA <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> PCIe Device Driver</td>
</tr>
<tr>
<td>dfl</td>
<td>FPGA Device Feature List (<abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr>) Support</td>
</tr>
<tr>
<td>fpga_region</td>
<td>FPGA Region Driver</td>
</tr>
<tr>
<td>fpga_bridge</td>
<td>FPGA Bridge Driver</td>
</tr>
<tr>
<td>fpga_mgr</td>
<td>FPGA manager framework</td>
</tr>
</tbody>
</table>
<p><strong>6.</strong> Two kernel parameters must be added to the boot commandline for the newly installed kernel. First, open the file <code>grub</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>sudo<span class="w"> </span>vim<span class="w"> </span>/etc/default/grub
</code></pre></div>
<p><strong>7.</strong> In the variable GRUB_CMDLINE_LINUX add the following parameters in bold:
GRUB_CMDLINE_LINUX="crashkernel=auto resume=/dev/mapper/cl-swap rd.lvm.lv=cl/root rd.lvm.lv=cl/swap rhgb quiet <strong>intel_iommu=on pcie=realloc hugepagesz=2M hugepages=200</strong>"</p>
<p><em>Note: If you wish to instead set hugepages on a per session bassis, you can perform the following steps. These settings will be lost on reboot.</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>mkdir<span class="w"> </span>-p<span class="w"> </span>/mnt/huge<span class="w"> </span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>mount<span class="w"> </span>-t<span class="w"> </span>hugetlbfs<span class="w"> </span>nodev<span class="w"> </span>/mnt/huge<span class="w"> </span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="nb">echo</span><span class="w"> </span><span class="m">2048</span><span class="w"> </span>&gt;<span class="w"> </span>/sys/devices/system/node/node0/hugepages/hugepages-2048kB/nr_hugepages<span class="w"> </span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="nb">echo</span><span class="w"> </span><span class="m">2048</span><span class="w"> </span>&gt;<span class="w"> </span>/sys/devices/system/node/node1/hugepages/hugepages-2048kB/nr_hugepages<span class="w"> </span>
</code></pre></div>
<p><strong>8.</strong> Save your edits, then apply them to the GRUB2 configuration file.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>sudo<span class="w"> </span>grub2-mkconfig
</code></pre></div>
<p><strong>9.</strong> Warm reboot. Your kernel parameter changes should have taken affect.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>cat<span class="w"> </span>/proc/cmdline
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="nv">BOOT_IMAGE</span><span class="o">=(</span>hd1,gpt2<span class="o">)</span>/vmlinuz-6.1.22-dfl<span class="w"> </span><span class="nv">root</span><span class="o">=</span>/dev/mapper/cl-root<span class="w"> </span>ro<span class="w"> </span><span class="nv">crashkernel</span><span class="o">=</span>auto<span class="w"> </span><span class="nv">resume</span><span class="o">=</span>/dev/mapper/cl-swap<span class="w"> </span>rd.lvm.lv<span class="o">=</span>cl/root<span class="w"> </span>rd.lvm.lv<span class="o">=</span>cl/swap<span class="w"> </span><span class="nv">intel_iommu</span><span class="o">=</span>on<span class="w"> </span><span class="nv">pcie</span><span class="o">=</span>realloc<span class="w"> </span><span class="nv">hugepagesz</span><span class="o">=</span>2M<span class="w"> </span><span class="nv">hugepages</span><span class="o">=</span><span class="m">200</span><span class="w"> </span>rhgb<span class="w"> </span>quiet
</code></pre></div>
<h3 id="33-installing-the-ofs-dfl-kernel-drivers-from-pre-built-packages">3.3 Installing the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Kernel Drivers from Pre-Built Packages<a class="headerlink" href="#33-installing-the-ofs-dfl-kernel-drivers-from-pre-built-packages" title="Permanent link">&para;</a></h3>
<p><strong>1.</strong> Make the following changes on your installation machine to satisfy all dependencies:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>subscription-manager<span class="w"> </span>release<span class="w"> </span>--set<span class="o">=</span><span class="m">8</span>.6
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>update
</code></pre></div>
<p><strong>2.</strong> To use the pre-built Linux <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> packages, the user will need to download the files from the <a href="https://github.com/OFS/ofs-n6001/releases/tag/ofs-2023.1-1"><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> 2023.1 Release Page</a>. You can choose to either install using the SRC RPMs, or to use the pre-built RPM packages targeting the official supported release platform.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>tar<span class="w"> </span>xf<span class="w"> </span>kernel-6.1.22_dfl-1.x86_64-<span class="s">&lt;&lt;version&gt;&gt;.tar.gz</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="s">sudo dnf localinstall kernel-6.1.22_dfl_&lt;&lt;version</span>&gt;&gt;.x86_64.rpm<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>kernel-devel-6.1.22_dfl_<span class="s">&lt;&lt;version&gt;&gt;.x86_64.rpm \</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="s">kernel-headers-6.1.22_dfl_&lt;&lt;version</span>&gt;&gt;.x86_64.rpm
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="c1">### OR</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>localinstall<span class="w"> </span>kernel-6.1.22_dfl_&lt;&lt;version&gt;&gt;.src.rpm
</code></pre></div>
<p><strong>3.</strong> After installation has completed you should continue with steps 4-9 in previous section <a href="#32-building-and-installing-the-ofs-dfl-kernel-drivers-from-source">3.2 Building and Installing the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Kernel Drivers from Source</a>.</p>
<h2 id="40-opae-software-development-kit">4.0 OPAE Software Development Kit<a class="headerlink" href="#40-opae-software-development-kit" title="Permanent link">&para;</a></h2>
<p>The <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> software stack sits in user space on top of the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> kernel drivers. It is a common software infrastructure layer that simplifies and streamlines integration of programmable accelerators such as FPGAs into software applications and environments. OPAE consists of a set of drivers, user-space libraries, and tools to discover, enumerate, share, query, access, manipulate, and reconfigure programmable accelerators. OPAE is designed to support a layered, common programming model across different platforms and devices. To learn more about OPAE, its documentation, code samples, an explanation of the available tools, and an overview of the software architecture, visit the <a href="https://opae.github.io/2.3.0/index.html">opae reference</a> page.</p>
<p>The <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> source code is contained within a single GitHub repository
hosted at the <a href="https://github.com/OFS/opae-sdk/releases/tag/2.5.0-3">OPAE Github</a>. This repository is open source and does not require any permissions to access.</p>
<h3 id="41-opae-sdk-build-environment-setup">4.1 <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> Build Environment Setup<a class="headerlink" href="#41-opae-sdk-build-environment-setup" title="Permanent link">&para;</a></h3>
<p>This installation process assumes the you have access to an internet connection in order to pull specific GitHub repositories, and to satisfy package dependencies.</p>
<p><strong>1.</strong> Before <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> installation you must remove any prior OPAE frameworks.  To remove these packages:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>remove<span class="w"> </span>opae*
</code></pre></div>
<p><strong>2.</strong> The following repository changes must be enabled in order to install all dependencies:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>subscription-manager<span class="w"> </span>release<span class="w"> </span>--set<span class="o">=</span><span class="m">8</span>.6
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>update
</code></pre></div>
<p><strong>3.</strong> The following package dependencies must be satisfied by the user. Double check that all packages have been found and installed. The following section assumes you require use of a proxy to download from remote repositories. If you do not, then you may safely ignore all references to proxies in the following code block.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="c1"># If you require the use of a proxy, add it to DNF using by editing the following file</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/dnf/dnf.conf
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="c1"># Include your proxy by adding the following line, replacing the URL with your proxy&#39;s URL</span>
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a><span class="c1"># proxy=http://proxy.server.com:port</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>update
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>subscription-manager<span class="w"> </span>repos<span class="w"> </span>--enable<span class="w"> </span>codeready-builder-for-rhel-8-x86_64-rpms
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>python3<span class="w"> </span>python3-pip<span class="w"> </span>python3-devel<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a>gdb<span class="w"> </span>vim<span class="w"> </span>git<span class="w"> </span>gcc<span class="w"> </span>gcc-c++<span class="w"> </span>make<span class="w"> </span>cmake<span class="w"> </span>libuuid-devel<span class="w"> </span>rpm-build<span class="w"> </span>systemd-devel<span class="w"> </span>nmap<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a>python3-jsonschema<span class="w"> </span>json-c-devel<span class="w"> </span>tbb-devel<span class="w"> </span>rpmdevtools<span class="w"> </span>libcap-devel<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a>python3-pyyaml<span class="w"> </span>hwloc-devel<span class="w"> </span>libedit-devel<span class="w"> </span>git<span class="w"> </span>kernel-headers<span class="w"> </span>kernel-devel<span class="w"> </span>elfutils-libelf-devel<span class="w"> </span>ncurses-devel<span class="w"> </span>openssl-devel<span class="w"> </span>bison<span class="w"> </span>flex<span class="w"> </span>cli11-devel<span class="w"> </span>spdlog-devel
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a>
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a>python3<span class="w"> </span>-m<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--user<span class="w"> </span>jsonschema<span class="w"> </span>virtualenv<span class="w"> </span>pudb<span class="w"> </span>pyyaml
<a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a>
<a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a>sudo<span class="w"> </span>pip3<span class="w"> </span>uninstall<span class="w"> </span>setuptools
<a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a>
<a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a>sudo<span class="w"> </span>pip3<span class="w"> </span>install<span class="w"> </span><span class="nv">Pybind11</span><span class="o">==</span><span class="m">2</span>.10.0<span class="w"> </span>--proxy<span class="w"> </span>http://yourproxy:xxx
<a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a>
<a id="__codelineno-21-20" name="__codelineno-21-20" href="#__codelineno-21-20"></a>sudo<span class="w"> </span>pip3<span class="w"> </span>install<span class="w"> </span><span class="nv">setuptools</span><span class="o">==</span><span class="m">59</span>.6.0<span class="w"> </span>--prefix<span class="o">=</span>/usr<span class="w"> </span>--proxy<span class="w"> </span>http://yourproxy:xxx
<a id="__codelineno-21-21" name="__codelineno-21-21" href="#__codelineno-21-21"></a>
<a id="__codelineno-21-22" name="__codelineno-21-22" href="#__codelineno-21-22"></a>wget<span class="w"> </span>http://ftp.pbone.net/mirror/archive.fedoraproject.org/epel/8.4/Everything/x86_64/Packages/p/pybind11-devel-2.4.3-2.el8.x86_64.rpm
<a id="__codelineno-21-23" name="__codelineno-21-23" href="#__codelineno-21-23"></a>
<a id="__codelineno-21-24" name="__codelineno-21-24" href="#__codelineno-21-24"></a>wget<span class="w"> </span>http://ftp.pbone.net/mirror/archive.fedoraproject.org/epel/8.4/Everything/x86_64/Packages/p/python3-pybind11-2.4.3-2.el8.x86_64.rpm
<a id="__codelineno-21-25" name="__codelineno-21-25" href="#__codelineno-21-25"></a>
<a id="__codelineno-21-26" name="__codelineno-21-26" href="#__codelineno-21-26"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>localinstall<span class="w"> </span>./python3-pybind11-2.4.3-2.el8.x86_64.rpm<span class="w"> </span>./pybind11-devel-2.4.3-2.el8.x86_64.rpm<span class="w"> </span>-y
</code></pre></div>
<p>It is recommended you create an empty top level directory for their <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> related repositories to keep the working environment clean. All steps in this installation will use a generic top-level directory at <code>/home/OFS/</code>. If the you have created a different top-level directory, replace this path with your custom path.</p>
<p><strong>4.</strong> Initialize an empty git repository and clone the tagged <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> source code:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nb">cd</span><span class="w"> </span>/home/OFS/
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a>git<span class="w"> </span>init
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/OFS/opae-sdk
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="nb">cd</span><span class="w"> </span>/home/OFS/opae-sdk
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a>git<span class="w"> </span>checkout<span class="w"> </span>tags/2.5.0-3
</code></pre></div>
<p><strong>5.</strong> Verify that the correct tag/branch have been checkout out.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>git<span class="w"> </span>describe<span class="w"> </span>--tags
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="m">2</span>.5.0-3
</code></pre></div>
<h3 id="42-building-and-installing-the-opae-sdk-by-script">4.2 Building and Installing the <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> by Script<a class="headerlink" href="#42-building-and-installing-the-opae-sdk-by-script" title="Permanent link">&para;</a></h3>
<p><strong>1.</strong> Build the <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> source code, and pack it into several local RPM packages. Building the code into packages allows for easier installation and removal. This build script can take advantage of multiple processors to parallelize the build process. Display how many processors are available with the <code>$(nproc)</code> command, and then specify how many make threads to utilize with the -j option. Note that number of threads can exceed the number of processors. In this case, the number of threads are set to the number of processors in the system.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="nb">cd</span><span class="w"> </span>/home/OFS/opae-sdk/packaging/opae/rpm
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>./create<span class="w"> </span>fedora
</code></pre></div>
<p><strong>2.</strong> After a successful compile there should be packages generated:</p>
<p>The below table lists a short description for each package:</p>
<h4 id="table-12-opae-package-description">Table 12: OPAE Package Description<a class="headerlink" href="#table-12-opae-package-description" title="Permanent link">&para;</a></h4>
<table>
<thead>
<tr>
<th>Package Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>opae</td>
<td><abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> is a collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE. It provides a library implementing the OPAE C API for presenting a streamlined and easy-to-use interface for software applications to discover, access, and manage FPGA devices and accelerators using the OPAE software stack.</td>
</tr>
<tr>
<td>opae-debuginfo</td>
<td>This package provides debug information for package opae. Debug information is useful when developing applications that use this package or when debugging this package.</td>
</tr>
<tr>
<td>opae-debugsource</td>
<td>This package provides debug sources for package opae. Debug sources are useful when developing applications that use this package or when debugging this package.</td>
</tr>
<tr>
<td>opae-devel</td>
<td>OPAE headers, tools, sample source, and documentation</td>
</tr>
<tr>
<td>opae-devel-debuginfo</td>
<td>This package provides debug information for package opae-devel. Debug information is useful when developing applications that use this package or when debugging this package.</td>
</tr>
<tr>
<td>opae-tools</td>
<td>This package contains OPAE base tools binaries</td>
</tr>
<tr>
<td>opae-extra-tools</td>
<td>Additional OPAE tools</td>
</tr>
<tr>
<td>opae-extra-tools-debuginfo</td>
<td>This package provides debug information for package opae-extra-tools. Debug information is useful when developing applications that use this package or when debugging this package.</td>
</tr>
</tbody>
</table>
<p><strong>3.</strong> Install the <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> packages:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="nb">cd</span><span class="w"> </span>/home/OFS/opae-sdk/packaging/opae/rpm
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>rm<span class="w"> </span>-rf<span class="w"> </span>opae-2.5.0-3.el8.src.rpm<span class="w"> </span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>localinstall<span class="w"> </span>-y<span class="w"> </span>opae*.rpm
</code></pre></div>
<p><strong>4.</strong> Check that all packages have been installed:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="o">[</span>user@localhost<span class="w"> </span>opae-sdk<span class="o">]</span><span class="c1"># rpm -qa | grep opae</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a>opae-packager-2.5.0-3.x86_64
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a>opae-devel-2.5.0-3.x86_64
<a id="__codelineno-26-4" name="__codelineno-26-4" href="#__codelineno-26-4"></a>opae-PACSign-2.5.0-3.x86_64
<a id="__codelineno-26-5" name="__codelineno-26-5" href="#__codelineno-26-5"></a>opae-tools-extra-2.5.0-3.x86_64
<a id="__codelineno-26-6" name="__codelineno-26-6" href="#__codelineno-26-6"></a>opae-2.5.0-3.x86_64
<a id="__codelineno-26-7" name="__codelineno-26-7" href="#__codelineno-26-7"></a>opae-tools-2.5.0-3.x86_64
<a id="__codelineno-26-8" name="__codelineno-26-8" href="#__codelineno-26-8"></a>opae-libs-2.5.0-3.x86_64
<a id="__codelineno-26-9" name="__codelineno-26-9" href="#__codelineno-26-9"></a>opae-opae.admin-2.5.0-3.x86_64
<a id="__codelineno-26-10" name="__codelineno-26-10" href="#__codelineno-26-10"></a>opae-tests-2.5.0-3.x86_64
</code></pre></div>
<h3 id="43-building-and-installing-the-opae-sdk-by-opae-source-code">4.3 Building and Installing the <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> by OPAE source code<a class="headerlink" href="#43-building-and-installing-the-opae-sdk-by-opae-source-code" title="Permanent link">&para;</a></h3>
<ol>
<li>Build the <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> source code, and pack it into several local RPM packages. Building the code into packages allows for easier installation and removal. This build script can take advantage of multiple processors to parallelize the build process. Display how many processors are available with the nproc command, and then specify how many make threads to utilize with the -j option. Note that number of threads can exceed the number of processors. In this case, the number of threads are set to the number of processors in the system.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="nb">cd</span><span class="w"> </span>/home/OFS/opae-sdk
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a>mkdir<span class="w"> </span>build
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="nb">cd</span><span class="w"> </span>/home/OFS/opae-sdk/build
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a>cmake<span class="w"> </span>..<span class="w"> </span>-DCPACK_GENERATOR<span class="o">=</span>RPM<span class="w"> </span>-DOPAE_BUILD_FPGABIST<span class="o">=</span>ON<span class="w"> </span>-DOPAE_BUILD_PYTHON_DIST<span class="o">=</span>ON<span class="w"> </span>-DCMAKE_BUILD_PREFIX<span class="o">=</span>/usr
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a>make<span class="w"> </span>-j<span class="w"> </span><span class="sb">`</span>nproc<span class="sb">`</span>
<a id="__codelineno-27-6" name="__codelineno-27-6" href="#__codelineno-27-6"></a>make<span class="w"> </span>-j<span class="w"> </span><span class="sb">`</span>nproc<span class="sb">`</span><span class="w"> </span>package_rpm
</code></pre></div>
<p>The build directory location was selected for ease of use. If the user wishes to build the <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> in a different location, they will need to replace the '..' in the above command with the direct or relative path to the opae-sdk repository.</p>
<ol>
<li>After a successful compile there should be 9 packages present:</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="nb">cd</span><span class="w"> </span>/home/OFS/opae-sdk/build
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a>ls<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>rpm
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>opae-2.5.0-3.x86_64.rpm<span class="w">             </span>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a>opae-PACSign-2.5.0-3.x86_64.rpm
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a>opae-devel-2.5.0-3.x86_64.rpm<span class="w">       </span>
<a id="__codelineno-28-6" name="__codelineno-28-6" href="#__codelineno-28-6"></a>opae-tests-2.5.0-3.x86_64.rpm
<a id="__codelineno-28-7" name="__codelineno-28-7" href="#__codelineno-28-7"></a>opae-libs-2.5.0-3.x86_64.rpm<span class="w">        </span>
<a id="__codelineno-28-8" name="__codelineno-28-8" href="#__codelineno-28-8"></a>opae-tools-2.5.0-3.x86_64.rpm
<a id="__codelineno-28-9" name="__codelineno-28-9" href="#__codelineno-28-9"></a>opae-opae.admin-2.5.0-3.x86_64.rpm<span class="w">  </span>
<a id="__codelineno-28-10" name="__codelineno-28-10" href="#__codelineno-28-10"></a>opae-tools-extra-2.5.0-3.x86_64.rpm
<a id="__codelineno-28-11" name="__codelineno-28-11" href="#__codelineno-28-11"></a>opae-packager-2.5.0-3.x86_64.rpm<span class="w">    </span>
<a id="__codelineno-28-12" name="__codelineno-28-12" href="#__codelineno-28-12"></a>opae-packager-2.5.0-3.x86_64.rpm
</code></pre></div>
<ol>
<li>Install the <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> packages:</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="nb">cd</span><span class="w"> </span>/home/OFS/opae-sdk/build
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>sudo<span class="w"> </span>dnf<span class="w"> </span>localinstall<span class="w"> </span>-y<span class="w"> </span>opae*.rpm
</code></pre></div>
<h3 id="44-opae-tools-overview">4.4 OPAE Tools Overview<a class="headerlink" href="#44-opae-tools-overview" title="Permanent link">&para;</a></h3>
<p>The following section offers a brief introduction including expected output values for the utilities included with OPAE. A full explanation of each command with a description of its syntax is available in the <a href="https://github.com/OPAE/opae-sdk/blob/2.5.0-3/doc/src/fpga_tools/readme.md">opae-sdk GitHUb repo</a>.</p>
<h4 id="441-board-management-with-fpgainfo">4.4.1 Board Management with fpgainfo<a class="headerlink" href="#441-board-management-with-fpgainfo" title="Permanent link">&para;</a></h4>
<p>The <strong>fpgainfo</strong> utility displays FPGA information derived from sysfs files.</p>
<p>Displays FPGA information derived from sysfs files. The command argument is one of the following: errors, power, temp, port, fme, bmc, phy or mac, security. Some commands may also have other arguments or options that control their behavior.</p>
<p>For systems with multiple FPGA devices, you can specify the BDF to limit the output to the FPGA resource with the corresponding PCIe configuration. If not specified, information displays for all resources for the given command.</p>
<p><em>Note: Your BItstream ID and <abbr title="Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA PAC, a PR bitstream refers to an Intel FPGA PAC AFU. Refer to Partial Reconfiguration support page.">PR</abbr> Interface Id may not match the below examples.</em></p>
<p>The following examples walk through sample outputs generated by <code>fpgainfo</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>sudo<span class="w"> </span>fpgainfo<span class="w"> </span>fme
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>Intel<span class="w"> </span>Acceleration<span class="w"> </span>Development<span class="w"> </span>Platform<span class="w"> </span>N6001
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a>Board<span class="w"> </span>Management<span class="w"> </span>Controller<span class="w"> </span>NIOS<span class="w"> </span>FW<span class="w"> </span>version:<span class="w"> </span><span class="m">3</span>.11.0
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a>Board<span class="w"> </span>Management<span class="w"> </span>Controller<span class="w"> </span>Build<span class="w"> </span>version:<span class="w"> </span><span class="m">3</span>.11.0
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a>//******<span class="w"> </span>FME<span class="w"> </span>******//
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xED00001
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:B1:00.0
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a>Vendor<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x8086
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a>Device<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xBCCE
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>SubVendor<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x8086
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a>SubDevice<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x1771
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a>Socket<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x00
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a>Ports<span class="w"> </span>Num<span class="w">                        </span>:<span class="w"> </span><span class="m">01</span>
<a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a>Bitstream<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span><span class="m">360571655976424377</span>
<a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a>Bitstream<span class="w"> </span>Version<span class="w">                </span>:<span class="w"> </span><span class="m">5</span>.0.1
<a id="__codelineno-30-17" name="__codelineno-30-17" href="#__codelineno-30-17"></a>Pr<span class="w"> </span>Interface<span class="w"> </span>Id<span class="w">                  </span>:<span class="w"> </span>4514ee67-ca01-5def-9fa5-a1ef30d0c76c
<a id="__codelineno-30-18" name="__codelineno-30-18" href="#__codelineno-30-18"></a>Boot<span class="w"> </span>Page<span class="w">                        </span>:<span class="w"> </span>user1
<a id="__codelineno-30-19" name="__codelineno-30-19" href="#__codelineno-30-19"></a>Factory<span class="w"> </span>Image<span class="w"> </span>Info<span class="w">               </span>:<span class="w"> </span>a2b5fd0e7afca4ee6d7048f926e75ac2
<a id="__codelineno-30-20" name="__codelineno-30-20" href="#__codelineno-30-20"></a>User1<span class="w"> </span>Image<span class="w"> </span>Info<span class="w">                 </span>:<span class="w"> </span>4514ee67-ca01-5def-9fa5-a1ef30d0c76c
<a id="__codelineno-30-21" name="__codelineno-30-21" href="#__codelineno-30-21"></a>User2<span class="w"> </span>Image<span class="w"> </span>Info<span class="w">                 </span>:<span class="w"> </span>4514ee67-ca01-5def-9fa5-a1ef30d0c76c
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>sudo<span class="w"> </span>fpgainfo<span class="w"> </span>bmc
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a>Intel<span class="w"> </span>Acceleration<span class="w"> </span>Development<span class="w"> </span>Platform<span class="w"> </span>N6001
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a>Board<span class="w"> </span>Management<span class="w"> </span>Controller<span class="w"> </span>NIOS<span class="w"> </span>FW<span class="w"> </span>version:<span class="w"> </span><span class="m">3</span>.11.0
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a>Board<span class="w"> </span>Management<span class="w"> </span>Controller<span class="w"> </span>Build<span class="w"> </span>version:<span class="w"> </span><span class="m">3</span>.11.0
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a>//******<span class="w"> </span>FME<span class="w"> </span>******//
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xED00001
<a id="__codelineno-31-8" name="__codelineno-31-8" href="#__codelineno-31-8"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:B1:00.0
<a id="__codelineno-31-9" name="__codelineno-31-9" href="#__codelineno-31-9"></a>Vendor<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x8086
<a id="__codelineno-31-10" name="__codelineno-31-10" href="#__codelineno-31-10"></a>Device<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xBCCE
<a id="__codelineno-31-11" name="__codelineno-31-11" href="#__codelineno-31-11"></a>SubVendor<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x8086
<a id="__codelineno-31-12" name="__codelineno-31-12" href="#__codelineno-31-12"></a>SubDevice<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x1771
<a id="__codelineno-31-13" name="__codelineno-31-13" href="#__codelineno-31-13"></a>Socket<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x00
<a id="__codelineno-31-14" name="__codelineno-31-14" href="#__codelineno-31-14"></a>Ports<span class="w"> </span>Num<span class="w">                        </span>:<span class="w"> </span><span class="m">01</span>
<a id="__codelineno-31-15" name="__codelineno-31-15" href="#__codelineno-31-15"></a>Bitstream<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span><span class="m">360571655976424377</span>
<a id="__codelineno-31-16" name="__codelineno-31-16" href="#__codelineno-31-16"></a>Bitstream<span class="w"> </span>Version<span class="w">                </span>:<span class="w"> </span><span class="m">5</span>.0.1
<a id="__codelineno-31-17" name="__codelineno-31-17" href="#__codelineno-31-17"></a>Pr<span class="w"> </span>Interface<span class="w"> </span>Id<span class="w">                  </span>:<span class="w"> </span>4514ee67-ca01-5def-9fa5-a1ef30d0c76c
<a id="__codelineno-31-18" name="__codelineno-31-18" href="#__codelineno-31-18"></a><span class="o">(</span><span class="w"> </span><span class="m">1</span><span class="o">)</span><span class="w"> </span>VCCRT_GXER_0V9<span class="w"> </span>Voltage<span class="w">                             </span>:<span class="w"> </span><span class="m">0</span>.91<span class="w"> </span>Volts
<a id="__codelineno-31-19" name="__codelineno-31-19" href="#__codelineno-31-19"></a><span class="o">(</span><span class="w"> </span><span class="m">2</span><span class="o">)</span><span class="w"> </span>FPGA<span class="w"> </span>VCCIO_1V2<span class="w"> </span>Voltage<span class="w">                             </span>:<span class="w"> </span><span class="m">1</span>.21<span class="w"> </span>Volts
<a id="__codelineno-31-20" name="__codelineno-31-20" href="#__codelineno-31-20"></a><span class="o">(</span><span class="w"> </span><span class="m">3</span><span class="o">)</span><span class="w"> </span>Inlet<span class="w"> </span>12V<span class="w"> </span>Aux<span class="w"> </span>Rail<span class="w"> </span>Current<span class="w">                         </span>:<span class="w"> </span><span class="m">0</span>.87<span class="w"> </span>Amps
<a id="__codelineno-31-21" name="__codelineno-31-21" href="#__codelineno-31-21"></a><span class="o">(</span><span class="w"> </span><span class="m">4</span><span class="o">)</span><span class="w"> </span>FPGA<span class="w"> </span>E-Tile<span class="w"> </span>Temperature<span class="w"> </span><span class="o">[</span>Remote<span class="o">]</span><span class="w">                   </span>:<span class="w"> </span><span class="m">47</span>.00<span class="w"> </span>Celsius
<a id="__codelineno-31-22" name="__codelineno-31-22" href="#__codelineno-31-22"></a><span class="o">(</span><span class="w"> </span><span class="m">5</span><span class="o">)</span><span class="w"> </span>AVDD_ETH_0V9_CVL<span class="w"> </span>Voltage<span class="w">                           </span>:<span class="w"> </span><span class="m">1</span>.48<span class="w"> </span>Volts
<a id="__codelineno-31-23" name="__codelineno-31-23" href="#__codelineno-31-23"></a><span class="o">(</span><span class="w"> </span><span class="m">6</span><span class="o">)</span><span class="w"> </span>FPGA<span class="w"> </span>E-TILE<span class="w"> </span>Temperature<span class="w"> </span><span class="c1">#3                         : 51.00 Celsius</span>
<a id="__codelineno-31-24" name="__codelineno-31-24" href="#__codelineno-31-24"></a>...
<a id="__codelineno-31-25" name="__codelineno-31-25" href="#__codelineno-31-25"></a><span class="o">(</span><span class="m">77</span><span class="o">)</span><span class="w"> </span>FPGA<span class="w"> </span>FABRIC<span class="w"> </span>Remote<span class="w"> </span>Digital<span class="w"> </span>Temperature#3<span class="w">           </span>:<span class="w"> </span><span class="m">47</span>.00<span class="w"> </span>Celsius
<a id="__codelineno-31-26" name="__codelineno-31-26" href="#__codelineno-31-26"></a><span class="o">(</span><span class="m">78</span><span class="o">)</span><span class="w"> </span>MAX10<span class="w"> </span><span class="p">&amp;</span><span class="w"> </span>Board<span class="w"> </span>CLK<span class="w"> </span>PWR<span class="w"> </span>3V3<span class="w"> </span>Inlet<span class="w"> </span>Current<span class="w">            </span>:<span class="w"> </span><span class="m">0</span>.97<span class="w"> </span>Amps
<a id="__codelineno-31-27" name="__codelineno-31-27" href="#__codelineno-31-27"></a><span class="o">(</span><span class="m">79</span><span class="o">)</span><span class="w"> </span>CVL<span class="w"> </span>Non<span class="w"> </span>Core<span class="w"> </span>Rails<span class="w"> </span>Inlet<span class="w"> </span>Current<span class="w">                   </span>:<span class="w"> </span><span class="m">0</span>.01<span class="w"> </span>Amps
<a id="__codelineno-31-28" name="__codelineno-31-28" href="#__codelineno-31-28"></a><span class="o">(</span><span class="m">80</span><span class="o">)</span><span class="w"> </span>FPGA<span class="w"> </span>Core<span class="w"> </span>Voltage<span class="w"> </span>Phase<span class="w"> </span><span class="m">0</span><span class="w"> </span>VR<span class="w"> </span>Temperature<span class="w">           </span>:<span class="w"> </span><span class="m">49</span>.50<span class="w"> </span>Celsius
</code></pre></div>
<h4 id="432-sensor-monitoring-with-fpgad">4.3.2 Sensor Monitoring with fpgad<a class="headerlink" href="#432-sensor-monitoring-with-fpgad" title="Permanent link">&para;</a></h4>
<p>The <strong>fpgad</strong> is a service that can help you protect the server from crashing when the hardware reaches an upper non-recoverable or lower non-recoverable sensor threshold (also called as fatal threshold). The fpgad is capable of monitoring each of the 80 sensors reported by the Board Management Controller. This service is only available once the installation instructions in sections <a href="#32-building-and-installing-the-ofs-dfl-kernel-drivers-from-source">3.2 Building and Installing the <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Kernel Drivers</a> and <a href="#41-opae-sdk-build-environment-setup">4.1 <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> Build Environment Setup</a> have been completed
.
<em>Note: Qualified OEM server systems should provide the required cooling for your workloads. Therefore, using <strong>fpgad</strong> may be optional.</em></p>
<p>When the opae-tools-extra-2.5.0-3.x86_64  package is installed, <strong>fpgad</strong> is placed in the OPAE binaries directory (default: /usr/bin). The configuration file fpgad.cfg is located at /etc/opae. The log file fpgad.log which monitors <strong>fpgad</strong> actions is located at /var/lib/opae/.
The <strong>fpgad</strong> periodically reads the sensor values and if the values exceed the warning threshold stated in the fpgad.conf or the hardware defined warning threshold, it masks the PCIe Advanced Error Reporting (<abbr title="Advanced Error Reporting, The PCIe AER driver is the extended PCI Express error reporting capability providing more robust error reporting.">AER</abbr>) registers for the Intel N6000/1-PL FPGA SmartNIC Platform to avoid system reset.
Use the following command to start the <strong>fpgad</strong> service:</p>
<p>Use the following command to start the fpgad service:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>fpgad
</code></pre></div>
The configuration file only includes the threshold setting for critical sensor 12V Aux Rail Voltage (sensor 29). This sensor does not have a hardware defined warning threshold and hence <strong>fpgad</strong> relies on the configuration file. The <strong>fpgad</strong> uses information contained within this file to mask the PCIe <abbr title="Advanced Error Reporting, The PCIe AER driver is the extended PCI Express error reporting capability providing more robust error reporting.">AER</abbr> register when the sensor reaches the warning threshold.</p>
<p>You may create another entry below the 12V Aux Voltage entry for any other sensors on the board. The updated configuration file includes a new entry for <strong>(18) Board Front Side Temperature</strong> with arbitrary values:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="p">{</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a><span class="nt">&quot;configurations&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a><span class="w">    </span><span class="nt">&quot;fpgad-xfpga&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="w">        </span><span class="nt">&quot;configuration&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a><span class="w">        </span><span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a><span class="w">        </span><span class="nt">&quot;plugin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;libfpgad-xfpga.so&quot;</span><span class="p">,</span>
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a><span class="w">        </span><span class="nt">&quot;devices&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-33-9" name="__codelineno-33-9" href="#__codelineno-33-9"></a><span class="w">            </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;0x8086&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;0xbcc0&quot;</span><span class="w"> </span><span class="p">],</span>
<a id="__codelineno-33-10" name="__codelineno-33-10" href="#__codelineno-33-10"></a><span class="w">            </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;0x8086&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;0xbcc1&quot;</span><span class="w"> </span><span class="p">]</span>
<a id="__codelineno-33-11" name="__codelineno-33-11" href="#__codelineno-33-11"></a><span class="w">        </span><span class="p">]</span>
<a id="__codelineno-33-12" name="__codelineno-33-12" href="#__codelineno-33-12"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-33-13" name="__codelineno-33-13" href="#__codelineno-33-13"></a><span class="w">    </span><span class="nt">&quot;fpgad-vc&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-14" name="__codelineno-33-14" href="#__codelineno-33-14"></a><span class="w">        </span><span class="nt">&quot;configuration&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-15" name="__codelineno-33-15" href="#__codelineno-33-15"></a><span class="w">            </span><span class="nt">&quot;cool-down&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span>
<a id="__codelineno-33-16" name="__codelineno-33-16" href="#__codelineno-33-16"></a><span class="w">            </span><span class="nt">&quot;get-aer&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-33-17" name="__codelineno-33-17" href="#__codelineno-33-17"></a><span class="w">                </span><span class="s2">&quot;setpci -s %s ECAP_AER+0x08.L&quot;</span><span class="p">,</span>
<a id="__codelineno-33-18" name="__codelineno-33-18" href="#__codelineno-33-18"></a><span class="w">                </span><span class="s2">&quot;setpci -s %s ECAP_AER+0x14.L&quot;</span>
<a id="__codelineno-33-19" name="__codelineno-33-19" href="#__codelineno-33-19"></a><span class="w">            </span><span class="p">],</span>
<a id="__codelineno-33-20" name="__codelineno-33-20" href="#__codelineno-33-20"></a><span class="w">            </span><span class="nt">&quot;disable-aer&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-33-21" name="__codelineno-33-21" href="#__codelineno-33-21"></a><span class="w">                </span><span class="s2">&quot;setpci -s %s ECAP_AER+0x08.L=0xffffffff&quot;</span><span class="p">,</span>
<a id="__codelineno-33-22" name="__codelineno-33-22" href="#__codelineno-33-22"></a><span class="w">                </span><span class="s2">&quot;setpci -s %s ECAP_AER+0x14.L=0xffffffff&quot;</span>
<a id="__codelineno-33-23" name="__codelineno-33-23" href="#__codelineno-33-23"></a><span class="w">            </span><span class="p">],</span>
<a id="__codelineno-33-24" name="__codelineno-33-24" href="#__codelineno-33-24"></a><span class="w">            </span><span class="nt">&quot;set-aer&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-33-25" name="__codelineno-33-25" href="#__codelineno-33-25"></a><span class="w">                </span><span class="s2">&quot;setpci -s %s ECAP_AER+0x08.L=0x%08x&quot;</span><span class="p">,</span>
<a id="__codelineno-33-26" name="__codelineno-33-26" href="#__codelineno-33-26"></a><span class="w">                </span><span class="s2">&quot;setpci -s %s ECAP_AER+0x14.L=0x%08x&quot;</span>
<a id="__codelineno-33-27" name="__codelineno-33-27" href="#__codelineno-33-27"></a><span class="w">            </span><span class="p">],</span>
<a id="__codelineno-33-28" name="__codelineno-33-28" href="#__codelineno-33-28"></a><span class="w">            </span><span class="nt">&quot;config-sensors-enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<a id="__codelineno-33-29" name="__codelineno-33-29" href="#__codelineno-33-29"></a><span class="w">            </span><span class="nt">&quot;sensors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-33-30" name="__codelineno-33-30" href="#__codelineno-33-30"></a><span class="w">                </span><span class="p">{</span>
<a id="__codelineno-33-31" name="__codelineno-33-31" href="#__codelineno-33-31"></a><span class="w">                    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;12V AUX Voltage&quot;</span><span class="p">,</span>
<a id="__codelineno-33-32" name="__codelineno-33-32" href="#__codelineno-33-32"></a><span class="w">                    </span><span class="nt">&quot;low-warn&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">11.40</span><span class="p">,</span>
<a id="__codelineno-33-33" name="__codelineno-33-33" href="#__codelineno-33-33"></a><span class="w">                    </span><span class="nt">&quot;low-fatal&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">10.56</span>
<a id="__codelineno-33-34" name="__codelineno-33-34" href="#__codelineno-33-34"></a><span class="w">                </span><span class="p">},</span>
<a id="__codelineno-33-35" name="__codelineno-33-35" href="#__codelineno-33-35"></a><span class="w">                </span><span class="p">{</span>
<a id="__codelineno-33-36" name="__codelineno-33-36" href="#__codelineno-33-36"></a><span class="w">                    </span><span class="err">“</span><span class="kc">na</span><span class="err">me”</span><span class="p">:</span><span class="w"> </span><span class="err">“</span><span class="mi">3</span><span class="err">V</span><span class="mi">3</span><span class="w"> </span><span class="err">VR</span><span class="w"> </span><span class="err">Tempera</span><span class="kc">ture</span><span class="err">”</span><span class="p">,</span>
<a id="__codelineno-33-37" name="__codelineno-33-37" href="#__codelineno-33-37"></a><span class="w">                    </span><span class="err">“low</span><span class="mi">-</span><span class="err">war</span><span class="kc">n</span><span class="err">”</span><span class="p">:</span><span class="w"> </span><span class="mf">50.00</span><span class="p">,</span>
<a id="__codelineno-33-38" name="__codelineno-33-38" href="#__codelineno-33-38"></a><span class="w">                    </span><span class="err">“low</span><span class="mi">-</span><span class="kc">fatal</span><span class="err">”</span><span class="p">:</span><span class="w"> </span><span class="mf">100.00</span>
<a id="__codelineno-33-39" name="__codelineno-33-39" href="#__codelineno-33-39"></a>
<a id="__codelineno-33-40" name="__codelineno-33-40" href="#__codelineno-33-40"></a><span class="w">                </span><span class="p">}</span>
<a id="__codelineno-33-41" name="__codelineno-33-41" href="#__codelineno-33-41"></a><span class="w">            </span><span class="p">]</span>
<a id="__codelineno-33-42" name="__codelineno-33-42" href="#__codelineno-33-42"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-33-43" name="__codelineno-33-43" href="#__codelineno-33-43"></a><span class="w">        </span><span class="nt">&quot;enabled&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<a id="__codelineno-33-44" name="__codelineno-33-44" href="#__codelineno-33-44"></a><span class="w">        </span><span class="nt">&quot;plugin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;libfpgad-vc.so&quot;</span><span class="p">,</span>
<a id="__codelineno-33-45" name="__codelineno-33-45" href="#__codelineno-33-45"></a><span class="w">        </span><span class="nt">&quot;devices&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-33-46" name="__codelineno-33-46" href="#__codelineno-33-46"></a><span class="w">            </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;0x8086&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;0x0b30&quot;</span><span class="w"> </span><span class="p">],</span>
<a id="__codelineno-33-47" name="__codelineno-33-47" href="#__codelineno-33-47"></a><span class="w">            </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;0x8086&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;0x0b31&quot;</span><span class="w"> </span><span class="p">],</span>
<a id="__codelineno-33-48" name="__codelineno-33-48" href="#__codelineno-33-48"></a><span class="w">            </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;0x8086&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;0xaf00&quot;</span><span class="w"> </span><span class="p">],</span>
<a id="__codelineno-33-49" name="__codelineno-33-49" href="#__codelineno-33-49"></a><span class="w">            </span><span class="p">[</span><span class="w"> </span><span class="s2">&quot;0x8086&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;0xbcce&quot;</span><span class="w"> </span><span class="p">]</span>
<a id="__codelineno-33-50" name="__codelineno-33-50" href="#__codelineno-33-50"></a><span class="w">            </span><span class="p">]</span>
<a id="__codelineno-33-51" name="__codelineno-33-51" href="#__codelineno-33-51"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-33-52" name="__codelineno-33-52" href="#__codelineno-33-52"></a><span class="p">},</span>
<a id="__codelineno-33-53" name="__codelineno-33-53" href="#__codelineno-33-53"></a><span class="nt">&quot;plugins&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<a id="__codelineno-33-54" name="__codelineno-33-54" href="#__codelineno-33-54"></a><span class="w">    </span><span class="s2">&quot;fpgad-xfpga&quot;</span><span class="p">,</span>
<a id="__codelineno-33-55" name="__codelineno-33-55" href="#__codelineno-33-55"></a><span class="w">    </span><span class="s2">&quot;fpgad-vc&quot;</span>
<a id="__codelineno-33-56" name="__codelineno-33-56" href="#__codelineno-33-56"></a><span class="p">]</span>
<a id="__codelineno-33-57" name="__codelineno-33-57" href="#__codelineno-33-57"></a><span class="p">}</span>
</code></pre></div>
<p>You can monitor the log file to see if upper or lower warning threshold levels are hit. For example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>tail<span class="w"> </span>-f<span class="w"> </span>/var/lib/opae/fpgad.log<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>“sensor.*warning”
<a id="__codelineno-34-2" name="__codelineno-34-2" href="#__codelineno-34-2"></a>fpgad-vc:<span class="w"> </span>sensor<span class="w"> </span><span class="s1">&#39; Columbiaville Die Temperature &#39;</span><span class="w"> </span>warning
</code></pre></div>
<p>You must take appropriate action to recover from this warning <strong>before</strong> the sensor value reaches upper or lower fatal limits. On reaching the warning threshold limit, the daemon masks the <abbr title="Advanced Error Reporting, The PCIe AER driver is the extended PCI Express error reporting capability providing more robust error reporting.">AER</abbr> registers and the log file will indicate that the sensor is tripped.
Sample output: Warning message when the 'CVL Core0 Voltage VR Temperature' exceeds the upper warning threshold limit</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>tail<span class="w"> </span>-f<span class="w"> </span>/var/lib/opae/fpgad.log<span class="w"> </span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>fpgad-vc:<span class="w"> </span>sensor<span class="w"> </span><span class="s1">&#39;CVL Core Voltage VR Temperature&#39;</span><span class="w"> </span>warning.
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>fpgad-vc:<span class="w"> </span>saving<span class="w"> </span>previous<span class="w"> </span>ECAP_AER+0x08<span class="w"> </span>value<span class="w"> </span>0x057ff030<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="m">0000</span>:b0:02.0
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>fpgad-vc:<span class="w"> </span>saving<span class="w"> </span>previous<span class="w"> </span>ECAP_AER+0x14<span class="w"> </span>value<span class="w"> </span>0x0000f1c1<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="m">0000</span>:b0:02.0
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>fpgad-vc:<span class="w"> </span>sensor<span class="w"> </span><span class="s1">&#39;CVL Core Voltage VR Temperature&#39;</span><span class="w"> </span>still<span class="w"> </span>tripped.
</code></pre></div>
<p>If the upper or lower fatal threshold limit is reached, then a power cycle of server is required to recover the Intel N6001-PL SmartNIC FPGA Platform. <abbr title="Advanced Error Reporting, The PCIe AER driver is the extended PCI Express error reporting capability providing more robust error reporting.">AER</abbr> is unmasked by the <strong>fpgad</strong> after the sensor values are within the normal range which is above the lower warning or below the upper warning threshold.</p>
<p>To stop <strong>fpgad</strong>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>stop<span class="w"> </span>fpgad.service
</code></pre></div>
<p>To check status of fpgad:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>fpgad.service
</code></pre></div>
<p>Optional: To enable fpgad to re-start on boot, execute</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>fpgad.service
</code></pre></div>
<p>For a full list of systemctl commands, run the following command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>systemctl<span class="w"> </span>-h
</code></pre></div>
<h4 id="433-updating-with-fpgasupdate">4.3.3 Updating with fpgasupdate<a class="headerlink" href="#433-updating-with-fpgasupdate" title="Permanent link">&para;</a></h4>
<p>The <strong>fpgasupdate</strong> tool updates the Intel Max10 Board Management Controller (<abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr>) image and firmware (FW), root entry hash, and FPGA Static Region (SR) and user image (<abbr title="Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA PAC, a PR bitstream refers to an Intel FPGA PAC AFU. Refer to Partial Reconfiguration support page.">PR</abbr>). The <strong>fpgasupdate</strong> tool only accepts images that have been formatted using PACsign. If a root entry hash has been programmed onto the board, then you must also sign the image using the correct keys. Refer to the <a href="https://github.com/otcshare/ofs-bmc/blob/main/docs/user_guides/security/ug-pac-security-N600x.md">Security User Guide: Intel Open FPGA Stack</a> for information on created signed images and on programming and managing the root entry hash.  </p>
<p>The Intel® FPGA SmartNIC N6001-PL ships with a factory, user1, and user2 programmed image for both the <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> and <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> FW and RTL on all cards. The platform ships with a single <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> image that can be programmed into either user1 or user2, depending in the image selected.</p>
<p>Use the following chart for information on the Bitstream ID and Pr Interface ID, two unique values reported by <code>fpgainfo</code> which can be used to identify the loaded <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr>.</p>
<h5 id="table-13-fim-version-summary-for-ofs-20231-release">Table 13: <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> Version Summary for <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> 2023.1 Release<a class="headerlink" href="#table-13-fim-version-summary-for-ofs-20231-release" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th><abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> Version</th>
<th>Bitstream ID</th>
<th>Pr Interface ID</th>
<th>File Name</th>
<th>Download Location</th>
</tr>
</thead>
<tbody>
<tr>
<td>ofs-2023.1</td>
<td>360571655976424377</td>
<td>4514ee67-ca01-5def-9fa5-a1ef30d0c76c</td>
<td>ofs_top_page[&frac12;]_unsigned_user[&frac12;].bin</td>
<td><a href="https://github.com/OFS/ofs-n6001/releases/tag/ofs-2023.1-1">ofs-2023.1 Release Page</a></td>
</tr>
<tr>
<td>ofs-n6001-0.9.0-rc2</td>
<td>0x50102025AD3DD11</td>
<td>92ec8960-2f2f-5544-9804-075d2e8a71a1</td>
<td>ofs_top_page[&frac12;]_unsigned_user[&frac12;].bin</td>
<td><a href="https://github.com/otcshare/intel-ofs-n6001/releases/tag/ofs-n6001-0.9.1">ofs-2.3.0 Release Page</a></td>
</tr>
<tr>
<td><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr>-2.3.0</td>
<td>0x50102022267A9ED</td>
<td>f59830f7-e716-5369-a8b0-e7ea897cbf82</td>
<td>ofs_top_page[&frac12;]_unsigned_user[&frac12;].bin</td>
<td><a href="https://github.com/otcshare/intel-ofs-fim/releases/tag/ofs-2.3.0">ofs-2.3.0 Release Page</a></td>
</tr>
<tr>
<td><abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr>-2.2.0</td>
<td>0x501020295B081F0</td>
<td>8c157a52-1cf2-5d37-9514-944af0a060da</td>
<td>ofs_top_page[&frac12;]_unsigned_user[&frac12;].bin</td>
<td><a href="https://github.com/otcshare/intel-ofs-fim/releases/tag/ofs-2.2.0-beta">ofs-2.2.0-beta Release Page</a></td>
</tr>
</tbody>
</table>
<h5 id="table-14-bmc-version-summary-for-ofs-20231-release">Table 14: <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> Version Summary for <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> 2023.1 Release<a class="headerlink" href="#table-14-bmc-version-summary-for-ofs-20231-release" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th><abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> FW and RTL Version</th>
<th>File Name</th>
<th>Download Location</th>
</tr>
</thead>
<tbody>
<tr>
<td>3.11.0</td>
<td>AC_BMC_RSU_user_retail_3.11.0_unsigned.rsu</td>
<td>n/a</td>
</tr>
</tbody>
</table>
<ol>
<li>Example loading a new version of the <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> RTL and FW.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>sudo<span class="w"> </span>fpgasupdate<span class="w"> </span>AC_BMC_RSU_user_retail_3.11.0_unsigned.rsu<span class="w"> </span>&lt;PCI<span class="w"> </span>ADDRESS&gt;
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:32:47.93<span class="o">]</span><span class="w"> </span><span class="o">[</span>WARNING<span class="w"> </span><span class="o">]</span><span class="w"> </span>Update<span class="w"> </span>starting.<span class="w"> </span>Please<span class="w"> </span><span class="k">do</span><span class="w"> </span>not<span class="w"> </span>interrupt.<span class="w">                                           </span>
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:32:47.93<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>updating<span class="w"> </span>from<span class="w"> </span>file<span class="w"> </span>/home/user/AC_BMC_RSU_user_retail_3.11.0_unsigned.rsu<span class="w"> </span>with<span class="w"> </span>size<span class="w"> </span><span class="m">904064</span><span class="w">                                   </span>
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:32:47.94<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>idle<span class="w">                                                                    </span>
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:32:47.94<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>preparing<span class="w"> </span>image<span class="w"> </span>file<span class="w">                                                                </span>
<a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:33:26.98<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>writing<span class="w"> </span>image<span class="w"> </span>file<span class="w">                                                                  </span>
<a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a><span class="o">(</span><span class="m">100</span>%<span class="o">)</span><span class="w"> </span><span class="o">[</span>████████████████████<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">904064</span>/904064<span class="w"> </span>bytes<span class="o">][</span>Elapsed<span class="w"> </span>Time:<span class="w"> </span><span class="m">0</span>:00:00.00<span class="o">]</span><span class="w">                                           </span>
<a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:33:26.98<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>programming<span class="w"> </span>image<span class="w"> </span>file<span class="w">                                                              </span>
<a id="__codelineno-40-9" name="__codelineno-40-9" href="#__codelineno-40-9"></a><span class="o">(</span><span class="m">100</span>%<span class="o">)</span><span class="w"> </span><span class="o">[</span>████████████████████<span class="o">]</span><span class="w"> </span><span class="o">[</span>Elapsed<span class="w"> </span>Time:<span class="w"> </span><span class="m">0</span>:00:26.02<span class="o">]</span><span class="w">                                                                 </span>
<a id="__codelineno-40-10" name="__codelineno-40-10" href="#__codelineno-40-10"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:33:53.01<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>update<span class="w"> </span>of<span class="w"> </span><span class="m">0000</span>:b1:00.0<span class="w"> </span><span class="nb">complete</span><span class="w">                                                     </span>
<a id="__codelineno-40-11" name="__codelineno-40-11" href="#__codelineno-40-11"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:33:53.01<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>Secure<span class="w"> </span>update<span class="w"> </span>OK<span class="w">                                                                    </span>
<a id="__codelineno-40-12" name="__codelineno-40-12" href="#__codelineno-40-12"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:33:53.01<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>Total<span class="w"> </span>time:<span class="w"> </span><span class="m">0</span>:01:05.07
<a id="__codelineno-40-13" name="__codelineno-40-13" href="#__codelineno-40-13"></a>sudo<span class="w"> </span>rsu<span class="w"> </span>bmcimg
</code></pre></div>
<ol>
<li>Example for loading a Static Region (SR) update image. This process will take up to 20 minutes.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>sudo<span class="w"> </span>fpgasupdate<span class="w"> </span>ofs_top_page1_unsigned_user1.bin<span class="w"> </span>&lt;PCI<span class="w"> </span>ADDRESS&gt;
<a id="__codelineno-41-2" name="__codelineno-41-2" href="#__codelineno-41-2"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:42:31.58<span class="o">]</span><span class="w"> </span><span class="o">[</span>WARNING<span class="w"> </span><span class="o">]</span><span class="w"> </span>Update<span class="w"> </span>starting.<span class="w"> </span>Please<span class="w"> </span><span class="k">do</span><span class="w"> </span>not<span class="w"> </span>interrupt.<span class="w">                                           </span>
<a id="__codelineno-41-3" name="__codelineno-41-3" href="#__codelineno-41-3"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:42:31.58<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>updating<span class="w"> </span>from<span class="w"> </span>file<span class="w"> </span>ofs_top_page1_pacsign_user1.bin<span class="w"> </span>with<span class="w"> </span>size<span class="w"> </span><span class="m">19928064</span><span class="w">               </span>
<a id="__codelineno-41-4" name="__codelineno-41-4" href="#__codelineno-41-4"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:42:31.60<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>idle<span class="w">                                                                    </span>
<a id="__codelineno-41-5" name="__codelineno-41-5" href="#__codelineno-41-5"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:42:31.60<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>preparing<span class="w"> </span>image<span class="w"> </span>file<span class="w">                                                                </span>
<a id="__codelineno-41-6" name="__codelineno-41-6" href="#__codelineno-41-6"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:42:38.61<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>writing<span class="w"> </span>image<span class="w"> </span>file<span class="w">                                                                  </span>
<a id="__codelineno-41-7" name="__codelineno-41-7" href="#__codelineno-41-7"></a><span class="o">(</span><span class="m">100</span>%<span class="o">)</span><span class="w"> </span><span class="o">[</span>████████████████████<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">19928064</span>/19928064<span class="w"> </span>bytes<span class="o">][</span>Elapsed<span class="w"> </span>Time:<span class="w"> </span><span class="m">0</span>:00:16.01<span class="o">]</span><span class="w">                                       </span>
<a id="__codelineno-41-8" name="__codelineno-41-8" href="#__codelineno-41-8"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:42:54.63<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>programming<span class="w"> </span>image<span class="w"> </span>file<span class="w">                                                              </span>
<a id="__codelineno-41-9" name="__codelineno-41-9" href="#__codelineno-41-9"></a><span class="o">(</span><span class="m">100</span>%<span class="o">)</span><span class="w"> </span><span class="o">[</span>████████████████████<span class="o">][</span>Elapsed<span class="w"> </span>Time:<span class="w"> </span><span class="m">0</span>:06:16.40<span class="o">]</span><span class="w">                                                                 </span>
<a id="__codelineno-41-10" name="__codelineno-41-10" href="#__codelineno-41-10"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:49:11.03<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>update<span class="w"> </span>of<span class="w"> </span><span class="m">0000</span>:b1:00.0<span class="w"> </span><span class="nb">complete</span><span class="w">                                                     </span>
<a id="__codelineno-41-11" name="__codelineno-41-11" href="#__codelineno-41-11"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:49:11.03<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>Secure<span class="w"> </span>update<span class="w"> </span>OK<span class="w">                                                                    </span>
<a id="__codelineno-41-12" name="__codelineno-41-12" href="#__codelineno-41-12"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:49:11.03<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>Total<span class="w"> </span>time:<span class="w"> </span><span class="m">0</span>:06:39.45
</code></pre></div>
<h4 id="434-signing-images-with-pacsign">4.3.4 Signing Images with PACSign<a class="headerlink" href="#434-signing-images-with-pacsign" title="Permanent link">&para;</a></h4>
<p>PACSign is an OPAE utility which allows users to insert authentication markers into bitstreams targeted for the Intel® FPGA SmartNIC N6001-PL. PACSign also allows users updating their Static Region (SR) to designate which partition of flash (user1, user2, factory) to overwrite given a specific <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> binary image. All binary images must be signed using PACSign before fpgasupdate can use them for an update. Assuming no Root Entry Hash (REH) has been programmed on the device, the following examples demonstrate how to prepend the required secury authentication data, and specifiy which region of flash to update.
More information, including charts detailing the different certification types and their required options, are fully described in the PACsign <a href="https://github.com/OPAE/opae-sdk/blob/72b8b36bd31103dd24bf8ffee1b03c9623fb0d69/python/pacsign/PACSign.md">README</a> on GitHub.</p>
<p>For more information on PACSign and on general security practices surrounding the Intel N6001-PL FPGA SmartNIC device, visit the <a href="https://github.com/otcshare/ofs-bmc/blob/main/docs/user_guides/security/ug-pac-security-N600x.md">Security User Guide: Intel Open FPGA Stack</a>.</p>
<p><strong>PACSign</strong> can be run on images that have previously been signed. It will overwrite any existing authentication data.</p>
<p>The following example creates an unsigned SR image from an existing signed SR binary update image, targeting the user1 partition in flash.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>PACSign<span class="w"> </span>SR<span class="w"> </span>-t<span class="w"> </span>UPDATE<span class="w"> </span>-s<span class="w"> </span><span class="m">0</span><span class="w"> </span>-H<span class="w"> </span>openssl_manager<span class="w"> </span>-i<span class="w"> </span>ofs_top_page1_pacsign_user1.bin<span class="w"> </span>-o<span class="w"> </span>new_image.bin
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>No<span class="w"> </span>root<span class="w"> </span>key<span class="w"> </span>specified.<span class="w">  </span>Generate<span class="w"> </span>unsigned<span class="w"> </span>bitstream?<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>yes,<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>no:<span class="w"> </span>y
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>No<span class="w"> </span>CSK<span class="w"> </span>specified.<span class="w">  </span>Generate<span class="w"> </span>unsigned<span class="w"> </span>bitstream?<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>yes,<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>no:<span class="w"> </span>y
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>No<span class="w"> </span>root<span class="w"> </span>entry<span class="w"> </span><span class="nb">hash</span><span class="w"> </span>bitstream<span class="w"> </span>specified.<span class="w">  </span>Verification<span class="w"> </span>will<span class="w"> </span>not<span class="w"> </span>be<span class="w"> </span><span class="k">done</span>.<span class="w">  </span>Continue?<span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>yes,<span class="w"> </span><span class="nv">N</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>no:<span class="w"> </span>y
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a><span class="m">2021</span>-10-18<span class="w"> </span><span class="m">14</span>:42:54,490<span class="w"> </span>-<span class="w"> </span>PACSign.log<span class="w"> </span>-<span class="w"> </span>WARNING<span class="w"> </span>-<span class="w"> </span>Bitstream<span class="w"> </span>is<span class="w"> </span>already<span class="w"> </span>signed<span class="w"> </span>-<span class="w"> </span>removing<span class="w"> </span>signature<span class="w"> </span>blocks
</code></pre></div>
<p>---&gt;</p>
<h4 id="435-loading-images-with-rsu">4.3.5 Loading Images with rsu<a class="headerlink" href="#435-loading-images-with-rsu" title="Permanent link">&para;</a></h4>
<p>The <strong>rsu</strong> performs a Remote System Update operation on a N6000/1-PL device, given its PCIe address. An <strong>rsu</strong> operation sends an instruction to the device to trigger a power cycle of the card and forces reconfiguration from flash for either the <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> or FPGA image.</p>
<p>The Intel® FPGA SmartNIC N6001-PL contains two regions of flash you may store <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> images. These locations are referred to as <strong>user1</strong> and <strong>user2</strong>. After an image has been programmed with fpgasupdate in either of these regions you may choose to perform an rsu to switch. This operation indicates to the <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> which region to configure the FPGA device from after power-on.</p>
<p>If the <strong>factory</strong> image has been updated, Intel strongly recommends the user to immediately <abbr title="Remote System Update, A Remote System Update operation sends an instruction to the Intel FPGA PAC D5005 device that triggers a power cycle of the card only, forcing reconfiguration.">RSU</abbr> to the factory image to ensure the image is functional.</p>
<p>The user can determine which region of flash was used to configure their FPGA device using the command <code>fpgainfo fme</code> and referring to the row labelled <strong>Boot Page</strong>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>sudo<span class="w"> </span>fpgainfo<span class="w"> </span>fme<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>Boot
<a id="__codelineno-43-2" name="__codelineno-43-2" href="#__codelineno-43-2"></a>Boot<span class="w"> </span>Page<span class="w">                        </span>:<span class="w"> </span>user1
</code></pre></div>
<p>Swapping between <strong>user1</strong> and <strong>user2</strong> skips load times that are created when using <code>fpgasupdate</code> to flash a new <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> image.</p>
<p><strong><code>rsu</code> Overview</strong></p>
<p><strong>Mode 1: <abbr title="Remote System Update, A Remote System Update operation sends an instruction to the Intel FPGA PAC D5005 device that triggers a power cycle of the card only, forcing reconfiguration.">RSU</abbr></strong></p>
<p>Perform <abbr title="Remote System Update, A Remote System Update operation sends an instruction to the Intel FPGA PAC D5005 device that triggers a power cycle of the card only, forcing reconfiguration.">RSU</abbr> (remote system update) operation on a development platform given its PCIe address. An <abbr title="Remote System Update, A Remote System Update operation sends an instruction to the Intel FPGA PAC D5005 device that triggers a power cycle of the card only, forcing reconfiguration.">RSU</abbr> operation sends an instruction to the device to trigger a power cycle of the card only. This will force reconfiguration from flash for either <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr>, Retimer, SDM, (on devices that support these) or the FPGA.</p>
<p><strong>Mode 2: Default FPGA Image</strong></p>
<p>Set the default FPGA boot sequence. The --page option determines the primary FPGA boot image. The --fallback option allows a comma-separated list of values to specify fallback images.</p>
<p>The following example will load an image stored in <strong>user2</strong>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>sudo<span class="w"> </span>rsu<span class="w"> </span>fpga<span class="w"> </span>--page<span class="o">=</span>user2<span class="w"> </span><span class="m">0000</span>:b1:00.0
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a><span class="m">2022</span>-04-15<span class="w"> </span><span class="m">09</span>:25:22,951<span class="w"> </span>-<span class="w"> </span><span class="o">[[</span>pci_address<span class="o">(</span><span class="m">0000</span>:b1:00.0<span class="o">)</span>,<span class="w"> </span>pci_id<span class="o">(</span>0x8086,<span class="w"> </span>0xbcce<span class="o">)]]</span><span class="w"> </span>performing<span class="w"> </span>RSU<span class="w"> </span>operation
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a><span class="m">2022</span>-04-15<span class="w"> </span><span class="m">09</span>:25:22,955<span class="w"> </span>-<span class="w"> </span><span class="o">[[</span>pci_address<span class="o">(</span><span class="m">0000</span>:b0:02.0<span class="o">)</span>,<span class="w"> </span>pci_id<span class="o">(</span>0x8086,<span class="w"> </span>0x347a<span class="o">)]]</span><span class="w"> </span>removing<span class="w"> </span>device<span class="w"> </span>from<span class="w"> </span>PCIe<span class="w"> </span>bus
<a id="__codelineno-44-4" name="__codelineno-44-4" href="#__codelineno-44-4"></a><span class="m">2022</span>-04-15<span class="w"> </span><span class="m">09</span>:25:22,998<span class="w"> </span>-<span class="w"> </span>waiting<span class="w"> </span><span class="m">10</span><span class="w"> </span>seconds<span class="w"> </span><span class="k">for</span><span class="w"> </span>boot
<a id="__codelineno-44-5" name="__codelineno-44-5" href="#__codelineno-44-5"></a><span class="m">2022</span>-04-15<span class="w"> </span><span class="m">09</span>:25:33,009<span class="w"> </span>-<span class="w"> </span>rescanning<span class="w"> </span>PCIe<span class="w"> </span>bus:<span class="w"> </span>/sys/devices/pci0000:b0/pci_bus/0000:b0
<a id="__codelineno-44-6" name="__codelineno-44-6" href="#__codelineno-44-6"></a><span class="m">2022</span>-04-15<span class="w"> </span><span class="m">09</span>:25:34,630<span class="w"> </span>-<span class="w"> </span>RSU<span class="w"> </span>operation<span class="w"> </span><span class="nb">complete</span>
</code></pre></div>
<p><em>Note: As a result of using the <strong>rsu</strong> command, the host rescans the PCI bus and may assign a different Bus/Device/Function (B/D/F) value than the originally assigned value.</em></p>
<h4 id="436-verify-fme-interrupts-with-hello_events">4.3.6 Verify <abbr title="FPGA Management Engine, Provides a way to manage the platform and enable acceleration functions on the platform.">FME</abbr> Interrupts with hello_events<a class="headerlink" href="#436-verify-fme-interrupts-with-hello_events" title="Permanent link">&para;</a></h4>
<p>The <strong>hello_events</strong> utility is used to verify <abbr title="FPGA Management Engine, Provides a way to manage the platform and enable acceleration functions on the platform.">FME</abbr> interrupts. This tool injects <abbr title="FPGA Management Engine, Provides a way to manage the platform and enable acceleration functions on the platform.">FME</abbr> errors and waits for error interrupts, then clears the errors.</p>
<p>Sample output from <code>sudo hello_events</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>sudo<span class="w"> </span>hello_events
<a id="__codelineno-45-2" name="__codelineno-45-2" href="#__codelineno-45-2"></a>Waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>interrupts<span class="w"> </span>now...
<a id="__codelineno-45-3" name="__codelineno-45-3" href="#__codelineno-45-3"></a>injecting<span class="w"> </span>error
<a id="__codelineno-45-4" name="__codelineno-45-4" href="#__codelineno-45-4"></a>FME<span class="w"> </span>Interrupt<span class="w"> </span>occurred
<a id="__codelineno-45-5" name="__codelineno-45-5" href="#__codelineno-45-5"></a>Successfully<span class="w"> </span>tested<span class="w"> </span>Register/Unregister<span class="w"> </span><span class="k">for</span><span class="w"> </span>FME<span class="w"> </span>events!
<a id="__codelineno-45-6" name="__codelineno-45-6" href="#__codelineno-45-6"></a>clearing<span class="w"> </span>error
</code></pre></div>
<h4 id="437-host-exercisor-modules">4.3.7 Host Exercisor Modules<a class="headerlink" href="#437-host-exercisor-modules" title="Permanent link">&para;</a></h4>
<p>The reference <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> and unchanged <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> compilations contain Host Exerciser Modules (HEMs). These are used to exercise and characterize the various host-FPGA interactions, including Memory Mapped Input/Output (<abbr title="Memory Mapped Input/Output, Users may map and access both control registers and system memory buffers with accelerators.">MMIO</abbr>), data transfer from host to FPGA, <abbr title="Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA PAC, a PR bitstream refers to an Intel FPGA PAC AFU. Refer to Partial Reconfiguration support page.">PR</abbr>, host to FPGA memory, etc. There are three HEMs present in the Intel <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> Reference <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> - HE-LPBK, HE-MEM, and HE-HSSI. These exercisers are tied to three different VFs that must be enabled before they can be used.
Execution of these exercisers requires you bind specific VF endpoint to <strong>vfio-pci</strong>. The host-side software looks for these endpoints to grab the correct FPGA resource.</p>
<p>Refer to the Intel <a href="../../../n6001/">FPGA Interface Manager Technical Reference Manual: Intel Open FPGA Stack for Intel Agilex FPGA</a> for a full description of these modules.</p>
<h5 id="table-15-module-pfvf-mappings">Table 15: Module PF/VF Mappings<a class="headerlink" href="#table-15-module-pfvf-mappings" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th>Module</th>
<th>PF/VF</th>
</tr>
</thead>
<tbody>
<tr>
<td>ST2MM</td>
<td>PF0</td>
</tr>
<tr>
<td>HE-MEM</td>
<td>PF0-VF0</td>
</tr>
<tr>
<td>HE-HSSI</td>
<td>PF0-VF1</td>
</tr>
<tr>
<td>HE-MEM_TG</td>
<td>PF0-VF2</td>
</tr>
<tr>
<td>HE-LB Stub</td>
<td>PF1-VF0</td>
</tr>
<tr>
<td>HE-LB</td>
<td>PF2</td>
</tr>
<tr>
<td>VirtIO LB Stub</td>
<td>PF3</td>
</tr>
<tr>
<td>HPS Copy Engine</td>
<td>PF4</td>
</tr>
</tbody>
</table>
<h5 id="4371-he-mem-he-lb">4.3.7.1 HE-MEM / HE-LB<a class="headerlink" href="#4371-he-mem-he-lb" title="Permanent link">&para;</a></h5>
<p>The host exerciser used to exercise and characterize the various host-FPGA interactions eg. <abbr title="Memory Mapped Input/Output, Users may map and access both control registers and system memory buffers with accelerators.">MMIO</abbr>, Data transfer from host to FPGA , <abbr title="Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA PAC, a PR bitstream refers to an Intel FPGA PAC AFU. Refer to Partial Reconfiguration support page.">PR</abbr>, host to FPGA memory etc.
<strong>Host Exerciser Loopback (HE-LBK)</strong> <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> can move data between host memory and FPGA.</p>
<p>HE-LBK supports:
- Latency (<abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> to Host memory read)
- <abbr title="Memory Mapped Input/Output, Users may map and access both control registers and system memory buffers with accelerators.">MMIO</abbr> latency (Write+Read)
- <abbr title="Memory Mapped Input/Output, Users may map and access both control registers and system memory buffers with accelerators.">MMIO</abbr> BW (64B <abbr title="Memory Mapped Input/Output, Users may map and access both control registers and system memory buffers with accelerators.">MMIO</abbr> writes)
- BW (Read/Write, Read only, Wr only)</p>
<p><strong>Host Exerciser Loopback Memory (HE-MEM)</strong> <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> is used to exercise use of FPGA connected DDR, data read from the host is written to DDR, and the same data is read from DDR before sending it back to the host.</p>
<p><strong>HE-LB</strong> is responsible for generating traffic with the intention of exercising the path from the <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> to the Host at full bandwidth. <strong>HE-MEM</strong> is used to exercise use of FPGA connected DDR; data read from the host is written to DDR, and the same data is read from DDR before sending it back to the host. <strong>HE-MEM</strong> uses external DDR memory (i.e. EMIF) to store data. It has a customized version of the AVMM interface to communicate with the EMIF memory controller. Both exercisers rely on the user-space tool host_exerciser. When using the Intel N6001-PL FPGA SmartNIC Platform, optimal performance requires the exercisers be run at 400 MHz.</p>
<p>Execution of these exercisers requires you to bind specific VF endpoint to <strong>vfio-pci</strong>. The following commands will bind the correct endpoint for a device with B/D/F 0000:b1:00.0 and run through a basic loopback test.</p>
<p><strong>Note:</strong> While running the <code>opae.io init</code> command listed below, if no output is present after completion then the command has failed. Double check that Intel VT-D and IOMMU have been enabled in the kernel as discussed in step 12 in section <a href="#31-ofs-dfl-kernel-driver-environment-setup">3.1 Intel <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Kernel Driver Environment Setup</a>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a>sudo<span class="w"> </span>pci_device<span class="w">  </span><span class="m">0000</span>:b1:00.0<span class="w"> </span>vf<span class="w"> </span><span class="m">3</span>
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a>sudo<span class="w"> </span>opae.io<span class="w"> </span>init<span class="w"> </span>-d<span class="w"> </span><span class="m">0000</span>:b1:00.2<span class="w"> </span>user:user
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a>Unbinding<span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.2<span class="w"> </span>from<span class="w"> </span>dfl-pci<span class="w">                                                                  </span>
<a id="__codelineno-46-4" name="__codelineno-46-4" href="#__codelineno-46-4"></a>Binding<span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.2<span class="w"> </span>to<span class="w"> </span>vfio-pci<span class="w"> </span>
<a id="__codelineno-46-5" name="__codelineno-46-5" href="#__codelineno-46-5"></a>iommu<span class="w"> </span>group<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.2<span class="w"> </span>is<span class="w"> </span><span class="m">188</span><span class="w">                                                                  </span>
<a id="__codelineno-46-6" name="__codelineno-46-6" href="#__codelineno-46-6"></a>Assigning<span class="w"> </span>/dev/vfio/188<span class="w"> </span>to<span class="w"> </span>DCPsupport<span class="w">                                                                                  </span>
<a id="__codelineno-46-7" name="__codelineno-46-7" href="#__codelineno-46-7"></a>Changing<span class="w"> </span>permissions<span class="w"> </span><span class="k">for</span><span class="w"> </span>/dev/vfio/188<span class="w"> </span>to<span class="w"> </span>rw-rw----
<a id="__codelineno-46-8" name="__codelineno-46-8" href="#__codelineno-46-8"></a>sudo<span class="w"> </span>host_exerciser<span class="w"> </span>--clock-mhz<span class="w"> </span><span class="m">400</span><span class="w"> </span>lpbk
<a id="__codelineno-46-9" name="__codelineno-46-9" href="#__codelineno-46-9"></a><span class="w">    </span>starting<span class="w"> </span><span class="nb">test</span><span class="w"> </span>run,<span class="w"> </span>count<span class="w"> </span>of<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-46-10" name="__codelineno-46-10" href="#__codelineno-46-10"></a>API<span class="w"> </span>version:<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-46-11" name="__codelineno-46-11" href="#__codelineno-46-11"></a>AFU<span class="w"> </span>clock<span class="w"> </span>from<span class="w"> </span><span class="nb">command</span><span class="w"> </span>line:<span class="w"> </span><span class="m">400</span><span class="w"> </span>MHz
<a id="__codelineno-46-12" name="__codelineno-46-12" href="#__codelineno-46-12"></a>Allocate<span class="w"> </span>SRC<span class="w"> </span>Buffer
<a id="__codelineno-46-13" name="__codelineno-46-13" href="#__codelineno-46-13"></a>Allocate<span class="w"> </span>DST<span class="w"> </span>Buffer
<a id="__codelineno-46-14" name="__codelineno-46-14" href="#__codelineno-46-14"></a>Allocate<span class="w"> </span>DSM<span class="w"> </span>Buffer
<a id="__codelineno-46-15" name="__codelineno-46-15" href="#__codelineno-46-15"></a><span class="w">    </span>Host<span class="w"> </span>Exerciser<span class="w"> </span>Performance<span class="w"> </span>Counter:
<a id="__codelineno-46-16" name="__codelineno-46-16" href="#__codelineno-46-16"></a><span class="w">    </span>Host<span class="w"> </span>Exerciser<span class="w"> </span>numReads:<span class="w"> </span><span class="m">1024</span>
<a id="__codelineno-46-17" name="__codelineno-46-17" href="#__codelineno-46-17"></a><span class="w">    </span>Host<span class="w"> </span>Exerciser<span class="w"> </span>numWrites:<span class="w"> </span><span class="m">1025</span>
<a id="__codelineno-46-18" name="__codelineno-46-18" href="#__codelineno-46-18"></a><span class="w">    </span>Host<span class="w"> </span>Exerciser<span class="w"> </span>numPendReads:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-46-19" name="__codelineno-46-19" href="#__codelineno-46-19"></a><span class="w">    </span>Host<span class="w"> </span>Exerciser<span class="w"> </span>numPendWrites:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-46-20" name="__codelineno-46-20" href="#__codelineno-46-20"></a><span class="w">    </span>Number<span class="w"> </span>of<span class="w"> </span>clocks:<span class="w"> </span><span class="m">5224</span>
<a id="__codelineno-46-21" name="__codelineno-46-21" href="#__codelineno-46-21"></a><span class="w">    </span>Total<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>Reads<span class="w"> </span>sent:<span class="w"> </span><span class="m">1024</span>
<a id="__codelineno-46-22" name="__codelineno-46-22" href="#__codelineno-46-22"></a><span class="w">    </span>Total<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>Writes<span class="w"> </span>sent:<span class="w"> </span><span class="m">1022</span>
<a id="__codelineno-46-23" name="__codelineno-46-23" href="#__codelineno-46-23"></a><span class="w">    </span>Bandwidth:<span class="w"> </span><span class="m">5</span>.018<span class="w"> </span>GB/s
<a id="__codelineno-46-24" name="__codelineno-46-24" href="#__codelineno-46-24"></a><span class="w">    </span>Test<span class="w"> </span>lpbk<span class="o">(</span><span class="m">1</span><span class="o">)</span>:<span class="w"> </span>PASS
</code></pre></div>
<p>The following example will run a loopback throughput test using one cacheline per request.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>sudo<span class="w"> </span>pci_device<span class="w">  </span><span class="m">0000</span>:b1:00.0<span class="w"> </span>vf<span class="w"> </span><span class="m">3</span>
<a id="__codelineno-47-2" name="__codelineno-47-2" href="#__codelineno-47-2"></a>sudo<span class="w"> </span>opae.io<span class="w"> </span>init<span class="w"> </span>-d<span class="w"> </span><span class="m">0000</span>:b1:00.2<span class="w"> </span>user:user
<a id="__codelineno-47-3" name="__codelineno-47-3" href="#__codelineno-47-3"></a>sudo<span class="w"> </span>host_exerciser<span class="w"> </span>--clock-mhz<span class="w"> </span><span class="m">400</span><span class="w"> </span>--mode<span class="w"> </span>trput<span class="w"> </span>--cls<span class="w"> </span>cl_1<span class="w"> </span>lpbk
<a id="__codelineno-47-4" name="__codelineno-47-4" href="#__codelineno-47-4"></a><span class="w">    </span>starting<span class="w"> </span><span class="nb">test</span><span class="w"> </span>run,<span class="w"> </span>count<span class="w"> </span>of<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-47-5" name="__codelineno-47-5" href="#__codelineno-47-5"></a>API<span class="w"> </span>version:<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-47-6" name="__codelineno-47-6" href="#__codelineno-47-6"></a>AFU<span class="w"> </span>clock<span class="w"> </span>from<span class="w"> </span><span class="nb">command</span><span class="w"> </span>line:<span class="w"> </span><span class="m">400</span><span class="w"> </span>MHz
<a id="__codelineno-47-7" name="__codelineno-47-7" href="#__codelineno-47-7"></a>Allocate<span class="w"> </span>SRC<span class="w"> </span>Buffer
<a id="__codelineno-47-8" name="__codelineno-47-8" href="#__codelineno-47-8"></a>Allocate<span class="w"> </span>DST<span class="w"> </span>Buffer
<a id="__codelineno-47-9" name="__codelineno-47-9" href="#__codelineno-47-9"></a>Allocate<span class="w"> </span>DSM<span class="w"> </span>Buffer
<a id="__codelineno-47-10" name="__codelineno-47-10" href="#__codelineno-47-10"></a><span class="w">    </span>Host<span class="w"> </span>Exerciser<span class="w"> </span>Performance<span class="w"> </span>Counter:
<a id="__codelineno-47-11" name="__codelineno-47-11" href="#__codelineno-47-11"></a><span class="w">    </span>Host<span class="w"> </span>Exerciser<span class="w"> </span>numReads:<span class="w"> </span><span class="m">512</span>
<a id="__codelineno-47-12" name="__codelineno-47-12" href="#__codelineno-47-12"></a><span class="w">    </span>Host<span class="w"> </span>Exerciser<span class="w"> </span>numWrites:<span class="w"> </span><span class="m">513</span>
<a id="__codelineno-47-13" name="__codelineno-47-13" href="#__codelineno-47-13"></a><span class="w">    </span>Host<span class="w"> </span>Exerciser<span class="w"> </span>numPendReads:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-47-14" name="__codelineno-47-14" href="#__codelineno-47-14"></a><span class="w">    </span>Host<span class="w"> </span>Exerciser<span class="w"> </span>numPendWrites:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-47-15" name="__codelineno-47-15" href="#__codelineno-47-15"></a><span class="w">    </span>Number<span class="w"> </span>of<span class="w"> </span>clocks:<span class="w"> </span><span class="m">3517</span>
<a id="__codelineno-47-16" name="__codelineno-47-16" href="#__codelineno-47-16"></a><span class="w">    </span>Total<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>Reads<span class="w"> </span>sent:<span class="w"> </span><span class="m">512</span>
<a id="__codelineno-47-17" name="__codelineno-47-17" href="#__codelineno-47-17"></a><span class="w">    </span>Total<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>Writes<span class="w"> </span>sent:<span class="w"> </span><span class="m">512</span>
<a id="__codelineno-47-18" name="__codelineno-47-18" href="#__codelineno-47-18"></a><span class="w">    </span>Bandwidth:<span class="w"> </span><span class="m">7</span>.454<span class="w"> </span>GB/s
<a id="__codelineno-47-19" name="__codelineno-47-19" href="#__codelineno-47-19"></a><span class="w">    </span>Test<span class="w"> </span>lpbk<span class="o">(</span><span class="m">1</span><span class="o">)</span>:<span class="w"> </span>PASS
</code></pre></div>
<h5 id="4372-traffic-generator-afu-test-application">4.3.7.2 Traffic Generator <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> Test Application<a class="headerlink" href="#4372-traffic-generator-afu-test-application" title="Permanent link">&para;</a></h5>
<p>Beginning in OPAE version 2.0.11-1+ the TG <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr> has an OPAE application to access &amp; exercise traffic, targeting a specific bank. The supported arguments for test configuration are:</p>
<ul>
<li>Number of test loops: --loops</li>
<li>Number of read transfers per test loop: -r,--read</li>
<li>Number of write transfers per test loop: -w,--write</li>
<li>Burst size of each transfer: -b,--bls</li>
<li>Address stride between each transfer: --stride</li>
<li>Target memory TG: -m,--mem-channel</li>
</ul>
<p>Below are some example commands for how to execute the test application.
To run the preconfigured write/read traffic test on channel 0:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a>mem_tg<span class="w"> </span>tg_test
</code></pre></div>
<p>Target channel 1 with a 1MB single-word write only test for 1000 iterations</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>mem_tg<span class="w"> </span>--loops<span class="w"> </span><span class="m">1000</span><span class="w"> </span>-r<span class="w"> </span><span class="m">0</span><span class="w"> </span>-w<span class="w"> </span><span class="m">2000</span><span class="w"> </span>-m<span class="w"> </span><span class="m">1</span><span class="w"> </span>tg_test
</code></pre></div>
<p>Target channel 2 with 4MB write/read test of max burst length for 10 iterations</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a>mem_tg<span class="w"> </span>--loops<span class="w"> </span><span class="m">10</span><span class="w"> </span>-r<span class="w"> </span><span class="m">8</span><span class="w"> </span>-w<span class="w"> </span><span class="m">8</span><span class="w"> </span>--bls<span class="w"> </span><span class="m">255</span><span class="w"> </span>-m<span class="w"> </span><span class="m">2</span><span class="w"> </span>tg_test
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>sudo<span class="w"> </span>mem_tg<span class="w"> </span>--loops<span class="w"> </span><span class="m">1000</span><span class="w"> </span>-r<span class="w"> </span><span class="m">2000</span><span class="w"> </span>-w<span class="w"> </span><span class="m">2000</span><span class="w"> </span>--stride<span class="w"> </span><span class="m">2</span><span class="w"> </span>--bls<span class="w"> </span><span class="m">2</span><span class="w">  </span>-m<span class="w"> </span><span class="m">1</span><span class="w"> </span>tg_test
<a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a><span class="o">[</span><span class="m">2022</span>-07-15<span class="w"> </span><span class="m">00</span>:13:16.349<span class="o">]</span><span class="w"> </span><span class="o">[</span>tg_test<span class="o">]</span><span class="w"> </span><span class="o">[</span>info<span class="o">]</span><span class="w"> </span>starting<span class="w"> </span><span class="nb">test</span><span class="w"> </span>run,<span class="w"> </span>count<span class="w"> </span>of<span class="w"> </span><span class="m">1</span>
<a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a>Memory<span class="w"> </span>channel<span class="w"> </span>clock<span class="w"> </span>frequency<span class="w"> </span>unknown.<span class="w"> </span>Assuming<span class="w"> </span><span class="m">300</span><span class="w"> </span>MHz.
<a id="__codelineno-51-4" name="__codelineno-51-4" href="#__codelineno-51-4"></a>TG<span class="w"> </span>PASS
<a id="__codelineno-51-5" name="__codelineno-51-5" href="#__codelineno-51-5"></a>Mem<span class="w"> </span>Clock<span class="w"> </span>Cycles:<span class="w"> </span><span class="m">17565035</span>
<a id="__codelineno-51-6" name="__codelineno-51-6" href="#__codelineno-51-6"></a>Write<span class="w"> </span>BW:<span class="w"> </span><span class="m">4</span>.37232<span class="w"> </span>GB/s
<a id="__codelineno-51-7" name="__codelineno-51-7" href="#__codelineno-51-7"></a>Read<span class="w"> </span>BW:<span class="w"> </span><span class="m">4</span>.37232<span class="w"> </span>GB/s
</code></pre></div>
<h5 id="4373-he-hssi">4.3.7.3 HE-HSSI<a class="headerlink" href="#4373-he-hssi" title="Permanent link">&para;</a></h5>
<p>HE-HSSI is responsible for handling client-side ethernet traffic. It wraps the 10G and 100G HSSI AFUs, and includes a traffic generator and checker. The user-space tool hssi exports a control interface to the HE-HSSI's <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr>'s packet generator logic.</p>
<p>The hssi application provides a means of interacting with the 10G and with the 100G HSSI AFUs. In both 10G and 100G operating modes, the application initializes the <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr>, completes the desired transfer as described by the mode- specific options, and displays the ethernet statistics by invoking ethtool --statistics INTERFACE.</p>
<p>The following example walks through the process of binding the VF corresponding with the HE-HSSI exerciser to vfio-pci, sending traffic, and verifying that traffic was received.</p>
<p><strong>1.</strong> <strong>Create</strong> 3 VFs in the <abbr title="Partial Reconfiguration, The ability to dynamically reconfigure a portion of an FPGA while the remaining FPGA design continues to function. In the context of Intel FPGA PAC, a PR bitstream refers to an Intel FPGA PAC AFU. Refer to Partial Reconfiguration support page.">PR</abbr> region.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>sudo<span class="w"> </span>pci_device<span class="w"> </span>b1:00.0<span class="w"> </span>vf<span class="w"> </span><span class="m">3</span><span class="w"> </span>
</code></pre></div>
<p><strong>1.1</strong> Verify all 3 VFs were created.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>lspci<span class="w"> </span>-s<span class="w"> </span>b1:00<span class="w"> </span>
<a id="__codelineno-53-2" name="__codelineno-53-2" href="#__codelineno-53-2"></a>b1:00.0<span class="w"> </span>Processing<span class="w"> </span>accelerators:<span class="w"> </span>Intel<span class="w"> </span>Corporation<span class="w"> </span>Device<span class="w"> </span>bcce<span class="w"> </span><span class="o">(</span>rev<span class="w"> </span><span class="m">01</span><span class="o">)</span><span class="w"> </span>
<a id="__codelineno-53-3" name="__codelineno-53-3" href="#__codelineno-53-3"></a>b1:00.1<span class="w"> </span>Processing<span class="w"> </span>accelerators:<span class="w"> </span>Intel<span class="w"> </span>Corporation<span class="w"> </span>Device<span class="w"> </span>bcce<span class="w"> </span>
<a id="__codelineno-53-4" name="__codelineno-53-4" href="#__codelineno-53-4"></a>b1:00.2<span class="w"> </span>Processing<span class="w"> </span>accelerators:<span class="w"> </span>Intel<span class="w"> </span>Corporation<span class="w"> </span>Device<span class="w"> </span>bcce<span class="w"> </span>
<a id="__codelineno-53-5" name="__codelineno-53-5" href="#__codelineno-53-5"></a>b1:00.3<span class="w"> </span>Processing<span class="w"> </span>accelerators:<span class="w"> </span>Red<span class="w"> </span>Hat,<span class="w"> </span>Inc.<span class="w"> </span>Virtio<span class="w"> </span>network<span class="w"> </span>device<span class="w"> </span>
<a id="__codelineno-53-6" name="__codelineno-53-6" href="#__codelineno-53-6"></a>b1:00.4<span class="w"> </span>Processing<span class="w"> </span>accelerators:<span class="w"> </span>Intel<span class="w"> </span>Corporation<span class="w"> </span>Device<span class="w"> </span>bcce<span class="w"> </span>
<a id="__codelineno-53-7" name="__codelineno-53-7" href="#__codelineno-53-7"></a>b1:00.5<span class="w"> </span>Processing<span class="w"> </span>accelerators:<span class="w"> </span>Intel<span class="w"> </span>Corporation<span class="w"> </span>Device<span class="w"> </span>bccf<span class="w"> </span>
<a id="__codelineno-53-8" name="__codelineno-53-8" href="#__codelineno-53-8"></a>b1:00.6<span class="w"> </span>Processing<span class="w"> </span>accelerators:<span class="w"> </span>Intel<span class="w"> </span>Corporation<span class="w"> </span>Device<span class="w"> </span>bccf<span class="w"> </span>
<a id="__codelineno-53-9" name="__codelineno-53-9" href="#__codelineno-53-9"></a>b1:00.7<span class="w"> </span>Processing<span class="w"> </span>accelerators:<span class="w"> </span>Intel<span class="w"> </span>Corporation<span class="w"> </span>Device<span class="w"> </span>bccf<span class="w"> </span>
</code></pre></div>
<p><strong>2.</strong> <strong>Bind</strong> all of the PF/VF endpoints to the <code>vfio-pci</code> driver.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>sudo<span class="w"> </span>opae.io<span class="w"> </span>init<span class="w"> </span>-d<span class="w"> </span><span class="m">0000</span>:b1:00.1<span class="w"> </span>user:user
<a id="__codelineno-54-2" name="__codelineno-54-2" href="#__codelineno-54-2"></a>Unbinding<span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.1<span class="w"> </span>from<span class="w"> </span>dfl-pci
<a id="__codelineno-54-3" name="__codelineno-54-3" href="#__codelineno-54-3"></a>Binding<span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.1<span class="w"> </span>to<span class="w"> </span>vfio-pci
<a id="__codelineno-54-4" name="__codelineno-54-4" href="#__codelineno-54-4"></a>iommu<span class="w"> </span>group<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.1<span class="w"> </span>is<span class="w"> </span><span class="m">187</span>
<a id="__codelineno-54-5" name="__codelineno-54-5" href="#__codelineno-54-5"></a>Assigning<span class="w"> </span>/dev/vfio/187<span class="w"> </span>to<span class="w"> </span>DCPsupport
<a id="__codelineno-54-6" name="__codelineno-54-6" href="#__codelineno-54-6"></a>Changing<span class="w"> </span>permissions<span class="w"> </span><span class="k">for</span><span class="w"> </span>/dev/vfio/187<span class="w"> </span>to<span class="w"> </span>rw-rw----
<a id="__codelineno-54-7" name="__codelineno-54-7" href="#__codelineno-54-7"></a>
<a id="__codelineno-54-8" name="__codelineno-54-8" href="#__codelineno-54-8"></a>sudo<span class="w"> </span>opae.io<span class="w"> </span>init<span class="w"> </span>-d<span class="w"> </span><span class="m">0000</span>:b1:00.2<span class="w"> </span>user:user
<a id="__codelineno-54-9" name="__codelineno-54-9" href="#__codelineno-54-9"></a>Unbinding<span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.2<span class="w"> </span>from<span class="w"> </span>dfl-pci
<a id="__codelineno-54-10" name="__codelineno-54-10" href="#__codelineno-54-10"></a>Binding<span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.2<span class="w"> </span>to<span class="w"> </span>vfio-pci
<a id="__codelineno-54-11" name="__codelineno-54-11" href="#__codelineno-54-11"></a>iommu<span class="w"> </span>group<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">(</span>0x8086,0xbcce<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.2<span class="w"> </span>is<span class="w"> </span><span class="m">188</span>
<a id="__codelineno-54-12" name="__codelineno-54-12" href="#__codelineno-54-12"></a>Assigning<span class="w"> </span>/dev/vfio/188<span class="w"> </span>to<span class="w"> </span>DCPsupport
<a id="__codelineno-54-13" name="__codelineno-54-13" href="#__codelineno-54-13"></a>Changing<span class="w"> </span>permissions<span class="w"> </span><span class="k">for</span><span class="w"> </span>/dev/vfio/188<span class="w"> </span>to<span class="w"> </span>rw-rw----
<a id="__codelineno-54-14" name="__codelineno-54-14" href="#__codelineno-54-14"></a>
<a id="__codelineno-54-15" name="__codelineno-54-15" href="#__codelineno-54-15"></a>...
<a id="__codelineno-54-16" name="__codelineno-54-16" href="#__codelineno-54-16"></a>
<a id="__codelineno-54-17" name="__codelineno-54-17" href="#__codelineno-54-17"></a>sudo<span class="w"> </span>opae.io<span class="w"> </span>init<span class="w"> </span>-d<span class="w"> </span><span class="m">0000</span>:b1:00.7<span class="w"> </span>user:user
<a id="__codelineno-54-18" name="__codelineno-54-18" href="#__codelineno-54-18"></a>Binding<span class="w"> </span><span class="o">(</span>0x8086,0xbccf<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.7<span class="w"> </span>to<span class="w"> </span>vfio-pci
<a id="__codelineno-54-19" name="__codelineno-54-19" href="#__codelineno-54-19"></a>iommu<span class="w"> </span>group<span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">(</span>0x8086,0xbccf<span class="o">)</span><span class="w"> </span>at<span class="w"> </span><span class="m">0000</span>:b1:00.7<span class="w"> </span>is<span class="w"> </span><span class="m">319</span>
<a id="__codelineno-54-20" name="__codelineno-54-20" href="#__codelineno-54-20"></a>Assigning<span class="w"> </span>/dev/vfio/319<span class="w"> </span>to<span class="w"> </span>DCPsupport
<a id="__codelineno-54-21" name="__codelineno-54-21" href="#__codelineno-54-21"></a>Changing<span class="w"> </span>permissions<span class="w"> </span><span class="k">for</span><span class="w"> </span>/dev/vfio/319<span class="w"> </span>to<span class="w"> </span>rw-rw----
</code></pre></div>
<p><strong>3.</strong> Check that the accelerators are present using <code>fpgainfo</code>. <em>Note your port configuration may differ from the below.</em></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>sudo<span class="w"> </span>fpgainfo<span class="w"> </span>port<span class="w"> </span>
<a id="__codelineno-55-2" name="__codelineno-55-2" href="#__codelineno-55-2"></a>//******<span class="w"> </span>PORT<span class="w"> </span>******//
<a id="__codelineno-55-3" name="__codelineno-55-3" href="#__codelineno-55-3"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xEC00000
<a id="__codelineno-55-4" name="__codelineno-55-4" href="#__codelineno-55-4"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:B1:00.0
<a id="__codelineno-55-5" name="__codelineno-55-5" href="#__codelineno-55-5"></a>Vendor<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x8086
<a id="__codelineno-55-6" name="__codelineno-55-6" href="#__codelineno-55-6"></a>Device<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xBCCE
<a id="__codelineno-55-7" name="__codelineno-55-7" href="#__codelineno-55-7"></a>SubVendor<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x8086
<a id="__codelineno-55-8" name="__codelineno-55-8" href="#__codelineno-55-8"></a>SubDevice<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x1771
<a id="__codelineno-55-9" name="__codelineno-55-9" href="#__codelineno-55-9"></a>Socket<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x00
<a id="__codelineno-55-10" name="__codelineno-55-10" href="#__codelineno-55-10"></a>//******<span class="w"> </span>PORT<span class="w"> </span>******//
<a id="__codelineno-55-11" name="__codelineno-55-11" href="#__codelineno-55-11"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xE0B1000000000000
<a id="__codelineno-55-12" name="__codelineno-55-12" href="#__codelineno-55-12"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:B1:00.7
<a id="__codelineno-55-13" name="__codelineno-55-13" href="#__codelineno-55-13"></a>Vendor<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x8086
<a id="__codelineno-55-14" name="__codelineno-55-14" href="#__codelineno-55-14"></a>Device<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xBCCF
<a id="__codelineno-55-15" name="__codelineno-55-15" href="#__codelineno-55-15"></a>SubVendor<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x8086
<a id="__codelineno-55-16" name="__codelineno-55-16" href="#__codelineno-55-16"></a>SubDevice<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x1771
<a id="__codelineno-55-17" name="__codelineno-55-17" href="#__codelineno-55-17"></a>Socket<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x01
<a id="__codelineno-55-18" name="__codelineno-55-18" href="#__codelineno-55-18"></a>Accelerator<span class="w"> </span>GUID<span class="w">                 </span>:<span class="w"> </span>4dadea34-2c78-48cb-a3dc-5b831f5cecbb
<a id="__codelineno-55-19" name="__codelineno-55-19" href="#__codelineno-55-19"></a>//******<span class="w"> </span>PORT<span class="w"> </span>******//
<a id="__codelineno-55-20" name="__codelineno-55-20" href="#__codelineno-55-20"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xC0B1000000000000
<a id="__codelineno-55-21" name="__codelineno-55-21" href="#__codelineno-55-21"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:B1:00.6
<a id="__codelineno-55-22" name="__codelineno-55-22" href="#__codelineno-55-22"></a>Vendor<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x8086
<a id="__codelineno-55-23" name="__codelineno-55-23" href="#__codelineno-55-23"></a>Device<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xBCCF
<a id="__codelineno-55-24" name="__codelineno-55-24" href="#__codelineno-55-24"></a>SubVendor<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x8086
<a id="__codelineno-55-25" name="__codelineno-55-25" href="#__codelineno-55-25"></a>SubDevice<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x1771
<a id="__codelineno-55-26" name="__codelineno-55-26" href="#__codelineno-55-26"></a>Socket<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x01
<a id="__codelineno-55-27" name="__codelineno-55-27" href="#__codelineno-55-27"></a>Accelerator<span class="w"> </span>GUID<span class="w">                 </span>:<span class="w"> </span>823c334c-98bf-11ea-bb37-0242ac130002
<a id="__codelineno-55-28" name="__codelineno-55-28" href="#__codelineno-55-28"></a>//******<span class="w"> </span>PORT<span class="w"> </span>******//
<a id="__codelineno-55-29" name="__codelineno-55-29" href="#__codelineno-55-29"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xA0B1000000000000
<a id="__codelineno-55-30" name="__codelineno-55-30" href="#__codelineno-55-30"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:B1:00.5
<a id="__codelineno-55-31" name="__codelineno-55-31" href="#__codelineno-55-31"></a>Vendor<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x8086
<a id="__codelineno-55-32" name="__codelineno-55-32" href="#__codelineno-55-32"></a>Device<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xBCCF
<a id="__codelineno-55-33" name="__codelineno-55-33" href="#__codelineno-55-33"></a>SubVendor<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x8086
<a id="__codelineno-55-34" name="__codelineno-55-34" href="#__codelineno-55-34"></a>SubDevice<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x1771
<a id="__codelineno-55-35" name="__codelineno-55-35" href="#__codelineno-55-35"></a>Socket<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x01
<a id="__codelineno-55-36" name="__codelineno-55-36" href="#__codelineno-55-36"></a>Accelerator<span class="w"> </span>GUID<span class="w">                 </span>:<span class="w"> </span>8568ab4e-6ba5-4616-bb65-2a578330a8eb
<a id="__codelineno-55-37" name="__codelineno-55-37" href="#__codelineno-55-37"></a>//******<span class="w"> </span>PORT<span class="w"> </span>******//
<a id="__codelineno-55-38" name="__codelineno-55-38" href="#__codelineno-55-38"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x80B1000000000000
<a id="__codelineno-55-39" name="__codelineno-55-39" href="#__codelineno-55-39"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:B1:00.4
<a id="__codelineno-55-40" name="__codelineno-55-40" href="#__codelineno-55-40"></a>Vendor<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x8086
<a id="__codelineno-55-41" name="__codelineno-55-41" href="#__codelineno-55-41"></a>Device<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xBCCE
<a id="__codelineno-55-42" name="__codelineno-55-42" href="#__codelineno-55-42"></a>SubVendor<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x8086
<a id="__codelineno-55-43" name="__codelineno-55-43" href="#__codelineno-55-43"></a>SubDevice<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x1771
<a id="__codelineno-55-44" name="__codelineno-55-44" href="#__codelineno-55-44"></a>Socket<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x01
<a id="__codelineno-55-45" name="__codelineno-55-45" href="#__codelineno-55-45"></a>Accelerator<span class="w"> </span>GUID<span class="w">                 </span>:<span class="w"> </span>44bfc10d-b42a-44e5-bd42-57dc93ea7f91
<a id="__codelineno-55-46" name="__codelineno-55-46" href="#__codelineno-55-46"></a>//******<span class="w"> </span>PORT<span class="w"> </span>******//
<a id="__codelineno-55-47" name="__codelineno-55-47" href="#__codelineno-55-47"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x40B1000000000000
<a id="__codelineno-55-48" name="__codelineno-55-48" href="#__codelineno-55-48"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:B1:00.2
<a id="__codelineno-55-49" name="__codelineno-55-49" href="#__codelineno-55-49"></a>Vendor<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x8086
<a id="__codelineno-55-50" name="__codelineno-55-50" href="#__codelineno-55-50"></a>Device<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xBCCE
<a id="__codelineno-55-51" name="__codelineno-55-51" href="#__codelineno-55-51"></a>SubVendor<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x8086
<a id="__codelineno-55-52" name="__codelineno-55-52" href="#__codelineno-55-52"></a>SubDevice<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x1771
<a id="__codelineno-55-53" name="__codelineno-55-53" href="#__codelineno-55-53"></a>Socket<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x01
<a id="__codelineno-55-54" name="__codelineno-55-54" href="#__codelineno-55-54"></a>Accelerator<span class="w"> </span>GUID<span class="w">                 </span>:<span class="w"> </span>56e203e9-864f-49a7-b94b-12284c31e02b
<a id="__codelineno-55-55" name="__codelineno-55-55" href="#__codelineno-55-55"></a>//******<span class="w"> </span>PORT<span class="w"> </span>******//
<a id="__codelineno-55-56" name="__codelineno-55-56" href="#__codelineno-55-56"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x20B1000000000000
<a id="__codelineno-55-57" name="__codelineno-55-57" href="#__codelineno-55-57"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:B1:00.1
<a id="__codelineno-55-58" name="__codelineno-55-58" href="#__codelineno-55-58"></a>Vendor<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x8086
<a id="__codelineno-55-59" name="__codelineno-55-59" href="#__codelineno-55-59"></a>Device<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xBCCE
<a id="__codelineno-55-60" name="__codelineno-55-60" href="#__codelineno-55-60"></a>SubVendor<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x8086
<a id="__codelineno-55-61" name="__codelineno-55-61" href="#__codelineno-55-61"></a>SubDevice<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x1771
<a id="__codelineno-55-62" name="__codelineno-55-62" href="#__codelineno-55-62"></a>Socket<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x01
<a id="__codelineno-55-63" name="__codelineno-55-63" href="#__codelineno-55-63"></a>Accelerator<span class="w"> </span>GUID<span class="w">                 </span>:<span class="w"> </span>3e7b60a0-df2d-4850-aa31-f54a3e403501
</code></pre></div>
<p>The following table contains a mapping between each VF, Accelerator GUID, and component.</p>
<h6 id="table-16-accelerator-pfvf-and-guid-mappings">Table 16: Accelerator PF/VF and GUID Mappings<a class="headerlink" href="#table-16-accelerator-pfvf-and-guid-mappings" title="Permanent link">&para;</a></h6>
<table>
<thead>
<tr>
<th>Component</th>
<th>VF</th>
<th>Accelerator GUID</th>
</tr>
</thead>
<tbody>
<tr>
<td>Intel N6001-PL FPGA SmartNIC Platform base PF</td>
<td>XXXX:XX:XX.0</td>
<td>N/A</td>
</tr>
<tr>
<td>VirtIO Stub</td>
<td>XXXX:XX:XX.1</td>
<td>3e7b60a0-df2d-4850-aa31-f54a3e403501</td>
</tr>
<tr>
<td>HE-MEM Stub</td>
<td>XXXX:XX:XX.2</td>
<td>56e203e9-864f-49a7-b94b-12284c31e02b</td>
</tr>
<tr>
<td>Copy Engine</td>
<td>XXXX:XX:XX.4</td>
<td>44bfc10d-b42a-44e5-bd42-57dc93ea7f91</td>
</tr>
<tr>
<td>HE-MEM</td>
<td>XXXX:XX:XX.5</td>
<td>8568ab4e-6ba5-4616-bb65-2a578330a8eb</td>
</tr>
<tr>
<td>HE-HSSI</td>
<td>XXXX:XX:XX.6</td>
<td>823c334c-98bf-11ea-bb37-0242ac130002</td>
</tr>
<tr>
<td>MEM-TG</td>
<td>XXXX:XX:XX.7</td>
<td>4dadea34-2c78-48cb-a3dc-5b831f5cecbb</td>
</tr>
</tbody>
</table>
<p><strong>4.</strong> Check Ethernet PHY settings with <code>fpgainfo</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>sudo<span class="w"> </span>fpgainfo<span class="w"> </span>phy<span class="w"> </span>-B<span class="w"> </span>0xb1<span class="w"> </span>
<a id="__codelineno-56-2" name="__codelineno-56-2" href="#__codelineno-56-2"></a>IIntel<span class="w"> </span>Acceleration<span class="w"> </span>Development<span class="w"> </span>Platform<span class="w"> </span>N6001
<a id="__codelineno-56-3" name="__codelineno-56-3" href="#__codelineno-56-3"></a>Board<span class="w"> </span>Management<span class="w"> </span>Controller<span class="w"> </span>NIOS<span class="w"> </span>FW<span class="w"> </span>version:<span class="w"> </span><span class="m">3</span>.11.0
<a id="__codelineno-56-4" name="__codelineno-56-4" href="#__codelineno-56-4"></a>Board<span class="w"> </span>Management<span class="w"> </span>Controller<span class="w"> </span>Build<span class="w"> </span>version:<span class="w"> </span><span class="m">3</span>.11.0
<a id="__codelineno-56-5" name="__codelineno-56-5" href="#__codelineno-56-5"></a>//******<span class="w"> </span>FME<span class="w"> </span>******//
<a id="__codelineno-56-6" name="__codelineno-56-6" href="#__codelineno-56-6"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xED00001
<a id="__codelineno-56-7" name="__codelineno-56-7" href="#__codelineno-56-7"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:B1:00.0
<a id="__codelineno-56-8" name="__codelineno-56-8" href="#__codelineno-56-8"></a>Vendor<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x8086
<a id="__codelineno-56-9" name="__codelineno-56-9" href="#__codelineno-56-9"></a>Device<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xBCCE
<a id="__codelineno-56-10" name="__codelineno-56-10" href="#__codelineno-56-10"></a>SubVendor<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x8086
<a id="__codelineno-56-11" name="__codelineno-56-11" href="#__codelineno-56-11"></a>SubDevice<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x1771
<a id="__codelineno-56-12" name="__codelineno-56-12" href="#__codelineno-56-12"></a>Socket<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x00
<a id="__codelineno-56-13" name="__codelineno-56-13" href="#__codelineno-56-13"></a>Ports<span class="w"> </span>Num<span class="w">                        </span>:<span class="w"> </span><span class="m">01</span>
<a id="__codelineno-56-14" name="__codelineno-56-14" href="#__codelineno-56-14"></a>Bitstream<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span><span class="m">360571655976424377</span>
<a id="__codelineno-56-15" name="__codelineno-56-15" href="#__codelineno-56-15"></a>Bitstream<span class="w"> </span>Version<span class="w">                </span>:<span class="w"> </span><span class="m">5</span>.0.1
<a id="__codelineno-56-16" name="__codelineno-56-16" href="#__codelineno-56-16"></a>Pr<span class="w"> </span>Interface<span class="w"> </span>Id<span class="w">                  </span>:<span class="w"> </span>4514ee67-ca01-5def-9fa5-a1ef30d0c76c
<a id="__codelineno-56-17" name="__codelineno-56-17" href="#__codelineno-56-17"></a>//******<span class="w"> </span>HSSI<span class="w"> </span>information<span class="w"> </span>******//
<a id="__codelineno-56-18" name="__codelineno-56-18" href="#__codelineno-56-18"></a>HSSI<span class="w"> </span>version<span class="w">                     </span>:<span class="w"> </span><span class="m">1</span>.0
<a id="__codelineno-56-19" name="__codelineno-56-19" href="#__codelineno-56-19"></a>Number<span class="w"> </span>of<span class="w"> </span>ports<span class="w">                  </span>:<span class="w"> </span><span class="m">8</span>
<a id="__codelineno-56-20" name="__codelineno-56-20" href="#__codelineno-56-20"></a>Port0<span class="w">                            </span>:25GbE<span class="w">        </span>DOWN
<a id="__codelineno-56-21" name="__codelineno-56-21" href="#__codelineno-56-21"></a>Port1<span class="w">                            </span>:25GbE<span class="w">        </span>DOWN
<a id="__codelineno-56-22" name="__codelineno-56-22" href="#__codelineno-56-22"></a>Port2<span class="w">                            </span>:25GbE<span class="w">        </span>DOWN
<a id="__codelineno-56-23" name="__codelineno-56-23" href="#__codelineno-56-23"></a>Port3<span class="w">                            </span>:25GbE<span class="w">        </span>DOWN
<a id="__codelineno-56-24" name="__codelineno-56-24" href="#__codelineno-56-24"></a>Port4<span class="w">                            </span>:25GbE<span class="w">        </span>DOWN
<a id="__codelineno-56-25" name="__codelineno-56-25" href="#__codelineno-56-25"></a>Port5<span class="w">                            </span>:25GbE<span class="w">        </span>DOWN
<a id="__codelineno-56-26" name="__codelineno-56-26" href="#__codelineno-56-26"></a>Port6<span class="w">                            </span>:25GbE<span class="w">        </span>DOWN
<a id="__codelineno-56-27" name="__codelineno-56-27" href="#__codelineno-56-27"></a>Port7<span class="w">                            </span>:25GbE<span class="w">        </span>DOWN
</code></pre></div>
<p><strong>5.</strong> Set loopback mode.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a>sudo<span class="w"> </span>hssiloopback<span class="w"> </span>--loopback<span class="w"> </span><span class="nb">enable</span><span class="w">  </span>--pcie-address<span class="w"> </span><span class="m">0000</span>:b1:00.0<span class="w"> </span>
<a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a>args<span class="w"> </span>Namespace<span class="o">(</span><span class="nv">loopback</span><span class="o">=</span><span class="s1">&#39;enable&#39;</span>,<span class="w"> </span><span class="nv">pcie_address</span><span class="o">=</span><span class="s1">&#39;0000:b1:00.0&#39;</span>,<span class="w"> </span><span class="nv">port</span><span class="o">=</span><span class="m">0</span><span class="o">)</span>
<a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a>sbdf:<span class="w"> </span><span class="m">0000</span>:b1:00.0
<a id="__codelineno-57-4" name="__codelineno-57-4" href="#__codelineno-57-4"></a>FPGA<span class="w"> </span>dev:<span class="w"> </span><span class="o">{</span><span class="s1">&#39;segment&#39;</span>:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="s1">&#39;bus&#39;</span>:<span class="w"> </span><span class="m">177</span>,<span class="w"> </span><span class="s1">&#39;dev&#39;</span>:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="s1">&#39;func&#39;</span>:<span class="w"> </span><span class="m">0</span>,<span class="w"> </span><span class="s1">&#39;path&#39;</span>:<span class="w"> </span><span class="s1">&#39;/sys/class/fpga_region/region0&#39;</span>,<span class="w"> </span><span class="s1">&#39;pcie_address&#39;</span>:<span class="w"> </span><span class="s1">&#39;0000:b1:00.0&#39;</span><span class="o">}</span>
<a id="__codelineno-57-5" name="__codelineno-57-5" href="#__codelineno-57-5"></a>args.hssi_grps<span class="o">{</span><span class="m">0</span>:<span class="w"> </span><span class="o">[</span><span class="s1">&#39;dfl_dev.6&#39;</span>,<span class="w"> </span><span class="o">[</span><span class="s1">&#39;/sys/bus/pci/devices/0000:b1:00.0/fpga_region/region0/dfl-fme.0/dfl_dev.6/uio/uio0&#39;</span><span class="o">]]}</span>
<a id="__codelineno-57-6" name="__codelineno-57-6" href="#__codelineno-57-6"></a>fpga<span class="w"> </span>uio<span class="w"> </span>dev:dfl_dev.6
<a id="__codelineno-57-7" name="__codelineno-57-7" href="#__codelineno-57-7"></a>
<a id="__codelineno-57-8" name="__codelineno-57-8" href="#__codelineno-57-8"></a>--------HSSI<span class="w"> </span>INFO<span class="w"> </span>START-------
<a id="__codelineno-57-9" name="__codelineno-57-9" href="#__codelineno-57-9"></a>DFH<span class="w">                     </span>:0x3000000010002015
<a id="__codelineno-57-10" name="__codelineno-57-10" href="#__codelineno-57-10"></a>HSSI<span class="w"> </span>ID<span class="w">                 </span>:0x15
<a id="__codelineno-57-11" name="__codelineno-57-11" href="#__codelineno-57-11"></a>DFHv<span class="w">                    </span>:0.5
<a id="__codelineno-57-12" name="__codelineno-57-12" href="#__codelineno-57-12"></a>guidl<span class="w">                   </span>:0x99a078ad18418b9d
<a id="__codelineno-57-13" name="__codelineno-57-13" href="#__codelineno-57-13"></a>guidh<span class="w">                   </span>:0x4118a7cbd9db4a9b
<a id="__codelineno-57-14" name="__codelineno-57-14" href="#__codelineno-57-14"></a>HSSI<span class="w"> </span>version<span class="w">            </span>:1.0
<a id="__codelineno-57-15" name="__codelineno-57-15" href="#__codelineno-57-15"></a>Firmware<span class="w"> </span>Version<span class="w">        </span>:1
<a id="__codelineno-57-16" name="__codelineno-57-16" href="#__codelineno-57-16"></a>HSSI<span class="w"> </span>num<span class="w"> </span>ports<span class="w">          </span>:8
<a id="__codelineno-57-17" name="__codelineno-57-17" href="#__codelineno-57-17"></a>Port0<span class="w">                   </span>:25GbE
<a id="__codelineno-57-18" name="__codelineno-57-18" href="#__codelineno-57-18"></a>Port1<span class="w">                   </span>:25GbE
<a id="__codelineno-57-19" name="__codelineno-57-19" href="#__codelineno-57-19"></a>Port2<span class="w">                   </span>:25GbE
<a id="__codelineno-57-20" name="__codelineno-57-20" href="#__codelineno-57-20"></a>Port3<span class="w">                   </span>:25GbE
<a id="__codelineno-57-21" name="__codelineno-57-21" href="#__codelineno-57-21"></a>Port4<span class="w">                   </span>:25GbE
<a id="__codelineno-57-22" name="__codelineno-57-22" href="#__codelineno-57-22"></a>Port5<span class="w">                   </span>:25GbE
<a id="__codelineno-57-23" name="__codelineno-57-23" href="#__codelineno-57-23"></a>Port6<span class="w">                   </span>:25GbE
<a id="__codelineno-57-24" name="__codelineno-57-24" href="#__codelineno-57-24"></a>Port7<span class="w">                   </span>:25GbE
<a id="__codelineno-57-25" name="__codelineno-57-25" href="#__codelineno-57-25"></a>--------HSSI<span class="w"> </span>INFO<span class="w"> </span>END-------
<a id="__codelineno-57-26" name="__codelineno-57-26" href="#__codelineno-57-26"></a>
<a id="__codelineno-57-27" name="__codelineno-57-27" href="#__codelineno-57-27"></a>hssi<span class="w"> </span>loopback<span class="w"> </span>enabled<span class="w"> </span>to<span class="w"> </span>port0
</code></pre></div>
<p><strong>6.</strong> Send traffic through the 10G <abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>sudo<span class="w"> </span>hssi<span class="w"> </span>--pci-address<span class="w"> </span>b1:00.6<span class="w"> </span>hssi_10g<span class="w"> </span>--num-packets<span class="w"> </span><span class="m">100</span><span class="w">       </span>
<a id="__codelineno-58-2" name="__codelineno-58-2" href="#__codelineno-58-2"></a>10G<span class="w"> </span>loopback<span class="w"> </span><span class="nb">test</span>
<a id="__codelineno-58-3" name="__codelineno-58-3" href="#__codelineno-58-3"></a><span class="w">  </span>port:<span class="w"> </span><span class="m">0</span>
<a id="__codelineno-58-4" name="__codelineno-58-4" href="#__codelineno-58-4"></a><span class="w">  </span>eth_loopback:<span class="w"> </span>on
<a id="__codelineno-58-5" name="__codelineno-58-5" href="#__codelineno-58-5"></a><span class="w">  </span>he_loopback:<span class="w"> </span>none
<a id="__codelineno-58-6" name="__codelineno-58-6" href="#__codelineno-58-6"></a><span class="w">  </span>num_packets:<span class="w"> </span><span class="m">100</span>
<a id="__codelineno-58-7" name="__codelineno-58-7" href="#__codelineno-58-7"></a><span class="w">  </span>packet_length:<span class="w"> </span><span class="m">64</span>
<a id="__codelineno-58-8" name="__codelineno-58-8" href="#__codelineno-58-8"></a><span class="w">  </span>src_address:<span class="w"> </span><span class="m">11</span>:22:33:44:55:66
<a id="__codelineno-58-9" name="__codelineno-58-9" href="#__codelineno-58-9"></a><span class="w">    </span><span class="o">(</span>bits<span class="o">)</span>:<span class="w"> </span>0x665544332211
<a id="__codelineno-58-10" name="__codelineno-58-10" href="#__codelineno-58-10"></a><span class="w">  </span>dest_address:<span class="w"> </span><span class="m">77</span>:88:99:aa:bb:cc
<a id="__codelineno-58-11" name="__codelineno-58-11" href="#__codelineno-58-11"></a><span class="w">    </span><span class="o">(</span>bits<span class="o">)</span>:<span class="w"> </span>0xccbbaa998877
<a id="__codelineno-58-12" name="__codelineno-58-12" href="#__codelineno-58-12"></a><span class="w">  </span>random_length:<span class="w"> </span>fixed
<a id="__codelineno-58-13" name="__codelineno-58-13" href="#__codelineno-58-13"></a><span class="w">  </span>random_payload:<span class="w"> </span>incremental
<a id="__codelineno-58-14" name="__codelineno-58-14" href="#__codelineno-58-14"></a><span class="w">  </span>rnd_seed0:<span class="w"> </span>5eed0000
<a id="__codelineno-58-15" name="__codelineno-58-15" href="#__codelineno-58-15"></a><span class="w">  </span>rnd_seed1:<span class="w"> </span>5eed0001
<a id="__codelineno-58-16" name="__codelineno-58-16" href="#__codelineno-58-16"></a><span class="w">  </span>rnd_seed2:<span class="w"> </span>25eed
<a id="__codelineno-58-17" name="__codelineno-58-17" href="#__codelineno-58-17"></a><span class="w">  </span>eth:
<a id="__codelineno-58-18" name="__codelineno-58-18" href="#__codelineno-58-18"></a>
<a id="__codelineno-58-19" name="__codelineno-58-19" href="#__codelineno-58-19"></a>No<span class="w"> </span>eth<span class="w"> </span>interface,<span class="w"> </span>so<span class="w"> </span>not<span class="w"> </span>honoring<span class="w"> </span>--eth-loopback.
<a id="__codelineno-58-20" name="__codelineno-58-20" href="#__codelineno-58-20"></a>0x40000<span class="w">           </span>ETH_AFU_DFH:<span class="w"> </span>0x1000010000001000
<a id="__codelineno-58-21" name="__codelineno-58-21" href="#__codelineno-58-21"></a>0x40008<span class="w">          </span>ETH_AFU_ID_L:<span class="w"> </span>0xbb370242ac130002
<a id="__codelineno-58-22" name="__codelineno-58-22" href="#__codelineno-58-22"></a>0x40010<span class="w">          </span>ETH_AFU_ID_H:<span class="w"> </span>0x823c334c98bf11ea
<a id="__codelineno-58-23" name="__codelineno-58-23" href="#__codelineno-58-23"></a>0x40030<span class="w">      </span>TRAFFIC_CTRL_CMD:<span class="w"> </span>0x0000000000000000
<a id="__codelineno-58-24" name="__codelineno-58-24" href="#__codelineno-58-24"></a>0x40038<span class="w">     </span>TRAFFIC_CTRL_DATA:<span class="w"> </span>0x0000000100000000
<a id="__codelineno-58-25" name="__codelineno-58-25" href="#__codelineno-58-25"></a>0x40040<span class="w"> </span>TRAFFIC_CTRL_PORT_SEL:<span class="w"> </span>0x0000000000000000
<a id="__codelineno-58-26" name="__codelineno-58-26" href="#__codelineno-58-26"></a>0x40048<span class="w">        </span>AFU_SCRATCHPAD:<span class="w"> </span>0x0000000045324511
<a id="__codelineno-58-27" name="__codelineno-58-27" href="#__codelineno-58-27"></a>
<a id="__codelineno-58-28" name="__codelineno-58-28" href="#__codelineno-58-28"></a>0x3c00<span class="w">         </span>number_packets:<span class="w"> </span>0x00000064
<a id="__codelineno-58-29" name="__codelineno-58-29" href="#__codelineno-58-29"></a>0x3c01<span class="w">          </span>random_length:<span class="w"> </span>0x00000000
<a id="__codelineno-58-30" name="__codelineno-58-30" href="#__codelineno-58-30"></a>0x3c02<span class="w">         </span>random_payload:<span class="w"> </span>0x00000000
<a id="__codelineno-58-31" name="__codelineno-58-31" href="#__codelineno-58-31"></a>0x3c03<span class="w">                  </span>start:<span class="w"> </span>0x00000000
<a id="__codelineno-58-32" name="__codelineno-58-32" href="#__codelineno-58-32"></a>0x3c04<span class="w">                   </span>stop:<span class="w"> </span>0x00000000
<a id="__codelineno-58-33" name="__codelineno-58-33" href="#__codelineno-58-33"></a>0x3c05<span class="w">           </span>source_addr0:<span class="w"> </span>0x44332211
<a id="__codelineno-58-34" name="__codelineno-58-34" href="#__codelineno-58-34"></a>0x3c06<span class="w">           </span>source_addr1:<span class="w"> </span>0x00006655
<a id="__codelineno-58-35" name="__codelineno-58-35" href="#__codelineno-58-35"></a>0x3c07<span class="w">             </span>dest_addr0:<span class="w"> </span>0xaa998877
<a id="__codelineno-58-36" name="__codelineno-58-36" href="#__codelineno-58-36"></a>0x3c08<span class="w">             </span>dest_addr1:<span class="w"> </span>0x0000ccbb
<a id="__codelineno-58-37" name="__codelineno-58-37" href="#__codelineno-58-37"></a>0x3c09<span class="w">        </span>packet_tx_count:<span class="w"> </span>0x00000064
<a id="__codelineno-58-38" name="__codelineno-58-38" href="#__codelineno-58-38"></a>0x3c0a<span class="w">              </span>rnd_seed0:<span class="w"> </span>0x5eed0000
<a id="__codelineno-58-39" name="__codelineno-58-39" href="#__codelineno-58-39"></a>0x3c0b<span class="w">              </span>rnd_seed1:<span class="w"> </span>0x5eed0001
<a id="__codelineno-58-40" name="__codelineno-58-40" href="#__codelineno-58-40"></a>0x3c0c<span class="w">              </span>rnd_seed2:<span class="w"> </span>0x00025eed
<a id="__codelineno-58-41" name="__codelineno-58-41" href="#__codelineno-58-41"></a>0x3c0d<span class="w">             </span>pkt_length:<span class="w"> </span>0x00000040
<a id="__codelineno-58-42" name="__codelineno-58-42" href="#__codelineno-58-42"></a>0x3cf4<span class="w">          </span>tx_end_tstamp:<span class="w"> </span>0x000003d2
<a id="__codelineno-58-43" name="__codelineno-58-43" href="#__codelineno-58-43"></a>0x3d00<span class="w">                </span>num_pkt:<span class="w"> </span>0xffffffff
<a id="__codelineno-58-44" name="__codelineno-58-44" href="#__codelineno-58-44"></a>0x3d01<span class="w">               </span>pkt_good:<span class="w"> </span>0x00000064
<a id="__codelineno-58-45" name="__codelineno-58-45" href="#__codelineno-58-45"></a>0x3d02<span class="w">                </span>pkt_bad:<span class="w"> </span>0x00000000
<a id="__codelineno-58-46" name="__codelineno-58-46" href="#__codelineno-58-46"></a>0x3d07<span class="w">            </span>avst_rx_err:<span class="w"> </span>0x00000000
<a id="__codelineno-58-47" name="__codelineno-58-47" href="#__codelineno-58-47"></a>0x3d0b<span class="w">          </span>rx_sta_tstamp:<span class="w"> </span>0x00000103
<a id="__codelineno-58-48" name="__codelineno-58-48" href="#__codelineno-58-48"></a>0x3d0c<span class="w">          </span>rx_end_tstamp:<span class="w"> </span>0x0000053b
<a id="__codelineno-58-49" name="__codelineno-58-49" href="#__codelineno-58-49"></a>0x3e00<span class="w">               </span>mac_loop:<span class="w"> </span>0x00000000
<a id="__codelineno-58-50" name="__codelineno-58-50" href="#__codelineno-58-50"></a>
<a id="__codelineno-58-51" name="__codelineno-58-51" href="#__codelineno-58-51"></a>HSSI<span class="w"> </span>performance:
<a id="__codelineno-58-52" name="__codelineno-58-52" href="#__codelineno-58-52"></a><span class="w">        </span>Selected<span class="w"> </span>clock<span class="w"> </span>frequency<span class="w"> </span>:<span class="w"> </span><span class="m">402</span>.832<span class="w"> </span>MHz
<a id="__codelineno-58-53" name="__codelineno-58-53" href="#__codelineno-58-53"></a><span class="w">        </span>Latency<span class="w"> </span>minimum<span class="w"> </span>:<span class="w"> </span><span class="m">642</span>.948<span class="w"> </span>ns
<a id="__codelineno-58-54" name="__codelineno-58-54" href="#__codelineno-58-54"></a><span class="w">        </span>Latency<span class="w"> </span>maximum<span class="w"> </span>:<span class="w"> </span><span class="m">896</span>.155<span class="w"> </span>ns
<a id="__codelineno-58-55" name="__codelineno-58-55" href="#__codelineno-58-55"></a><span class="w">        </span>Achieved<span class="w"> </span>Tx<span class="w"> </span>throughput<span class="w"> </span>:<span class="w"> </span><span class="m">18</span>.4528<span class="w"> </span>GB/s
<a id="__codelineno-58-56" name="__codelineno-58-56" href="#__codelineno-58-56"></a><span class="w">        </span>Achieved<span class="w"> </span>Rx<span class="w"> </span>throughput<span class="w"> </span>:<span class="w"> </span><span class="m">16</span>.7101<span class="w"> </span>GB/s
<a id="__codelineno-58-57" name="__codelineno-58-57" href="#__codelineno-58-57"></a>
<a id="__codelineno-58-58" name="__codelineno-58-58" href="#__codelineno-58-58"></a>No<span class="w"> </span>eth<span class="w"> </span>interface,<span class="w"> </span>so<span class="w"> </span>not<span class="w"> </span>showing<span class="w"> </span>stats.
</code></pre></div>
<p>The <code>hssi_loopback</code> utility works in conjunction with a packet generator accelerator function unit (<abbr title="Accelerator Functional Unit, Hardware Accelerator implemented in FPGA logic which offloads a computational operation for an application from the CPU to improve performance. Note: An AFU region is the part of the design where an AFU may reside. This AFU may or may not be a partial reconfiguration region">AFU</abbr>) to test high-speed serial interface (HSSI) cards. The hssi_loopback utility tests both external and internal loopbacks.</p>
<p>The <code>hssistats</code> tool provides the MAC statistics.</p>
<h2 id="50-upgrading-the-intel-fpga-smartnic-n6001-pl-with-20231-version-of-the-bmc-and-fim">5.0 Upgrading the Intel® FPGA SmartNIC N6001-PL with 2023.1 Version of the <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> and <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr><a class="headerlink" href="#50-upgrading-the-intel-fpga-smartnic-n6001-pl-with-20231-version-of-the-bmc-and-fim" title="Permanent link">&para;</a></h2>
<p>If your Intel® FPGA SmartNIC N6001-PL does not have the 2022.3.1 version of the <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> and <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr>, use this section to begin your upgrade process. The upgrade process depends on both the <abbr title="Open Programmable Acceleration Engine Software Development Kit, A collection of libraries and tools to facilitate the development of software applications and accelerators using OPAE.">OPAE SDK</abbr> and kernel drivers, which were installed in sections <a href="#30-ofs-dfl-kernel-drivers">3.0 Intel <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> <abbr title="Device Feature List, A concept inherited from OFS. The DFL drivers provide support for FPGA devices that are designed to support the Device Feature List. The DFL, which is implemented in RTL, consists of a self-describing data structure in PCI BAR space that allows the DFL driver to automatically load the drivers required for a given FPGA configuration.">DFL</abbr> Kernel Drivers</a> and <a href="#40-opae-software-development-kit">4.0 OPAE Software Development Kit</a>. Use the output of <strong>fpgainfo</strong> and compare against the table below to determine if an upgade is necessary.</p>
<h3 id="table-17-fim-version-summary-for-intel-ofs-20231-release">Table 17: <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> Version Summary for Intel <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> 2023.1 Release<a class="headerlink" href="#table-17-fim-version-summary-for-intel-ofs-20231-release" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th><abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> Version</th>
<th>Bitstream ID</th>
<th>Pr Interface ID</th>
<th>File Name</th>
<th>Download Location</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>360571655976424377</td>
<td>4514ee67-ca01-5def-9fa5-a1ef30d0c76c</td>
<td>ofs_top_page[&frac12;]_unsigned_user[&frac12;].bin</td>
<td><a href="https://github.com/OFS/ofs-n6001/releases/tag/ofs-2023.1-1">ofs-2023.1 Release Page</a></td>
</tr>
</tbody>
</table>
<h3 id="table-18-bmc-version-summary-for-intel-ofs-20231-release">Table 18: <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> Version Summary for Intel <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> 2023.1 Release<a class="headerlink" href="#table-18-bmc-version-summary-for-intel-ofs-20231-release" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th><abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr> FW and RTL Version</th>
<th>File Name</th>
<th>Download Location</th>
</tr>
</thead>
<tbody>
<tr>
<td>3.11.0</td>
<td>AC_BMC_RSU_user_retail_3.11.0_unsigned.rsu</td>
<td>n/a</td>
</tr>
</tbody>
</table>
<p>Sample output of <code>fpgainfo</code> with matching values:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a>Intel<span class="w"> </span>Acceleration<span class="w"> </span>Development<span class="w"> </span>Platform<span class="w"> </span>N6001
<a id="__codelineno-59-2" name="__codelineno-59-2" href="#__codelineno-59-2"></a>Board<span class="w"> </span>Management<span class="w"> </span>Controller<span class="w"> </span>NIOS<span class="w"> </span>FW<span class="w"> </span>version:<span class="w"> </span><span class="m">3</span>.11.0
<a id="__codelineno-59-3" name="__codelineno-59-3" href="#__codelineno-59-3"></a>Board<span class="w"> </span>Management<span class="w"> </span>Controller<span class="w"> </span>Build<span class="w"> </span>version:<span class="w"> </span><span class="m">3</span>.11.0
<a id="__codelineno-59-4" name="__codelineno-59-4" href="#__codelineno-59-4"></a>//******<span class="w"> </span>FME<span class="w"> </span>******//
<a id="__codelineno-59-5" name="__codelineno-59-5" href="#__codelineno-59-5"></a>Object<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xED00001
<a id="__codelineno-59-6" name="__codelineno-59-6" href="#__codelineno-59-6"></a>PCIe<span class="w"> </span>s:b:d.f<span class="w">                     </span>:<span class="w"> </span><span class="m">0000</span>:B1:00.0
<a id="__codelineno-59-7" name="__codelineno-59-7" href="#__codelineno-59-7"></a>Vendor<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x8086
<a id="__codelineno-59-8" name="__codelineno-59-8" href="#__codelineno-59-8"></a>Device<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0xBCCE
<a id="__codelineno-59-9" name="__codelineno-59-9" href="#__codelineno-59-9"></a>SubVendor<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x8086
<a id="__codelineno-59-10" name="__codelineno-59-10" href="#__codelineno-59-10"></a>SubDevice<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span>0x1771
<a id="__codelineno-59-11" name="__codelineno-59-11" href="#__codelineno-59-11"></a>Socket<span class="w"> </span>Id<span class="w">                        </span>:<span class="w"> </span>0x00
<a id="__codelineno-59-12" name="__codelineno-59-12" href="#__codelineno-59-12"></a>Ports<span class="w"> </span>Num<span class="w">                        </span>:<span class="w"> </span><span class="m">01</span>
<a id="__codelineno-59-13" name="__codelineno-59-13" href="#__codelineno-59-13"></a>Bitstream<span class="w"> </span>Id<span class="w">                     </span>:<span class="w"> </span><span class="m">360571655976424377</span>
<a id="__codelineno-59-14" name="__codelineno-59-14" href="#__codelineno-59-14"></a>Bitstream<span class="w"> </span>Version<span class="w">                </span>:<span class="w"> </span><span class="m">5</span>.0.1
<a id="__codelineno-59-15" name="__codelineno-59-15" href="#__codelineno-59-15"></a>Pr<span class="w"> </span>Interface<span class="w"> </span>Id<span class="w">                  </span>:<span class="w"> </span>4514ee67-ca01-5def-9fa5-a1ef30d0c76c
<a id="__codelineno-59-16" name="__codelineno-59-16" href="#__codelineno-59-16"></a>Boot<span class="w"> </span>Page<span class="w">                        </span>:<span class="w"> </span>user1
<a id="__codelineno-59-17" name="__codelineno-59-17" href="#__codelineno-59-17"></a>Factory<span class="w"> </span>Image<span class="w"> </span>Info<span class="w">               </span>:<span class="w"> </span>a2b5fd0e7afca4ee6d7048f926e75ac2
<a id="__codelineno-59-18" name="__codelineno-59-18" href="#__codelineno-59-18"></a>User1<span class="w"> </span>Image<span class="w"> </span>Info<span class="w">                 </span>:<span class="w"> </span>4514ee67-ca01-5def-9fa5-a1ef30d0c76c
<a id="__codelineno-59-19" name="__codelineno-59-19" href="#__codelineno-59-19"></a>User2<span class="w"> </span>Image<span class="w"> </span>Info<span class="w">                 </span>:<span class="w"> </span>4514ee67-ca01-5def-9fa5-a1ef30d0c76c
</code></pre></div>
<ol>
<li>If your output does not match the table above, download the appropriate <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> image from the <a href="https://github.com/OFS/ofs-n6001/releases/tag/ofs-2023.1-1">Intel <abbr title="Open FPGA Stack, A modular collection of hardware platform components, open source software, and broad ecosystem support that provides a standard and scalable model for AFU and software developers to optimize and reuse their designs.">OFS</abbr> 2023.1 (Intel Agilex)</a> release page. Once downloaded transfer the file over to the server and use the <strong>fpgasupdate</strong> utility to perform an upgrade of the <abbr title="Board Management Controller, Acts as the Root of Trust (RoT) on the Intel FPGA PAC platform. Supports features such as power sequence management and board monitoring through on-board sensors.">BMC</abbr>.</li>
</ol>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a>sudo<span class="w"> </span>fpgasupdate<span class="w"> </span>AC_BMC_RSU_user_retail_3.11.0_unsigned.rsu
<a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:32:47.93<span class="o">]</span><span class="w"> </span><span class="o">[</span>WARNING<span class="w"> </span><span class="o">]</span><span class="w"> </span>Update<span class="w"> </span>starting.<span class="w"> </span>Please<span class="w"> </span><span class="k">do</span><span class="w"> </span>not<span class="w"> </span>interrupt.<span class="w">                                           </span>
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:32:47.93<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>updating<span class="w"> </span>from<span class="w"> </span>file<span class="w"> </span>/home/user/AC_BMC_RSU_user_retail_3.11.0_unsigned.rsu<span class="w"> </span>with<span class="w"> </span>size<span class="w"> </span><span class="m">904064</span><span class="w">                                   </span>
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:32:47.94<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>idle<span class="w">                                                                    </span>
<a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:32:47.94<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>preparing<span class="w"> </span>image<span class="w"> </span>file<span class="w">                                                                </span>
<a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:33:26.98<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>writing<span class="w"> </span>image<span class="w"> </span>file<span class="w">                                                                  </span>
<a id="__codelineno-60-7" name="__codelineno-60-7" href="#__codelineno-60-7"></a><span class="o">(</span><span class="m">100</span>%<span class="o">)</span><span class="w"> </span><span class="o">[</span>████████████████████<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">904064</span>/904064<span class="w"> </span>bytes<span class="o">][</span>Elapsed<span class="w"> </span>Time:<span class="w"> </span><span class="m">0</span>:00:00.00<span class="o">]</span><span class="w">                                           </span>
<a id="__codelineno-60-8" name="__codelineno-60-8" href="#__codelineno-60-8"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:33:26.98<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>programming<span class="w"> </span>image<span class="w"> </span>file<span class="w">                                                              </span>
<a id="__codelineno-60-9" name="__codelineno-60-9" href="#__codelineno-60-9"></a><span class="o">(</span><span class="m">100</span>%<span class="o">)</span><span class="w"> </span><span class="o">[</span>████████████████████<span class="o">]</span><span class="w"> </span><span class="o">[</span>Elapsed<span class="w"> </span>Time:<span class="w"> </span><span class="m">0</span>:00:26.02<span class="o">]</span><span class="w">                                                                 </span>
<a id="__codelineno-60-10" name="__codelineno-60-10" href="#__codelineno-60-10"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:33:53.01<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>update<span class="w"> </span>of<span class="w"> </span><span class="m">0000</span>:b1:00.0<span class="w"> </span><span class="nb">complete</span><span class="w">                                                     </span>
<a id="__codelineno-60-11" name="__codelineno-60-11" href="#__codelineno-60-11"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:33:53.01<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>Secure<span class="w"> </span>update<span class="w"> </span>OK<span class="w">                                                                    </span>
<a id="__codelineno-60-12" name="__codelineno-60-12" href="#__codelineno-60-12"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:33:53.01<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>Total<span class="w"> </span>time:<span class="w"> </span><span class="m">0</span>:01:05.07
<a id="__codelineno-60-13" name="__codelineno-60-13" href="#__codelineno-60-13"></a>sudo<span class="w"> </span>rsu<span class="w"> </span>bmcimg
</code></pre></div>
2. Load the new <abbr title="FPGA Interface Manager, Provides platform management, functionality, clocks, resets and standard interfaces to host and AFUs. The FIM resides in the static region of the FPGA and contains the FPGA Management Engine (FME) and I/O ring.">FIM</abbr> image.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a>sudo<span class="w"> </span>fpgasupdate<span class="w"> </span>ofs_top_page1_unsigned_user1.bin<span class="w"> </span>&lt;PCI<span class="w"> </span>ADDRESS&gt;
<a id="__codelineno-61-2" name="__codelineno-61-2" href="#__codelineno-61-2"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:42:31.58<span class="o">]</span><span class="w"> </span><span class="o">[</span>WARNING<span class="w"> </span><span class="o">]</span><span class="w"> </span>Update<span class="w"> </span>starting.<span class="w"> </span>Please<span class="w"> </span><span class="k">do</span><span class="w"> </span>not<span class="w"> </span>interrupt.<span class="w">                                           </span>
<a id="__codelineno-61-3" name="__codelineno-61-3" href="#__codelineno-61-3"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:42:31.58<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>updating<span class="w"> </span>from<span class="w"> </span>file<span class="w"> </span>ofs_top_page1_pacsign_user1.bin<span class="w"> </span>with<span class="w"> </span>size<span class="w"> </span><span class="m">19928064</span><span class="w">               </span>
<a id="__codelineno-61-4" name="__codelineno-61-4" href="#__codelineno-61-4"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:42:31.60<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>waiting<span class="w"> </span><span class="k">for</span><span class="w"> </span>idle<span class="w">                                                                    </span>
<a id="__codelineno-61-5" name="__codelineno-61-5" href="#__codelineno-61-5"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:42:31.60<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>preparing<span class="w"> </span>image<span class="w"> </span>file<span class="w">                                                                </span>
<a id="__codelineno-61-6" name="__codelineno-61-6" href="#__codelineno-61-6"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:42:38.61<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>writing<span class="w"> </span>image<span class="w"> </span>file<span class="w">                                                                  </span>
<a id="__codelineno-61-7" name="__codelineno-61-7" href="#__codelineno-61-7"></a><span class="o">(</span><span class="m">100</span>%<span class="o">)</span><span class="w"> </span><span class="o">[</span>████████████████████<span class="o">]</span><span class="w"> </span><span class="o">[</span><span class="m">19928064</span>/19928064<span class="w"> </span>bytes<span class="o">][</span>Elapsed<span class="w"> </span>Time:<span class="w"> </span><span class="m">0</span>:00:16.01<span class="o">]</span><span class="w">                                       </span>
<a id="__codelineno-61-8" name="__codelineno-61-8" href="#__codelineno-61-8"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:42:54.63<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>programming<span class="w"> </span>image<span class="w"> </span>file<span class="w">                                                              </span>
<a id="__codelineno-61-9" name="__codelineno-61-9" href="#__codelineno-61-9"></a><span class="o">(</span><span class="m">100</span>%<span class="o">)</span><span class="w"> </span><span class="o">[</span>████████████████████<span class="o">][</span>Elapsed<span class="w"> </span>Time:<span class="w"> </span><span class="m">0</span>:06:16.40<span class="o">]</span><span class="w">                                                                 </span>
<a id="__codelineno-61-10" name="__codelineno-61-10" href="#__codelineno-61-10"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:49:11.03<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>update<span class="w"> </span>of<span class="w"> </span><span class="m">0000</span>:b1:00.0<span class="w"> </span><span class="nb">complete</span><span class="w">                                                     </span>
<a id="__codelineno-61-11" name="__codelineno-61-11" href="#__codelineno-61-11"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:49:11.03<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>Secure<span class="w"> </span>update<span class="w"> </span>OK<span class="w">                                                                    </span>
<a id="__codelineno-61-12" name="__codelineno-61-12" href="#__codelineno-61-12"></a><span class="o">[</span><span class="m">2022</span>-04-14<span class="w"> </span><span class="m">16</span>:49:11.03<span class="o">]</span><span class="w"> </span><span class="o">[</span>INFO<span class="w">    </span><span class="o">]</span><span class="w"> </span>Total<span class="w"> </span>time:<span class="w"> </span><span class="m">0</span>:06:39.45
<a id="__codelineno-61-13" name="__codelineno-61-13" href="#__codelineno-61-13"></a>sudo<span class="w"> </span>rsu<span class="w"> </span>fpga<span class="w"> </span>--page<span class="o">=</span>user1<span class="w"> </span>&lt;PCI<span class="w"> </span>ADDRESS&gt;
</code></pre></div>
<ol>
<li>Verify the output of <strong>fpgainfo</strong> matches the table above.</li>
</ol>
<p>---&gt;</p>
<h2 id="notices-disclaimers">Notices &amp; Disclaimers<a class="headerlink" href="#notices-disclaimers" title="Permanent link">&para;</a></h2>
<p>Intel<sup>&reg;</sup> technologies may require enabled hardware, software or service activation.
No product or component can be absolutely secure. 
Performance varies by use, configuration and other factors.
Your costs and results may vary. 
You may not use or facilitate the use of this document in connection with any infringement or other legal analysis concerning Intel products described herein. You agree to grant Intel a non-exclusive, royalty-free license to any patent claim thereafter drafted which includes subject matter disclosed herein.
No license (express or implied, by estoppel or otherwise) to any intellectual property rights is granted by this document, with the sole exception that you may publish an unmodified copy. You may create software implementations based on this document and in compliance with the foregoing that are intended to execute on the Intel product(s) referenced in this document. No rights are granted to create modifications or derivatives of this document.
The products described may contain design defects or errors known as errata which may cause the product to deviate from published specifications.  Current characterized errata are available on request.
Intel disclaims all express and implied warranties, including without limitation, the implied warranties of merchantability, fitness for a particular purpose, and non-infringement, as well as any warranty arising from course of performance, course of dealing, or usage in trade.
You are responsible for safety of the overall system, including compliance with applicable safety-related requirements or standards. 
<sup>&copy;</sup> Intel Corporation.  Intel, the Intel logo, and other Intel marks are trademarks of Intel Corporation or its subsidiaries.  Other names and brands may be claimed as the property of others. </p>
<p>OpenCL and the OpenCL logo are trademarks of Apple Inc. used by permission of the Khronos Group™.   </p>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.indexes", "search.suggest", "search.highlight", "content.code.copy", "navigation.indexes", "toc.follow"], "search": "../../../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.fac441b0.min.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>