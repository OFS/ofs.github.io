
# File enum.h



[**FileList**](files.md) **>** [**docs**](dir_49e56c817e5e54854c35e136979f97ca.md) **>** [**sw**](dir_55721a669a8e0900d975c02921addb49.md) **>** [**include**](dir_97b4588afba69bf89bbe554642ac6431.md) **>** [**opae**](dir_ade97cd9199f278c0723672dd8647ba4.md) **>** [**enum.h**](enum_8h.md)

[Go to the source code of this file.](enum_8h_source.md)

_APIs for resource enumeration and managing tokens._ [More...](#detailed-description)

* `#include <opae/types.h>`















## Public Functions

| Type | Name |
| ---: | :--- |
|  [**fpga\_result**](types__enum_8h.md#enum-fpga_result) | [**fpgaCloneToken**](#function-fpgaclonetoken) ([**fpga\_token**](types_8h.md#typedef-fpga_token) src, [**fpga\_token**](types_8h.md#typedef-fpga_token) \* dst) <br>_Clone a fpga\_token object._  |
|  [**fpga\_result**](types__enum_8h.md#enum-fpga_result) | [**fpgaDestroyToken**](#function-fpgadestroytoken) ([**fpga\_token**](types_8h.md#typedef-fpga_token) \* token) <br>_Destroy a Token._  |
|  [**fpga\_result**](types__enum_8h.md#enum-fpga_result) | [**fpgaEnumerate**](#function-fpgaenumerate) (const [**fpga\_properties**](types_8h.md#typedef-fpga_properties) \* filters, uint32\_t num\_filters, [**fpga\_token**](types_8h.md#typedef-fpga_token) \* tokens, uint32\_t max\_tokens, uint32\_t \* num\_matches) <br>_Enumerate FPGA resources present in the system._  |








# Detailed Description


These APIs are the first step for any application using OPAE to discover resources that are present on the system. They allow selective enumeration (i.e. getting a list of resources that match a given list of criteria) and methods to manage the lifecycle of tokens generated by [**fpgaEnumerate()**](enum_8h.md#function-fpgaenumerate). 


    
## Public Functions Documentation


### function fpgaCloneToken 

_Clone a fpga\_token object._ 
```C++
fpga_result fpgaCloneToken (
    fpga_token src,
    fpga_token * dst
) 
```



Creates a copy of an fpga\_token object.




**Note:**

This call creates a new token object and allocates memory for it. It is the responsibility of the using application to free this memory after use by calling [**fpgaDestroyToken()**](enum_8h.md#function-fpgadestroytoken) for the cloned token.




**Parameters:**


* `src` fpga\_token object to copy 
* `dst` New fpga\_token object cloned from 'src' 



**Returns:**

FPGA\_OK on success 





        

### function fpgaDestroyToken 

_Destroy a Token._ 
```C++
fpga_result fpgaDestroyToken (
    fpga_token * token
) 
```



This function destroys a token created by [**fpgaEnumerate()**](enum_8h.md#function-fpgaenumerate) and frees the associated memory.




**Note:**

[**fpgaDestroyToken()**](enum_8h.md#function-fpgadestroytoken) requires the address of an fpga\_token as previously created by [**fpgaEnumerate()**](enum_8h.md#function-fpgaenumerate) or [**fpgaCloneToken()**](enum_8h.md#function-fpgaclonetoken). Passing any other value results in undefined behavior.




**Parameters:**


* `token` fpga\_token to destroy 



**Returns:**

FPGA\_OK on success 





        

### function fpgaEnumerate 

_Enumerate FPGA resources present in the system._ 
```C++
fpga_result fpgaEnumerate (
    const fpga_properties * filters,
    uint32_t num_filters,
    fpga_token * tokens,
    uint32_t max_tokens,
    uint32_t * num_matches
) 
```



This call allows the user to query the system for FPGA resources that match a certain set of criteria, e.g. all accelerators that are assigned to a host interface and available, all FPGAs of a specific type, etc.


[**fpgaEnumerate()**](enum_8h.md#function-fpgaenumerate) will create a number of `fpga_token`s to represent the matching resources and populate the array `tokens` with these tokens. The `max_tokens` argument can be used to limit the number of tokens allocated/returned by [**fpgaEnumerate()**](enum_8h.md#function-fpgaenumerate); i.e., the number of tokens in the returned `tokens` array will be either `max_tokens` or `num_matches` (the number of resources matching the filter), whichever is smaller. Use [**fpgaDestroyToken()**](enum_8h.md#function-fpgadestroytoken) to destroy tokens that are no longer needed.


To query the number of matches for a particular set of filters (e.g. to allocate a `tokens` array of the appropriate size), call [**fpgaEnumerate()**](enum_8h.md#function-fpgaenumerate) with the parameter `tokens` set to NULL; this will only return the number of matches in `num_matches`.




**Note:**

[**fpgaEnumerate()**](enum_8h.md#function-fpgaenumerate) will allocate memory for the created tokens returned in `tokens`. It is the responsibility of the using application to free this memory after use by calling [**fpgaDestroyToken()**](enum_8h.md#function-fpgadestroytoken) for each of the returned tokens.




**Parameters:**


* `filters` Array of `fpga_properties` objects describing the properties of the objects that should be returned. A resource is considered matching if its properties match any one of the supplied filters. To match all FPGA resources, pass an empty filters object (one without any filter criteria set) or pass a NULL filters parameter with num\_filters set to 0. 
* `num_filters` Number of entries in the `filters` array, or 0 to match all FPGA resources when `filters` is NULL. 
* `tokens` Pointer to an array of fpga\_token variables to be populated. If NULL is supplied, [**fpgaEnumerate()**](enum_8h.md#function-fpgaenumerate) will not create any tokens, but it will return the number of possible matches in `num_match`. 
* `max_tokens` Maximum number of tokens that [**fpgaEnumerate()**](enum_8h.md#function-fpgaenumerate) shall return (length of `tokens` array). There may be more or fewer matches than this number; `num_matches` is set to the number of actual matches. 
* `num_matches` Number of resources matching the `filter` criteria. This number can be higher than the number of tokens returned in the `tokens` array (depending on the value of `max_tokens`). 



**Returns:**

FPGA\_OK on success. FPGA\_INVALID\_PARAM if invalid pointers or objects are passed into the function. FPGA\_NO\_DRIVER if OPAE can't find the respective enumeration data structures usually provided by the driver. FPGA\_NO\_MEMORY if there was not enough memory to create tokens. 





        

------------------------------
The documentation for this class was generated from the following file `docs/sw/include/opae/enum.h`